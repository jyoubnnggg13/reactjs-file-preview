(function(){"use strict";try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".preview-file{width:100%;height:100%;object-fit:contain}.loader-container{display:flex;justify-content:center;align-items:center;width:100%;height:100%}.loader{width:50px;height:50px;border:5px solid #e0e0e0;border-top:5px solid #606060;border-radius:50%;animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.hidden{visibility:hidden;width:0;height:0}")),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();
(function(V,n){typeof exports=="object"&&typeof module<"u"?n(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],n):(V=typeof globalThis<"u"?globalThis:V||self,n(V["npmjs-file-preview"]={},V.React))})(this,function(exports,require$$0){"use strict";function getAugmentedNamespace(V){if(Object.prototype.hasOwnProperty.call(V,"__esModule"))return V;var n=V.default;if(typeof n=="function"){var _=function t(){return this instanceof t?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};_.prototype=n.prototype}else _={};return Object.defineProperty(_,"__esModule",{value:!0}),Object.keys(V).forEach(function(t){var g=Object.getOwnPropertyDescriptor(V,t);Object.defineProperty(_,t,g.get?g:{enumerable:!0,get:function(){return V[t]}})}),_}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production_min;function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var V=require$$0,n=Symbol.for("react.element"),_=Symbol.for("react.fragment"),t=Object.prototype.hasOwnProperty,g=V.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,C={key:!0,ref:!0,__self:!0,__source:!0};function R(O,m,d){var f,E={},D=null,P=null;d!==void 0&&(D=""+d),m.key!==void 0&&(D=""+m.key),m.ref!==void 0&&(P=m.ref);for(f in m)t.call(m,f)&&!C.hasOwnProperty(f)&&(E[f]=m[f]);if(O&&O.defaultProps)for(f in m=O.defaultProps,m)E[f]===void 0&&(E[f]=m[f]);return{$$typeof:n,type:O,key:D,ref:P,props:E,_owner:g.current}}return reactJsxRuntime_production_min.Fragment=_,reactJsxRuntime_production_min.jsx=R,reactJsxRuntime_production_min.jsxs=R,reactJsxRuntime_production_min}var reactJsxRuntime_development={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_development;function requireReactJsxRuntime_development(){return hasRequiredReactJsxRuntime_development||(hasRequiredReactJsxRuntime_development=1,process.env.NODE_ENV!=="production"&&function(){var V=require$$0,n=Symbol.for("react.element"),_=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),O=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),P=Symbol.for("react.offscreen"),q=Symbol.iterator,u="@@iterator";function S(x){if(x===null||typeof x!="object")return null;var K=q&&x[q]||x[u];return typeof K=="function"?K:null}var I=V.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function T(x){{for(var K=arguments.length,Z=new Array(K>1?K-1:0),re=1;re<K;re++)Z[re-1]=arguments[re];y("error",x,Z)}}function y(x,K,Z){{var re=I.ReactDebugCurrentFrame,pe=re.getStackAddendum();pe!==""&&(K+="%s",Z=Z.concat([pe]));var _e=Z.map(function(he){return String(he)});_e.unshift("Warning: "+K),Function.prototype.apply.call(console[x],console,_e)}}var r=!1,s=!1,c=!1,A=!1,p=!1,M;M=Symbol.for("react.module.reference");function k(x){return!!(typeof x=="string"||typeof x=="function"||x===t||x===C||p||x===g||x===d||x===f||A||x===P||r||s||c||typeof x=="object"&&x!==null&&(x.$$typeof===D||x.$$typeof===E||x.$$typeof===R||x.$$typeof===O||x.$$typeof===m||x.$$typeof===M||x.getModuleId!==void 0))}function X(x,K,Z){var re=x.displayName;if(re)return re;var pe=K.displayName||K.name||"";return pe!==""?Z+"("+pe+")":Z}function N(x){return x.displayName||"Context"}function v(x){if(x==null)return null;if(typeof x.tag=="number"&&T("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof x=="function")return x.displayName||x.name||null;if(typeof x=="string")return x;switch(x){case t:return"Fragment";case _:return"Portal";case C:return"Profiler";case g:return"StrictMode";case d:return"Suspense";case f:return"SuspenseList"}if(typeof x=="object")switch(x.$$typeof){case O:var K=x;return N(K)+".Consumer";case R:var Z=x;return N(Z._context)+".Provider";case m:return X(x,x.render,"ForwardRef");case E:var re=x.displayName||null;return re!==null?re:v(x.type)||"Memo";case D:{var pe=x,_e=pe._payload,he=pe._init;try{return v(he(_e))}catch{return null}}}return null}var L=Object.assign,j=0,$,F,o,e,i,a,h;function l(){}l.__reactDisabledLog=!0;function b(){{if(j===0){$=console.log,F=console.info,o=console.warn,e=console.error,i=console.group,a=console.groupCollapsed,h=console.groupEnd;var x={configurable:!0,enumerable:!0,value:l,writable:!0};Object.defineProperties(console,{info:x,log:x,warn:x,error:x,group:x,groupCollapsed:x,groupEnd:x})}j++}}function w(){{if(j--,j===0){var x={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:L({},x,{value:$}),info:L({},x,{value:F}),warn:L({},x,{value:o}),error:L({},x,{value:e}),group:L({},x,{value:i}),groupCollapsed:L({},x,{value:a}),groupEnd:L({},x,{value:h})})}j<0&&T("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var U=I.ReactCurrentDispatcher,G;function B(x,K,Z){{if(G===void 0)try{throw Error()}catch(pe){var re=pe.stack.trim().match(/\n( *(at )?)/);G=re&&re[1]||""}return`
`+G+x}}var Y=!1,J;{var Q=typeof WeakMap=="function"?WeakMap:Map;J=new Q}function te(x,K){if(!x||Y)return"";{var Z=J.get(x);if(Z!==void 0)return Z}var re;Y=!0;var pe=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var _e;_e=U.current,U.current=null,b();try{if(K){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(Te){re=Te}Reflect.construct(x,[],he)}else{try{he.call()}catch(Te){re=Te}x.call(he.prototype)}}else{try{throw Error()}catch(Te){re=Te}x()}}catch(Te){if(Te&&re&&typeof Te.stack=="string"){for(var le=Te.stack.split(`
`),Pe=re.stack.split(`
`),ve=le.length-1,Ce=Pe.length-1;ve>=1&&Ce>=0&&le[ve]!==Pe[Ce];)Ce--;for(;ve>=1&&Ce>=0;ve--,Ce--)if(le[ve]!==Pe[Ce]){if(ve!==1||Ce!==1)do if(ve--,Ce--,Ce<0||le[ve]!==Pe[Ce]){var Fe=`
`+le[ve].replace(" at new "," at ");return x.displayName&&Fe.includes("<anonymous>")&&(Fe=Fe.replace("<anonymous>",x.displayName)),typeof x=="function"&&J.set(x,Fe),Fe}while(ve>=1&&Ce>=0);break}}}finally{Y=!1,U.current=_e,w(),Error.prepareStackTrace=pe}var Ne=x?x.displayName||x.name:"",Ie=Ne?B(Ne):"";return typeof x=="function"&&J.set(x,Ie),Ie}function oe(x,K,Z){return te(x,!1)}function ie(x){var K=x.prototype;return!!(K&&K.isReactComponent)}function de(x,K,Z){if(x==null)return"";if(typeof x=="function")return te(x,ie(x));if(typeof x=="string")return B(x);switch(x){case d:return B("Suspense");case f:return B("SuspenseList")}if(typeof x=="object")switch(x.$$typeof){case m:return oe(x.render);case E:return de(x.type,K,Z);case D:{var re=x,pe=re._payload,_e=re._init;try{return de(_e(pe),K,Z)}catch{}}}return""}var ae=Object.prototype.hasOwnProperty,ue={},ye=I.ReactDebugCurrentFrame;function ne(x){if(x){var K=x._owner,Z=de(x.type,x._source,K?K.type:null);ye.setExtraStackFrame(Z)}else ye.setExtraStackFrame(null)}function be(x,K,Z,re,pe){{var _e=Function.call.bind(ae);for(var he in x)if(_e(x,he)){var le=void 0;try{if(typeof x[he]!="function"){var Pe=Error((re||"React class")+": "+Z+" type `"+he+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof x[he]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Pe.name="Invariant Violation",Pe}le=x[he](K,he,re,Z,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(ve){le=ve}le&&!(le instanceof Error)&&(ne(pe),T("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",re||"React class",Z,he,typeof le),ne(null)),le instanceof Error&&!(le.message in ue)&&(ue[le.message]=!0,ne(pe),T("Failed %s type: %s",Z,le.message),ne(null))}}}var me=Array.isArray;function Se(x){return me(x)}function Ae(x){{var K=typeof Symbol=="function"&&Symbol.toStringTag,Z=K&&x[Symbol.toStringTag]||x.constructor.name||"Object";return Z}}function we(x){try{return xe(x),!1}catch{return!0}}function xe(x){return""+x}function Re(x){if(we(x))return T("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Ae(x)),xe(x)}var Ee=I.ReactCurrentOwner,ke={key:!0,ref:!0,__self:!0,__source:!0},ge,Oe;function je(x){if(ae.call(x,"ref")){var K=Object.getOwnPropertyDescriptor(x,"ref").get;if(K&&K.isReactWarning)return!1}return x.ref!==void 0}function Ge(x){if(ae.call(x,"key")){var K=Object.getOwnPropertyDescriptor(x,"key").get;if(K&&K.isReactWarning)return!1}return x.key!==void 0}function He(x,K){typeof x.ref=="string"&&Ee.current}function $e(x,K){{var Z=function(){ge||(ge=!0,T("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",K))};Z.isReactWarning=!0,Object.defineProperty(x,"key",{get:Z,configurable:!0})}}function Ve(x,K){{var Z=function(){Oe||(Oe=!0,T("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",K))};Z.isReactWarning=!0,Object.defineProperty(x,"ref",{get:Z,configurable:!0})}}var Xe=function(x,K,Z,re,pe,_e,he){var le={$$typeof:n,type:x,key:K,ref:Z,props:he,_owner:_e};return le._store={},Object.defineProperty(le._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(le,"_self",{configurable:!1,enumerable:!1,writable:!1,value:re}),Object.defineProperty(le,"_source",{configurable:!1,enumerable:!1,writable:!1,value:pe}),Object.freeze&&(Object.freeze(le.props),Object.freeze(le)),le};function ze(x,K,Z,re,pe){{var _e,he={},le=null,Pe=null;Z!==void 0&&(Re(Z),le=""+Z),Ge(K)&&(Re(K.key),le=""+K.key),je(K)&&(Pe=K.ref,He(K,pe));for(_e in K)ae.call(K,_e)&&!ke.hasOwnProperty(_e)&&(he[_e]=K[_e]);if(x&&x.defaultProps){var ve=x.defaultProps;for(_e in ve)he[_e]===void 0&&(he[_e]=ve[_e])}if(le||Pe){var Ce=typeof x=="function"?x.displayName||x.name||"Unknown":x;le&&$e(he,Ce),Pe&&Ve(he,Ce)}return Xe(x,le,Pe,pe,re,Ee.current,he)}}var Ue=I.ReactCurrentOwner,z=I.ReactDebugCurrentFrame;function W(x){if(x){var K=x._owner,Z=de(x.type,x._source,K?K.type:null);z.setExtraStackFrame(Z)}else z.setExtraStackFrame(null)}var H;H=!1;function ee(x){return typeof x=="object"&&x!==null&&x.$$typeof===n}function se(){{if(Ue.current){var x=v(Ue.current.type);if(x)return`

Check the render method of \``+x+"`."}return""}}function ce(x){return""}var fe={};function Me(x){{var K=se();if(!K){var Z=typeof x=="string"?x:x.displayName||x.name;Z&&(K=`

Check the top-level render call using <`+Z+">.")}return K}}function Le(x,K){{if(!x._store||x._store.validated||x.key!=null)return;x._store.validated=!0;var Z=Me(K);if(fe[Z])return;fe[Z]=!0;var re="";x&&x._owner&&x._owner!==Ue.current&&(re=" It was passed a child from "+v(x._owner.type)+"."),W(x),T('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',Z,re),W(null)}}function De(x,K){{if(typeof x!="object")return;if(Se(x))for(var Z=0;Z<x.length;Z++){var re=x[Z];ee(re)&&Le(re,K)}else if(ee(x))x._store&&(x._store.validated=!0);else if(x){var pe=S(x);if(typeof pe=="function"&&pe!==x.entries)for(var _e=pe.call(x),he;!(he=_e.next()).done;)ee(he.value)&&Le(he.value,K)}}}function qe(x){{var K=x.type;if(K==null||typeof K=="string")return;var Z;if(typeof K=="function")Z=K.propTypes;else if(typeof K=="object"&&(K.$$typeof===m||K.$$typeof===E))Z=K.propTypes;else return;if(Z){var re=v(K);be(Z,x.props,"prop",re,x)}else if(K.PropTypes!==void 0&&!H){H=!0;var pe=v(K);T("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",pe||"Unknown")}typeof K.getDefaultProps=="function"&&!K.getDefaultProps.isReactClassApproved&&T("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Ye(x){{for(var K=Object.keys(x.props),Z=0;Z<K.length;Z++){var re=K[Z];if(re!=="children"&&re!=="key"){W(x),T("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",re),W(null);break}}x.ref!==null&&(W(x),T("Invalid attribute `ref` supplied to `React.Fragment`."),W(null))}}var We={};function Be(x,K,Z,re,pe,_e){{var he=k(x);if(!he){var le="";(x===void 0||typeof x=="object"&&x!==null&&Object.keys(x).length===0)&&(le+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var Pe=ce();Pe?le+=Pe:le+=se();var ve;x===null?ve="null":Se(x)?ve="array":x!==void 0&&x.$$typeof===n?(ve="<"+(v(x.type)||"Unknown")+" />",le=" Did you accidentally export a JSX literal instead of a component?"):ve=typeof x,T("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",ve,le)}var Ce=ze(x,K,Z,pe,_e);if(Ce==null)return Ce;if(he){var Fe=K.children;if(Fe!==void 0)if(re)if(Se(Fe)){for(var Ne=0;Ne<Fe.length;Ne++)De(Fe[Ne],x);Object.freeze&&Object.freeze(Fe)}else T("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else De(Fe,x)}if(ae.call(K,"key")){var Ie=v(x),Te=Object.keys(K).filter(function(nt){return nt!=="key"}),Je=Te.length>0?"{key: someKey, "+Te.join(": ..., ")+": ...}":"{key: someKey}";if(!We[Ie+Je]){var tt=Te.length>0?"{"+Te.join(": ..., ")+": ...}":"{}";T(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,Je,Ie,tt,Ie),We[Ie+Je]=!0}}return x===t?Ye(Ce):qe(Ce),Ce}}function Ke(x,K,Z){return Be(x,K,Z,!0)}function Qe(x,K,Z){return Be(x,K,Z,!1)}var Ze=Qe,et=Ke;reactJsxRuntime_development.Fragment=t,reactJsxRuntime_development.jsx=Ze,reactJsxRuntime_development.jsxs=et}()),reactJsxRuntime_development}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,process.env.NODE_ENV==="production"?jsxRuntime.exports=requireReactJsxRuntime_production_min():jsxRuntime.exports=requireReactJsxRuntime_development()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime();function commonjsRequire(V){throw new Error('Could not dynamically require "'+V+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$1={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);var pdf=pdf$1.exports,hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,function(module,exports){(function(n,_){module.exports=_()})(pdf,function(){return(()=>{var __webpack_modules__=[,(V,n,_)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.addLinkAttributes=u,n.deprecated=A,n.getFilenameFromUrl=T,n.getPdfFilenameFromUrl=y,n.getXfaPageViewport=k,n.isDataScheme=S,n.isPdfFile=I,n.isValidFetchUrl=s,n.loadScript=c,n.StatTimer=n.RenderingCancelledException=n.PDFDateString=n.PageViewport=n.LinkTarget=n.DOMSVGFactory=n.DOMStandardFontDataFactory=n.DOMCMapReaderFactory=n.DOMCanvasFactory=n.DEFAULT_LINK_REL=void 0;var t=_(2),g=_(5);const C="noopener noreferrer nofollow";n.DEFAULT_LINK_REL=C;const R="http://www.w3.org/2000/svg";class O extends g.BaseCanvasFactory{constructor({ownerDocument:N=globalThis.document}={}){super(),this._document=N}_createCanvas(N,v){const L=this._document.createElement("canvas");return L.width=N,L.height=v,L}}n.DOMCanvasFactory=O;async function m(X,N=!1){if(s(X,document.baseURI)){const v=await fetch(X);if(!v.ok)throw new Error(v.statusText);return N?new Uint8Array(await v.arrayBuffer()):(0,t.stringToBytes)(await v.text())}return new Promise((v,L)=>{const j=new XMLHttpRequest;j.open("GET",X,!0),N&&(j.responseType="arraybuffer"),j.onreadystatechange=()=>{if(j.readyState===XMLHttpRequest.DONE){if(j.status===200||j.status===0){let $;if(N&&j.response?$=new Uint8Array(j.response):!N&&j.responseText&&($=(0,t.stringToBytes)(j.responseText)),$){v($);return}}L(new Error(j.statusText))}},j.send(null)})}class d extends g.BaseCMapReaderFactory{_fetchData(N,v){return m(N,this.isCompressed).then(L=>({cMapData:L,compressionType:v}))}}n.DOMCMapReaderFactory=d;class f extends g.BaseStandardFontDataFactory{_fetchData(N){return m(N,!0)}}n.DOMStandardFontDataFactory=f;class E extends g.BaseSVGFactory{_createSVG(N){return document.createElementNS(R,N)}}n.DOMSVGFactory=E;class D{constructor({viewBox:N,scale:v,rotation:L,offsetX:j=0,offsetY:$=0,dontFlip:F=!1}){this.viewBox=N,this.scale=v,this.rotation=L,this.offsetX=j,this.offsetY=$;const o=(N[2]+N[0])/2,e=(N[3]+N[1])/2;let i,a,h,l;switch(L%=360,L<0&&(L+=360),L){case 180:i=-1,a=0,h=0,l=1;break;case 90:i=0,a=1,h=1,l=0;break;case 270:i=0,a=-1,h=-1,l=0;break;case 0:i=1,a=0,h=0,l=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}F&&(h=-h,l=-l);let b,w,U,G;i===0?(b=Math.abs(e-N[1])*v+j,w=Math.abs(o-N[0])*v+$,U=Math.abs(N[3]-N[1])*v,G=Math.abs(N[2]-N[0])*v):(b=Math.abs(o-N[0])*v+j,w=Math.abs(e-N[1])*v+$,U=Math.abs(N[2]-N[0])*v,G=Math.abs(N[3]-N[1])*v),this.transform=[i*v,a*v,h*v,l*v,b-i*v*o-h*v*e,w-a*v*o-l*v*e],this.width=U,this.height=G}clone({scale:N=this.scale,rotation:v=this.rotation,offsetX:L=this.offsetX,offsetY:j=this.offsetY,dontFlip:$=!1}={}){return new D({viewBox:this.viewBox.slice(),scale:N,rotation:v,offsetX:L,offsetY:j,dontFlip:$})}convertToViewportPoint(N,v){return t.Util.applyTransform([N,v],this.transform)}convertToViewportRectangle(N){const v=t.Util.applyTransform([N[0],N[1]],this.transform),L=t.Util.applyTransform([N[2],N[3]],this.transform);return[v[0],v[1],L[0],L[1]]}convertToPdfPoint(N,v){return t.Util.applyInverseTransform([N,v],this.transform)}}n.PageViewport=D;class P extends t.BaseException{constructor(N,v){super(N),this.type=v}}n.RenderingCancelledException=P;const q={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};n.LinkTarget=q;function u(X,{url:N,target:v,rel:L,enabled:j=!0}={}){(0,t.assert)(N&&typeof N=="string",'addLinkAttributes: A valid "url" parameter must provided.');const $=(0,t.removeNullCharacters)(N);j?X.href=X.title=$:(X.href="",X.title=`Disabled: ${$}`,X.onclick=()=>!1);let F="";switch(v){case q.NONE:break;case q.SELF:F="_self";break;case q.BLANK:F="_blank";break;case q.PARENT:F="_parent";break;case q.TOP:F="_top";break}X.target=F,X.rel=typeof L=="string"?L:C}function S(X){const N=X.length;let v=0;for(;v<N&&X[v].trim()==="";)v++;return X.substring(v,v+5).toLowerCase()==="data:"}function I(X){return typeof X=="string"&&/\.pdf$/i.test(X)}function T(X){const N=X.indexOf("#"),v=X.indexOf("?"),L=Math.min(N>0?N:X.length,v>0?v:X.length);return X.substring(X.lastIndexOf("/",L)+1,L)}function y(X,N="document.pdf"){if(typeof X!="string")return N;if(S(X))return(0,t.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),N;const v=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,L=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,j=v.exec(X);let $=L.exec(j[1])||L.exec(j[2])||L.exec(j[3]);if($&&($=$[0],$.includes("%")))try{$=L.exec(decodeURIComponent($))[0]}catch{}return $||N}class r{constructor(){this.started=Object.create(null),this.times=[]}time(N){N in this.started&&(0,t.warn)(`Timer is already running for ${N}`),this.started[N]=Date.now()}timeEnd(N){N in this.started||(0,t.warn)(`Timer has not been started for ${N}`),this.times.push({name:N,start:this.started[N],end:Date.now()}),delete this.started[N]}toString(){const N=[];let v=0;for(const L of this.times){const j=L.name;j.length>v&&(v=j.length)}for(const L of this.times){const j=L.end-L.start;N.push(`${L.name.padEnd(v)} ${j}ms
`)}return N.join("")}}n.StatTimer=r;function s(X,N){try{const{protocol:v}=N?new URL(X,N):new URL(X);return v==="http:"||v==="https:"}catch{return!1}}function c(X,N=!1){return new Promise((v,L)=>{const j=document.createElement("script");j.src=X,j.onload=function($){N&&j.remove(),v($)},j.onerror=function(){L(new Error(`Cannot load script at: ${j.src}`))},(document.head||document.documentElement).appendChild(j)})}function A(X){console.log("Deprecated API usage: "+X)}let p;class M{static toDateObject(N){if(!N||!(0,t.isString)(N))return null;p||(p=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const v=p.exec(N);if(!v)return null;const L=parseInt(v[1],10);let j=parseInt(v[2],10);j=j>=1&&j<=12?j-1:0;let $=parseInt(v[3],10);$=$>=1&&$<=31?$:1;let F=parseInt(v[4],10);F=F>=0&&F<=23?F:0;let o=parseInt(v[5],10);o=o>=0&&o<=59?o:0;let e=parseInt(v[6],10);e=e>=0&&e<=59?e:0;const i=v[7]||"Z";let a=parseInt(v[8],10);a=a>=0&&a<=23?a:0;let h=parseInt(v[9],10)||0;return h=h>=0&&h<=59?h:0,i==="-"?(F+=a,o+=h):i==="+"&&(F-=a,o-=h),new Date(Date.UTC(L,j,$,F,o,e))}}n.PDFDateString=M;function k(X,{scale:N=1,rotation:v=0}){const{width:L,height:j}=X.attributes.style,$=[0,0,parseInt(L),parseInt(j)];return new D({viewBox:$,scale:N,rotation:v})}},(V,n,_)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.arrayByteLength=oe,n.arraysToBytes=ie,n.assert=$,n.bytesToString=Q,n.createObjectURL=Ue,n.createPromiseCapability=ze,n.createValidAbsoluteUrl=e,n.escapeString=Re,n.getModificationDate=Xe,n.getVerbosityLevel=N,n.info=v,n.isArrayBuffer=$e,n.isArrayEqual=Ve,n.isAscii=Ee,n.isBool=je,n.isNum=Ge,n.isSameOrigin=F,n.isString=He,n.objectFromMap=ue,n.objectSize=ae,n.removeNullCharacters=J,n.setVerbosityLevel=X,n.shadow=i,n.string32=de,n.stringToBytes=te,n.stringToPDFString=xe,n.stringToUTF16BEString=ke,n.stringToUTF8String=ge,n.unreachable=j,n.utf8StringToString=Oe,n.warn=L,n.VerbosityLevel=n.Util=n.UNSUPPORTED_FEATURES=n.UnknownErrorException=n.UnexpectedResponseException=n.TextRenderingMode=n.StreamType=n.PermissionFlag=n.PasswordResponses=n.PasswordException=n.PageActionEventType=n.OPS=n.MissingPDFException=n.IsLittleEndianCached=n.IsEvalSupportedCached=n.InvalidPDFException=n.ImageKind=n.IDENTITY_MATRIX=n.FormatError=n.FontType=n.FONT_IDENTITY_MATRIX=n.DocumentActionEventType=n.CMapCompressionType=n.BaseException=n.AnnotationType=n.AnnotationStateModelType=n.AnnotationReviewState=n.AnnotationReplyType=n.AnnotationMarkedState=n.AnnotationFlag=n.AnnotationFieldFlag=n.AnnotationBorderStyleType=n.AnnotationActionEventType=n.AbortException=void 0,_(3);const t=[1,0,0,1,0,0];n.IDENTITY_MATRIX=t;const g=[.001,0,0,.001,0,0];n.FONT_IDENTITY_MATRIX=g;const C={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};n.PermissionFlag=C;const R={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};n.TextRenderingMode=R;const O={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};n.ImageKind=O;const m={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};n.AnnotationType=m;const d={MARKED:"Marked",REVIEW:"Review"};n.AnnotationStateModelType=d;const f={MARKED:"Marked",UNMARKED:"Unmarked"};n.AnnotationMarkedState=f;const E={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};n.AnnotationReviewState=E;const D={GROUP:"Group",REPLY:"R"};n.AnnotationReplyType=D;const P={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};n.AnnotationFlag=P;const q={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};n.AnnotationFieldFlag=q;const u={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};n.AnnotationBorderStyleType=u;const S={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};n.AnnotationActionEventType=S;const I={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};n.DocumentActionEventType=I;const T={O:"PageOpen",C:"PageClose"};n.PageActionEventType=T;const y={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};n.StreamType=y;const r={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};n.FontType=r;const s={ERRORS:0,WARNINGS:1,INFOS:5};n.VerbosityLevel=s;const c={NONE:0,BINARY:1,STREAM:2};n.CMapCompressionType=c;const A={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};n.OPS=A;const p={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent"};n.UNSUPPORTED_FEATURES=p;const M={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};n.PasswordResponses=M;let k=s.WARNINGS;function X(z){Number.isInteger(z)&&(k=z)}function N(){return k}function v(z){k>=s.INFOS&&console.log(`Info: ${z}`)}function L(z){k>=s.WARNINGS&&console.log(`Warning: ${z}`)}function j(z){throw new Error(z)}function $(z,W){z||j(W)}function F(z,W){let H;try{if(H=new URL(z),!H.origin||H.origin==="null")return!1}catch{return!1}const ee=new URL(W,H);return H.origin===ee.origin}function o(z){if(!z)return!1;switch(z.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function e(z,W){if(!z)return null;try{const H=W?new URL(z,W):new URL(z);if(o(H))return H}catch{}return null}function i(z,W,H){return Object.defineProperty(z,W,{value:H,enumerable:!0,configurable:!0,writable:!1}),H}const a=function(){function W(H){this.constructor===W&&j("Cannot initialize BaseException."),this.message=H,this.name=this.constructor.name}return W.prototype=new Error,W.constructor=W,W}();n.BaseException=a;class h extends a{constructor(W,H){super(W),this.code=H}}n.PasswordException=h;class l extends a{constructor(W,H){super(W),this.details=H}}n.UnknownErrorException=l;class b extends a{}n.InvalidPDFException=b;class w extends a{}n.MissingPDFException=w;class U extends a{constructor(W,H){super(W),this.status=H}}n.UnexpectedResponseException=U;class G extends a{}n.FormatError=G;class B extends a{}n.AbortException=B;const Y=/\x00/g;function J(z){return typeof z!="string"?(L("The argument for removeNullCharacters must be a string."),z):z.replace(Y,"")}function Q(z){$(z!==null&&typeof z=="object"&&z.length!==void 0,"Invalid argument for bytesToString");const W=z.length,H=8192;if(W<H)return String.fromCharCode.apply(null,z);const ee=[];for(let se=0;se<W;se+=H){const ce=Math.min(se+H,W),fe=z.subarray(se,ce);ee.push(String.fromCharCode.apply(null,fe))}return ee.join("")}function te(z){$(typeof z=="string","Invalid argument for stringToBytes");const W=z.length,H=new Uint8Array(W);for(let ee=0;ee<W;++ee)H[ee]=z.charCodeAt(ee)&255;return H}function oe(z){return z.length!==void 0?z.length:($(z.byteLength!==void 0,"arrayByteLength - invalid argument."),z.byteLength)}function ie(z){const W=z.length;if(W===1&&z[0]instanceof Uint8Array)return z[0];let H=0;for(let ce=0;ce<W;ce++)H+=oe(z[ce]);let ee=0;const se=new Uint8Array(H);for(let ce=0;ce<W;ce++){let fe=z[ce];fe instanceof Uint8Array||(typeof fe=="string"?fe=te(fe):fe=new Uint8Array(fe));const Me=fe.byteLength;se.set(fe,ee),ee+=Me}return se}function de(z){return String.fromCharCode(z>>24&255,z>>16&255,z>>8&255,z&255)}function ae(z){return Object.keys(z).length}function ue(z){const W=Object.create(null);for(const[H,ee]of z)W[H]=ee;return W}function ye(){const z=new Uint8Array(4);return z[0]=1,new Uint32Array(z.buffer,0,1)[0]===1}const ne={get value(){return i(this,"value",ye())}};n.IsLittleEndianCached=ne;function be(){try{return new Function(""),!0}catch{return!1}}const me={get value(){return i(this,"value",be())}};n.IsEvalSupportedCached=me;const Se=[...Array(256).keys()].map(z=>z.toString(16).padStart(2,"0"));class Ae{static makeHexColor(W,H,ee){return`#${Se[W]}${Se[H]}${Se[ee]}`}static transform(W,H){return[W[0]*H[0]+W[2]*H[1],W[1]*H[0]+W[3]*H[1],W[0]*H[2]+W[2]*H[3],W[1]*H[2]+W[3]*H[3],W[0]*H[4]+W[2]*H[5]+W[4],W[1]*H[4]+W[3]*H[5]+W[5]]}static applyTransform(W,H){const ee=W[0]*H[0]+W[1]*H[2]+H[4],se=W[0]*H[1]+W[1]*H[3]+H[5];return[ee,se]}static applyInverseTransform(W,H){const ee=H[0]*H[3]-H[1]*H[2],se=(W[0]*H[3]-W[1]*H[2]+H[2]*H[5]-H[4]*H[3])/ee,ce=(-W[0]*H[1]+W[1]*H[0]+H[4]*H[1]-H[5]*H[0])/ee;return[se,ce]}static getAxialAlignedBoundingBox(W,H){const ee=Ae.applyTransform(W,H),se=Ae.applyTransform(W.slice(2,4),H),ce=Ae.applyTransform([W[0],W[3]],H),fe=Ae.applyTransform([W[2],W[1]],H);return[Math.min(ee[0],se[0],ce[0],fe[0]),Math.min(ee[1],se[1],ce[1],fe[1]),Math.max(ee[0],se[0],ce[0],fe[0]),Math.max(ee[1],se[1],ce[1],fe[1])]}static inverseTransform(W){const H=W[0]*W[3]-W[1]*W[2];return[W[3]/H,-W[1]/H,-W[2]/H,W[0]/H,(W[2]*W[5]-W[4]*W[3])/H,(W[4]*W[1]-W[5]*W[0])/H]}static apply3dTransform(W,H){return[W[0]*H[0]+W[1]*H[1]+W[2]*H[2],W[3]*H[0]+W[4]*H[1]+W[5]*H[2],W[6]*H[0]+W[7]*H[1]+W[8]*H[2]]}static singularValueDecompose2dScale(W){const H=[W[0],W[2],W[1],W[3]],ee=W[0]*H[0]+W[1]*H[2],se=W[0]*H[1]+W[1]*H[3],ce=W[2]*H[0]+W[3]*H[2],fe=W[2]*H[1]+W[3]*H[3],Me=(ee+fe)/2,Le=Math.sqrt((ee+fe)**2-4*(ee*fe-ce*se))/2,De=Me+Le||1,qe=Me-Le||1;return[Math.sqrt(De),Math.sqrt(qe)]}static normalizeRect(W){const H=W.slice(0);return W[0]>W[2]&&(H[0]=W[2],H[2]=W[0]),W[1]>W[3]&&(H[1]=W[3],H[3]=W[1]),H}static intersect(W,H){function ee(Me,Le){return Me-Le}const se=[W[0],W[2],H[0],H[2]].sort(ee),ce=[W[1],W[3],H[1],H[3]].sort(ee),fe=[];if(W=Ae.normalizeRect(W),H=Ae.normalizeRect(H),se[0]===W[0]&&se[1]===H[0]||se[0]===H[0]&&se[1]===W[0])fe[0]=se[1],fe[2]=se[2];else return null;if(ce[0]===W[1]&&ce[1]===H[1]||ce[0]===H[1]&&ce[1]===W[1])fe[1]=ce[1],fe[3]=ce[2];else return null;return fe}}n.Util=Ae;const we=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function xe(z){const W=z.length,H=[];if(z[0]==="þ"&&z[1]==="ÿ")for(let ee=2;ee<W;ee+=2)H.push(String.fromCharCode(z.charCodeAt(ee)<<8|z.charCodeAt(ee+1)));else if(z[0]==="ÿ"&&z[1]==="þ")for(let ee=2;ee<W;ee+=2)H.push(String.fromCharCode(z.charCodeAt(ee+1)<<8|z.charCodeAt(ee)));else for(let ee=0;ee<W;++ee){const se=we[z.charCodeAt(ee)];H.push(se?String.fromCharCode(se):z.charAt(ee))}return H.join("")}function Re(z){return z.replace(/([()\\\n\r])/g,W=>W===`
`?"\\n":W==="\r"?"\\r":`\\${W}`)}function Ee(z){return/^[\x00-\x7F]*$/.test(z)}function ke(z){const W=["þÿ"];for(let H=0,ee=z.length;H<ee;H++){const se=z.charCodeAt(H);W.push(String.fromCharCode(se>>8&255),String.fromCharCode(se&255))}return W.join("")}function ge(z){return decodeURIComponent(escape(z))}function Oe(z){return unescape(encodeURIComponent(z))}function je(z){return typeof z=="boolean"}function Ge(z){return typeof z=="number"}function He(z){return typeof z=="string"}function $e(z){return typeof z=="object"&&z!==null&&z.byteLength!==void 0}function Ve(z,W){if(z.length!==W.length)return!1;for(let H=0,ee=z.length;H<ee;H++)if(z[H]!==W[H])return!1;return!0}function Xe(z=new Date){return[z.getUTCFullYear().toString(),(z.getUTCMonth()+1).toString().padStart(2,"0"),z.getUTCDate().toString().padStart(2,"0"),z.getUTCHours().toString().padStart(2,"0"),z.getUTCMinutes().toString().padStart(2,"0"),z.getUTCSeconds().toString().padStart(2,"0")].join("")}function ze(){const z=Object.create(null);let W=!1;return Object.defineProperty(z,"settled",{get(){return W}}),z.promise=new Promise(function(H,ee){z.resolve=function(se){W=!0,H(se)},z.reject=function(se){W=!0,ee(se)}}),z}function Ue(z,W="",H=!1){if(URL.createObjectURL&&!H)return URL.createObjectURL(new Blob([z],{type:W}));const ee="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let se=`data:${W};base64,`;for(let ce=0,fe=z.length;ce<fe;ce+=3){const Me=z[ce]&255,Le=z[ce+1]&255,De=z[ce+2]&255,qe=Me>>2,Ye=(Me&3)<<4|Le>>4,We=ce+1<fe?(Le&15)<<2|De>>6:64,Be=ce+2<fe?De&63:64;se+=ee[qe]+ee[Ye]+ee[We]+ee[Be]}return se}},(V,n,_)=>{_(4)},(V,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.isNodeJS=void 0;const _=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");n.isNodeJS=_},(V,n,_)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BaseSVGFactory=n.BaseStandardFontDataFactory=n.BaseCMapReaderFactory=n.BaseCanvasFactory=void 0;var t=_(2);class g{constructor(){this.constructor===g&&(0,t.unreachable)("Cannot initialize BaseCanvasFactory.")}create(d,f){if(d<=0||f<=0)throw new Error("Invalid canvas size");const E=this._createCanvas(d,f);return{canvas:E,context:E.getContext("2d")}}reset(d,f,E){if(!d.canvas)throw new Error("Canvas is not specified");if(f<=0||E<=0)throw new Error("Invalid canvas size");d.canvas.width=f,d.canvas.height=E}destroy(d){if(!d.canvas)throw new Error("Canvas is not specified");d.canvas.width=0,d.canvas.height=0,d.canvas=null,d.context=null}_createCanvas(d,f){(0,t.unreachable)("Abstract method `_createCanvas` called.")}}n.BaseCanvasFactory=g;class C{constructor({baseUrl:d=null,isCompressed:f=!1}){this.constructor===C&&(0,t.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=d,this.isCompressed=f}async fetch({name:d}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!d)throw new Error("CMap name must be specified.");const f=this.baseUrl+d+(this.isCompressed?".bcmap":""),E=this.isCompressed?t.CMapCompressionType.BINARY:t.CMapCompressionType.NONE;return this._fetchData(f,E).catch(D=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${f}`)})}_fetchData(d,f){(0,t.unreachable)("Abstract method `_fetchData` called.")}}n.BaseCMapReaderFactory=C;class R{constructor({baseUrl:d=null}){this.constructor===R&&(0,t.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=d}async fetch({filename:d}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!d)throw new Error("Font filename must be specified.");const f=`${this.baseUrl}${d}`;return this._fetchData(f).catch(E=>{throw new Error(`Unable to load font data at: ${f}`)})}_fetchData(d){(0,t.unreachable)("Abstract method `_fetchData` called.")}}n.BaseStandardFontDataFactory=R;class O{constructor(){this.constructor===O&&(0,t.unreachable)("Cannot initialize BaseSVGFactory.")}create(d,f){if(d<=0||f<=0)throw new Error("Invalid SVG dimensions");const E=this._createSVG("svg:svg");return E.setAttribute("version","1.1"),E.setAttribute("width",`${d}px`),E.setAttribute("height",`${f}px`),E.setAttribute("preserveAspectRatio","none"),E.setAttribute("viewBox",`0 0 ${d} ${f}`),E}createElement(d){if(typeof d!="string")throw new Error("Invalid SVG element type");return this._createSVG(d)}_createSVG(d){(0,t.unreachable)("Abstract method `_createSVG` called.")}}n.BaseSVGFactory=O},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCMapReaderFactory=exports.DefaultCanvasFactory=exports.build=void 0;var _util=__w_pdfjs_require__(2),_display_utils=__w_pdfjs_require__(1),_font_loader=__w_pdfjs_require__(7),_node_utils=__w_pdfjs_require__(8),_annotation_storage=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(12),_is_node=__w_pdfjs_require__(4),_message_handler=__w_pdfjs_require__(13),_metadata=__w_pdfjs_require__(14),_optional_content_config=__w_pdfjs_require__(15),_transport_stream=__w_pdfjs_require__(16);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DefaultCanvasFactory=_is_node.isNodeJS?_node_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_is_node.isNodeJS?_node_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultStandardFontDataFactory=_is_node.isNodeJS?_node_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;let createPDFNetworkStream;function setPDFNetworkStreamFactory(V){createPDFNetworkStream=V}function getDocument(V){const n=new PDFDocumentLoadingTask;let _;if(typeof V=="string"||V instanceof URL)_={url:V};else if((0,_util.isArrayBuffer)(V))_={data:V};else if(V instanceof PDFDataRangeTransport)_={range:V};else{if(typeof V!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!V.url&&!V.data&&!V.range)throw new Error("Invalid parameter object: need either .data, .range or .url");_=V}const t=Object.create(null);let g=null,C=null;for(const O in _){const m=_[O];switch(O){case"url":if(typeof window<"u")try{t[O]=new URL(m,window.location).href;continue}catch(d){(0,_util.warn)(`Cannot create valid URL: "${d}".`)}else if(typeof m=="string"||m instanceof URL){t[O]=m.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":g=m;continue;case"worker":C=m;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&m instanceof Buffer)t[O]=new Uint8Array(m);else{if(m instanceof Uint8Array)break;if(typeof m=="string")t[O]=(0,_util.stringToBytes)(m);else if(typeof m=="object"&&m!==null&&!isNaN(m.length))t[O]=new Uint8Array(m);else if((0,_util.isArrayBuffer)(m))t[O]=new Uint8Array(m);else throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.")}continue}t[O]=m}if(t.rangeChunkSize=t.rangeChunkSize||DEFAULT_RANGE_CHUNK_SIZE,t.CMapReaderFactory=t.CMapReaderFactory||DefaultCMapReaderFactory,t.StandardFontDataFactory=t.StandardFontDataFactory||DefaultStandardFontDataFactory,t.ignoreErrors=t.stopAtErrors!==!0,t.fontExtraProperties=t.fontExtraProperties===!0,t.pdfBug=t.pdfBug===!0,t.enableXfa=t.enableXfa===!0,(typeof t.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(t.docBaseUrl))&&(t.docBaseUrl=null),Number.isInteger(t.maxImageSize)||(t.maxImageSize=-1),typeof t.useWorkerFetch!="boolean"&&(t.useWorkerFetch=t.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&t.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof t.isEvalSupported!="boolean"&&(t.isEvalSupported=!0),typeof t.disableFontFace!="boolean"&&(t.disableFontFace=_is_node.isNodeJS),typeof t.useSystemFonts!="boolean"&&(t.useSystemFonts=!_is_node.isNodeJS&&!t.disableFontFace),typeof t.ownerDocument>"u"&&(t.ownerDocument=globalThis.document),typeof t.disableRange!="boolean"&&(t.disableRange=!1),typeof t.disableStream!="boolean"&&(t.disableStream=!1),typeof t.disableAutoFetch!="boolean"&&(t.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(t.verbosity),!C){const O={verbosity:t.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};C=O.port?PDFWorker.fromPort(O):new PDFWorker(O),n._worker=C}const R=n.docId;return C.promise.then(function(){if(n.destroyed)throw new Error("Loading aborted");const O=_fetchDocument(C,t,g,R),m=new Promise(function(d){let f;g?f=new _transport_stream.PDFDataTransportStream({length:t.length,initialData:t.initialData,progressiveDone:t.progressiveDone,contentDispositionFilename:t.contentDispositionFilename,disableRange:t.disableRange,disableStream:t.disableStream},g):t.data||(f=createPDFNetworkStream({url:t.url,length:t.length,httpHeaders:t.httpHeaders,withCredentials:t.withCredentials,rangeChunkSize:t.rangeChunkSize,disableRange:t.disableRange,disableStream:t.disableStream})),d(f)});return Promise.all([O,m]).then(function([d,f]){if(n.destroyed)throw new Error("Loading aborted");const E=new _message_handler.MessageHandler(R,d,C.port);E.postMessageTransfers=C.postMessageTransfers;const D=new WorkerTransport(E,n,f,t);n._transport=D,E.send("Ready",null)})}).catch(n._capability.reject),n}function _fetchDocument(V,n,_,t){return V.destroyed?Promise.reject(new Error("Worker was destroyed")):(_&&(n.length=_.length,n.initialData=_.initialData,n.progressiveDone=_.progressiveDone,n.contentDispositionFilename=_.contentDispositionFilename),V.messageHandler.sendWithPromise("GetDocRequest",{docId:t,apiVersion:"2.10.377",source:{data:n.data,url:n.url,password:n.password,disableAutoFetch:n.disableAutoFetch,rangeChunkSize:n.rangeChunkSize,length:n.length},maxImageSize:n.maxImageSize,disableFontFace:n.disableFontFace,postMessageTransfers:V.postMessageTransfers,docBaseUrl:n.docBaseUrl,ignoreErrors:n.ignoreErrors,isEvalSupported:n.isEvalSupported,fontExtraProperties:n.fontExtraProperties,enableXfa:n.enableXfa,useSystemFonts:n.useSystemFonts,cMapUrl:n.useWorkerFetch?n.cMapUrl:null,standardFontDataUrl:n.useWorkerFetch?n.standardFontDataUrl:null}).then(function(g){if(V.destroyed)throw new Error("Worker was destroyed");return g}))}const PDFDocumentLoadingTask=function(){let n=0;class _{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d"+n++,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}destroy(){return this.destroyed=!0,(this._transport?this._transport.destroy():Promise.resolve()).then(()=>{this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)})}}return _}();class PDFDataRangeTransport{constructor(n,_,t=!1,g=null){this.length=n,this.initialData=_,this.progressiveDone=t,this.contentDispositionFilename=g,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(n){this._rangeListeners.push(n)}addProgressListener(n){this._progressListeners.push(n)}addProgressiveReadListener(n){this._progressiveReadListeners.push(n)}addProgressiveDoneListener(n){this._progressiveDoneListeners.push(n)}onDataRange(n,_){for(const t of this._rangeListeners)t(n,_)}onDataProgress(n,_){this._readyCapability.promise.then(()=>{for(const t of this._progressListeners)t(n,_)})}onDataProgressiveRead(n){this._readyCapability.promise.then(()=>{for(const _ of this._progressiveReadListeners)_(n)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const n of this._progressiveDoneListeners)n()})}transportReady(){this._readyCapability.resolve()}requestDataRange(n,_){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(n,_){this._pdfInfo=n,this._transport=_,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(n){return this._transport.getPage(n)}getPageIndex(n){return this._transport.getPageIndex(n)}getDestinations(){return this._transport.getDestinations()}getDestination(n){return this._transport.getDestination(n)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}getStats(){return this._transport.getStats()}cleanup(n=!1){return this._transport.startCleanup(n||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(n,_,t,g,C=!1){this._pageIndex=n,this._pageInfo=_,this._ownerDocument=g,this._transport=t,this._stats=C?new _display_utils.StatTimer:null,this._pdfBug=C,this.commonObjs=t.commonObjs,this.objs=new PDFObjects,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:n,rotation:_=this.rotate,offsetX:t=0,offsetY:g=0,dontFlip:C=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:n,rotation:_,offsetX:t,offsetY:g,dontFlip:C})}getAnnotations({intent:n=null}={}){const _=n==="display"||n==="print"?n:null;return(!this._annotationsPromise||this._annotationsIntent!==_)&&(this._annotationsPromise=this._transport.getAnnotations(this._pageIndex,_),this._annotationsIntent=_),this._annotationsPromise}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var n;return((n=this._transport._htmlForXfa)==null?void 0:n.children[this._pageIndex])||null}render({canvasContext:n,viewport:_,intent:t="display",renderInteractiveForms:g=!1,transform:C=null,imageLayer:R=null,canvasFactory:O=null,background:m=null,includeAnnotationStorage:d=!1,optionalContentConfigPromise:f=null}){var E;this._stats&&this._stats.time("Overall");const D=t==="print"?"print":"display";this.pendingCleanup=!1,f||(f=this._transport.getOptionalContentConfig());let P=this._intentStates.get(D);P||(P=Object.create(null),this._intentStates.set(D,P)),P.streamReaderCancelTimeout&&(clearTimeout(P.streamReaderCancelTimeout),P.streamReaderCancelTimeout=null);const q=O||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),u=d?this._transport.annotationStorage.serializable:null;P.displayReadyCapability||(P.displayReadyCapability=(0,_util.createPromiseCapability)(),P.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList({pageIndex:this._pageIndex,intent:D,renderInteractiveForms:g===!0,annotationStorage:u}));const S=y=>{P.renderTasks.delete(I),(this.cleanupAfterRender||D==="print")&&(this.pendingCleanup=!0),this._tryCleanup(),y?(I.capability.reject(y),this._abortOperatorList({intentState:P,reason:y})):I.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},I=new InternalRenderTask({callback:S,params:{canvasContext:n,viewport:_,transform:C,imageLayer:R,background:m},objs:this.objs,commonObjs:this.commonObjs,operatorList:P.operatorList,pageIndex:this._pageIndex,canvasFactory:q,useRequestAnimationFrame:D!=="print",pdfBug:this._pdfBug});((E=P).renderTasks||(E.renderTasks=new Set)).add(I);const T=I.task;return Promise.all([P.displayReadyCapability.promise,f]).then(([y,r])=>{if(this.pendingCleanup){S();return}this._stats&&this._stats.time("Rendering"),I.initializeGraphics({transparency:y,optionalContentConfig:r}),I.operatorListChanged()}).catch(S),T}getOperatorList({intent:n="display"}={}){function _(){g.operatorList.lastChunk&&(g.opListReadCapability.resolve(g.operatorList),g.renderTasks.delete(C))}const t=`oplist-${n==="print"?"print":"display"}`;let g=this._intentStates.get(t);g||(g=Object.create(null),this._intentStates.set(t,g));let C;if(!g.opListReadCapability){var R;C=Object.create(null),C.operatorListChanged=_,g.opListReadCapability=(0,_util.createPromiseCapability)(),((R=g).renderTasks||(R.renderTasks=new Set)).add(C),g.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList({pageIndex:this._pageIndex,intent:t})}return g.opListReadCapability.promise}streamTextContent({normalizeWhitespace:n=!1,disableCombineTextItems:_=!1,includeMarkedContent:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,normalizeWhitespace:n===!0,combineTextItems:_!==!0,includeMarkedContent:t===!0},{highWaterMark:100,size(C){return C.items.length}})}getTextContent(n={}){const _=this.streamTextContent(n);return new Promise(function(t,g){function C(){R.read().then(function({value:m,done:d}){if(d){t(O);return}Object.assign(O.styles,m.styles),O.items.push(...m.items),C()},g)}const R=_.getReader(),O={items:[],styles:Object.create(null)};C()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0,this._transport.pageCache[this._pageIndex]=null;const n=[];for(const[_,t]of this._intentStates)if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!_.startsWith("oplist-"))for(const g of t.renderTasks)n.push(g.completed),g.cancel();return this.objs.clear(),this._annotationsPromise=null,this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(n)}cleanup(n=!1){return this.pendingCleanup=!0,this._tryCleanup(n)}_tryCleanup(n=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:_,operatorList:t}of this._intentStates.values())if(_.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this._annotationsPromise=null,this._jsActionsPromise=null,this._structTreePromise=null,n&&this._stats&&(this._stats=new _display_utils.StatTimer),this.pendingCleanup=!1,!0}_startRenderPage(n,_){const t=this._intentStates.get(_);t&&(this._stats&&this._stats.timeEnd("Page Request"),t.displayReadyCapability&&t.displayReadyCapability.resolve(n))}_renderPageChunk(n,_){for(let t=0,g=n.length;t<g;t++)_.operatorList.fnArray.push(n.fnArray[t]),_.operatorList.argsArray.push(n.argsArray[t]);_.operatorList.lastChunk=n.lastChunk;for(const t of _.renderTasks)t.operatorListChanged();n.lastChunk&&this._tryCleanup()}_pumpOperatorList(n){(0,_util.assert)(n.intent,'PDFPageProxy._pumpOperatorList: Expected "intent" argument.');const t=this._transport.messageHandler.sendWithStream("GetOperatorList",n).getReader(),g=this._intentStates.get(n.intent);g.streamReader=t;const C=()=>{t.read().then(({value:R,done:O})=>{if(O){g.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(R,g),C())},R=>{if(g.streamReader=null,!this._transport.destroyed){if(g.operatorList){g.operatorList.lastChunk=!0;for(const O of g.renderTasks)O.operatorListChanged();this._tryCleanup()}if(g.displayReadyCapability)g.displayReadyCapability.reject(R);else if(g.opListReadCapability)g.opListReadCapability.reject(R);else throw R}})};C()}_abortOperatorList({intentState:n,reason:_,force:t=!1}){if((0,_util.assert)(_ instanceof Error||typeof _=="object"&&_!==null,'PDFPageProxy._abortOperatorList: Expected "reason" argument.'),!!n.streamReader){if(!t){if(n.renderTasks.size>0)return;if(_ instanceof _display_utils.RenderingCancelledException){n.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:n,reason:_,force:!0}),n.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(n.streamReader.cancel(new _util.AbortException(_==null?void 0:_.message)),n.streamReader=null,!this._transport.destroyed){for(const[g,C]of this._intentStates)if(C===n){this._intentStates.delete(g);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve(void 0)}postMessage(n,_){function t(R){var d;if(typeof R=="function"||typeof R=="symbol"||R instanceof URL)throw new Error(`LoopbackPort.postMessage - cannot clone: ${R==null?void 0:R.toString()}`);if(typeof R!="object"||R===null)return R;if(g.has(R))return g.get(R);let O,m;if((O=R.buffer)&&(0,_util.isArrayBuffer)(O))return _!=null&&_.includes(O)?m=new R.constructor(O,R.byteOffset,R.byteLength):m=new R.constructor(R),g.set(R,m),m;if(R instanceof Map){m=new Map,g.set(R,m);for(const[f,E]of R)m.set(f,t(E));return m}if(R instanceof Set){m=new Set,g.set(R,m);for(const f of R)m.add(t(f));return m}m=Array.isArray(R)?[]:Object.create(null),g.set(R,m);for(const f in R){let E,D=R;for(;!(E=Object.getOwnPropertyDescriptor(D,f));)D=Object.getPrototypeOf(D);typeof E.value>"u"||typeof E.value=="function"&&!((d=R.hasOwnProperty)!=null&&d.call(R,f))||(m[f]=t(E.value))}return m}const g=new WeakMap,C={data:t(n)};this._deferred.then(()=>{for(const R of this._listeners)R.call(this,C)})}addEventListener(n,_){this._listeners.push(_)}removeEventListener(n,_){const t=this._listeners.indexOf(_);this._listeners.splice(t,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorker=function PDFWorkerClosure(){var V;const pdfWorkerPorts=new WeakMap;let isWorkerDisabled=!1,fallbackWorkerSrc,nextFakeWorkerId=0,fakeWorkerCapability;if(_is_node.isNodeJS&&typeof commonjsRequire=="function")isWorkerDisabled=!0,fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"&&"currentScript"in document){const n=(V=document.currentScript)==null?void 0:V.src;n&&(fallbackWorkerSrc=n.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}function getWorkerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(typeof fallbackWorkerSrc<"u")return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}function getMainThreadWorkerMessageHandler(){var _;let n;try{n=(_=globalThis.pdfjsWorker)==null?void 0:_.WorkerMessageHandler}catch{}return n||null}function setupFakeWorkerGlobal(){if(fakeWorkerCapability)return fakeWorkerCapability.promise;fakeWorkerCapability=(0,_util.createPromiseCapability)();const loader=async function(){const mainWorkerMessageHandler=getMainThreadWorkerMessageHandler();if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(getWorkerSrc());return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(getWorkerSrc()),window.pdfjsWorker.WorkerMessageHandler};return loader().then(fakeWorkerCapability.resolve,fakeWorkerCapability.reject),fakeWorkerCapability.promise}function createCDNWrapper(n){const _="importScripts('"+n+"');";return URL.createObjectURL(new Blob([_]))}class PDFWorker{constructor({name:_=null,port:t=null,verbosity:g=(0,_util.getVerbosityLevel)()}={}){if(t&&pdfWorkerPorts.has(t))throw new Error("Cannot use more than one PDFWorker per port");if(this.name=_,this.destroyed=!1,this.postMessageTransfers=!0,this.verbosity=g,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,t){pdfWorkerPorts.set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(_){this._port=_,this._messageHandler=new _message_handler.MessageHandler("main","worker",_),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(typeof Worker<"u"&&!isWorkerDisabled&&!getMainThreadWorkerMessageHandler()){let _=getWorkerSrc();try{(0,_util.isSameOrigin)(window.location.href,_)||(_=createCDNWrapper(new URL(_,window.location).href));const t=new Worker(_),g=new _message_handler.MessageHandler("main","worker",t),C=()=>{t.removeEventListener("error",R),g.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},R=()=>{this._webWorker||C()};t.addEventListener("error",R),g.on("test",m=>{if(t.removeEventListener("error",R),this.destroyed){C();return}m?(this._messageHandler=g,this._port=t,this._webWorker=t,m.supportTransfers||(this.postMessageTransfers=!1),this._readyCapability.resolve(),g.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),g.destroy(),t.terminate())}),g.on("ready",m=>{if(t.removeEventListener("error",R),this.destroyed){C();return}try{O()}catch{this._setupFakeWorker()}});const O=()=>{const m=new Uint8Array([this.postMessageTransfers?255:0]);try{g.send("test",m,[m.buffer])}catch{(0,_util.warn)("Cannot use postMessage transfers."),m[0]=0,g.send("test",m)}};O();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),isWorkerDisabled=!0),setupFakeWorkerGlobal().then(_=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new LoopbackPort;this._port=t;const g="fake"+nextFakeWorkerId++,C=new _message_handler.MessageHandler(g+"_worker",g,t);_.setup(C,t);const R=new _message_handler.MessageHandler(g,g+"_worker",t);this._messageHandler=R,this._readyCapability.resolve(),R.send("configure",{verbosity:this.verbosity})}).catch(_=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${_.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),pdfWorkerPorts.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(_){if(!_||!_.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return pdfWorkerPorts.has(_.port)?pdfWorkerPorts.get(_.port):new PDFWorker(_)}static getWorkerSrc(){return getWorkerSrc()}}return PDFWorker}();exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(n,_,t,g){this.messageHandler=n,this.loadingTask=_,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:_.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:g.ownerDocument,styleElement:g.styleElement}),this._params=g,g.useWorkerFetch||(this.CMapReaderFactory=new g.CMapReaderFactory({baseUrl:g.cMapUrl,isCompressed:g.cMapPacked}),this.StandardFontDataFactory=new g.StandardFontDataFactory({baseUrl:g.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=t,this._fullReader=null,this._lastProgress=null,this.pageCache=[],this.pagePromises=[],this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const n=[];for(const t of this.pageCache)t&&n.push(t._destroy());this.pageCache.length=0,this.pagePromises.length=0,this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const _=this.messageHandler.sendWithPromise("Terminate",null);return n.push(_),Promise.all(n).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:n,loadingTask:_}=this;n.on("GetReader",(t,g)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=C=>{this._lastProgress={loaded:C.loaded,total:C.total}},g.onPull=()=>{this._fullReader.read().then(function({value:C,done:R}){if(R){g.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(C),"GetReader - expected an ArrayBuffer."),g.enqueue(new Uint8Array(C),1,[C])}).catch(C=>{g.error(C)})},g.onCancel=C=>{this._fullReader.cancel(C),g.ready.catch(R=>{if(!this.destroyed)throw R})}}),n.on("ReaderHeadersReady",t=>{const g=(0,_util.createPromiseCapability)(),C=this._fullReader;return C.headersReady.then(()=>{(!C.isStreamingSupported||!C.isRangeSupported)&&(this._lastProgress&&_.onProgress&&_.onProgress(this._lastProgress),C.onProgress=R=>{_.onProgress&&_.onProgress({loaded:R.loaded,total:R.total})}),g.resolve({isStreamingSupported:C.isStreamingSupported,isRangeSupported:C.isRangeSupported,contentLength:C.contentLength})},g.reject),g.promise}),n.on("GetRangeReader",(t,g)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const C=this._networkStream.getRangeReader(t.begin,t.end);if(!C){g.close();return}g.onPull=()=>{C.read().then(function({value:R,done:O}){if(O){g.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(R),"GetRangeReader - expected an ArrayBuffer."),g.enqueue(new Uint8Array(R),1,[R])}).catch(R=>{g.error(R)})},g.onCancel=R=>{C.cancel(R),g.ready.catch(O=>{if(!this.destroyed)throw O})}}),n.on("GetDoc",({pdfInfo:t})=>{this._numPages=t.numPages,this._htmlForXfa=t.htmlForXfa,delete t.htmlForXfa,_._capability.resolve(new PDFDocumentProxy(t,this))}),n.on("DocException",function(t){let g;switch(t.name){case"PasswordException":g=new _util.PasswordException(t.message,t.code);break;case"InvalidPDFException":g=new _util.InvalidPDFException(t.message);break;case"MissingPDFException":g=new _util.MissingPDFException(t.message);break;case"UnexpectedResponseException":g=new _util.UnexpectedResponseException(t.message,t.status);break;case"UnknownErrorException":g=new _util.UnknownErrorException(t.message,t.details);break}g instanceof Error||(0,_util.warn)("DocException - expected a valid Error."),_._capability.reject(g)}),n.on("PasswordRequest",t=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),_.onPassword){const g=C=>{this._passwordCapability.resolve({password:C})};try{_.onPassword(g,t.code)}catch(C){this._passwordCapability.reject(C)}}else this._passwordCapability.reject(new _util.PasswordException(t.message,t.code));return this._passwordCapability.promise}),n.on("DataLoaded",t=>{_.onProgress&&_.onProgress({loaded:t.length,total:t.length}),this.downloadInfoCapability.resolve(t)}),n.on("StartRenderPage",t=>{if(this.destroyed)return;this.pageCache[t.pageIndex]._startRenderPage(t.transparency,t.intent)}),n.on("commonobj",t=>{var O;if(this.destroyed)return;const[g,C,R]=t;if(!this.commonObjs.has(g))switch(C){case"Font":const m=this._params;if("error"in R){const E=R.error;(0,_util.warn)(`Error during font loading: ${E}`),this.commonObjs.resolve(g,E);break}let d=null;m.pdfBug&&((O=globalThis.FontInspector)!=null&&O.enabled)&&(d={registerFont(E,D){globalThis.FontInspector.fontAdded(E,D)}});const f=new _font_loader.FontFaceObject(R,{isEvalSupported:m.isEvalSupported,disableFontFace:m.disableFontFace,ignoreErrors:m.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:d});this.fontLoader.bind(f).catch(E=>n.sendWithPromise("FontFallback",{id:g})).finally(()=>{!m.fontExtraProperties&&f.data&&(f.data=null),this.commonObjs.resolve(g,f)});break;case"FontPath":case"Image":this.commonObjs.resolve(g,R);break;default:throw new Error(`Got unknown common object type ${C}`)}}),n.on("obj",t=>{var d;if(this.destroyed)return;const[g,C,R,O]=t,m=this.pageCache[C];if(!m.objs.has(g))switch(R){case"Image":m.objs.resolve(g,O),((d=O==null?void 0:O.data)==null?void 0:d.length)>8e6&&(m.cleanupAfterRender=!0);break;case"Pattern":m.objs.resolve(g,O);break;default:throw new Error(`Got unknown object type ${R}`)}}),n.on("DocProgress",t=>{this.destroyed||_.onProgress&&_.onProgress({loaded:t.loaded,total:t.total})}),n.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),n.on("FetchBuiltInCMap",t=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(t):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),n.on("FetchStandardFontData",t=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(t):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:n}){this.destroyed||this.loadingTask.onUnsupportedFeature&&this.loadingTask.onUnsupportedFeature(n)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(n){if(!Number.isInteger(n)||n<=0||n>this._numPages)return Promise.reject(new Error("Invalid page request"));const _=n-1;if(_ in this.pagePromises)return this.pagePromises[_];const t=this.messageHandler.sendWithPromise("GetPage",{pageIndex:_}).then(g=>{if(this.destroyed)throw new Error("Transport destroyed");const C=new PDFPageProxy(_,g,this,this._params.ownerDocument,this._params.pdfBug);return this.pageCache[_]=C,C});return this.pagePromises[_]=t,t}getPageIndex(n){return this.messageHandler.sendWithPromise("GetPageIndex",{ref:n}).catch(function(_){return Promise.reject(new Error(_))})}getAnnotations(n,_){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:n,intent:_})}saveDocument(){var n;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:((n=this._fullReader)==null?void 0:n.filename)??null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this.messageHandler.sendWithPromise("GetFieldObjects",null)}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(n){return typeof n!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:n})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(n){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:n})}getStructTree(n){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:n})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(n=>new _optional_content_config.OptionalContentConfig(n))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return this.messageHandler.sendWithPromise("GetMetadata",null).then(n=>{var _,t;return{info:n[0],metadata:n[1]?new _metadata.Metadata(n[1]):null,contentDispositionFilename:((_=this._fullReader)==null?void 0:_.filename)??null,contentLength:((t=this._fullReader)==null?void 0:t.contentLength)??null}})}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}getStats(){return this.messageHandler.sendWithPromise("GetStats",null)}async startCleanup(n=!1){if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(let _=0,t=this.pageCache.length;_<t;_++){const g=this.pageCache[_];if(!g)continue;if(!g.cleanup())throw new Error(`startCleanup: Page ${_+1} is currently rendering.`)}this.commonObjs.clear(),n||this.fontLoader.clear(),this._hasJSActionsPromise=null}}get loadingParams(){const n=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:n.disableAutoFetch})}}class PDFObjects{constructor(){this._objs=Object.create(null)}_ensureObj(n){return this._objs[n]?this._objs[n]:this._objs[n]={capability:(0,_util.createPromiseCapability)(),data:null,resolved:!1}}get(n,_=null){if(_)return this._ensureObj(n).capability.promise.then(_),null;const t=this._objs[n];if(!t||!t.resolved)throw new Error(`Requesting object that isn't resolved yet ${n}.`);return t.data}has(n){const _=this._objs[n];return(_==null?void 0:_.resolved)||!1}resolve(n,_){const t=this._ensureObj(n);t.resolved=!0,t.data=_,t.capability.resolve(_)}clear(){this._objs=Object.create(null)}}class RenderTask{constructor(n){this._internalRenderTask=n,this.onContinue=null}get promise(){return this._internalRenderTask.capability.promise}cancel(){this._internalRenderTask.cancel()}}const InternalRenderTask=function V(){const n=new WeakSet;class _{constructor({callback:g,params:C,objs:R,commonObjs:O,operatorList:m,pageIndex:d,canvasFactory:f,useRequestAnimationFrame:E=!1,pdfBug:D=!1}){this.callback=g,this.params=C,this.objs=R,this.commonObjs=O,this.operatorListIdx=null,this.operatorList=m,this._pageIndex=d,this.canvasFactory=f,this._pdfBug=D,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=E===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=C.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:g=!1,optionalContentConfig:C}){var E;if(this.cancelled)return;if(this._canvas){if(n.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");n.add(this._canvas)}this._pdfBug&&((E=globalThis.StepperManager)!=null&&E.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:R,viewport:O,transform:m,imageLayer:d,background:f}=this.params;this.gfx=new _canvas.CanvasGraphics(R,this.commonObjs,this.objs,this.canvasFactory,d,C),this.gfx.beginDrawing({transform:m,viewport:O,transparency:g,background:f}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(g=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&n.delete(this._canvas),this.callback(g||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&n.delete(this._canvas),this.callback())))}}return _}(),version="2.10.377";exports.version=version;const build="156762c48";exports.build=build},(V,n,_)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.FontLoader=n.FontFaceObject=void 0;var t=_(2);class g{constructor({docId:m,onUnsupportedFeature:d,ownerDocument:f=globalThis.document,styleElement:E=null}){this.constructor===g&&(0,t.unreachable)("Cannot initialize BaseFontLoader."),this.docId=m,this._onUnsupportedFeature=d,this._document=f,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(m){this.nativeFontFaces.push(m),this._document.fonts.add(m)}insertRule(m){let d=this.styleElement;d||(d=this.styleElement=this._document.createElement("style"),d.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].appendChild(d));const f=d.sheet;f.insertRule(m,f.cssRules.length)}clear(){for(const m of this.nativeFontFaces)this._document.fonts.delete(m);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(m){if(m.attached||m.missingFile)return;if(m.attached=!0,this.isFontLoadingAPISupported){const f=m.createNativeFontFace();if(f){this.addNativeFontFace(f);try{await f.loaded}catch(E){throw this._onUnsupportedFeature({featureId:t.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,t.warn)(`Failed to load font '${f.family}': '${E}'.`),m.disableFontFace=!0,E}}return}const d=m.createFontFaceRule();if(d){if(this.insertRule(d),this.isSyncFontLoadingSupported)return;await new Promise(f=>{const E=this._queueLoadingCallback(f);this._prepareFontLoadEvent([d],[m],E)})}}_queueLoadingCallback(m){(0,t.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var d;const m=!!((d=this._document)!=null&&d.fonts);return(0,t.shadow)(this,"isFontLoadingAPISupported",m)}get isSyncFontLoadingSupported(){(0,t.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,t.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(m,d,f){(0,t.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let C;n.FontLoader=C,n.FontLoader=C=class extends g{constructor(m){super(m),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let m=!1;if(typeof navigator>"u")m=!0;else{const d=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(d==null?void 0:d[1])>=14&&(m=!0)}return(0,t.shadow)(this,"isSyncFontLoadingSupported",m)}_queueLoadingCallback(m){function d(){for((0,t.assert)(!E.done,"completeRequest() cannot be called twice."),E.done=!0;f.requests.length>0&&f.requests[0].done;){const D=f.requests.shift();setTimeout(D.callback,0)}}const f=this.loadingContext,E={id:`pdfjs-font-loading-${f.nextRequestId++}`,done:!1,complete:d,callback:m};return f.requests.push(E),E}get _loadTestFont(){const m=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,t.shadow)(this,"_loadTestFont",m())}_prepareFontLoadEvent(m,d,f){function E(v,L){return v.charCodeAt(L)<<24|v.charCodeAt(L+1)<<16|v.charCodeAt(L+2)<<8|v.charCodeAt(L+3)&255}function D(v,L,j,$){const F=v.substring(0,L),o=v.substring(L+j);return F+$+o}let P,q;const u=this._document.createElement("canvas");u.width=1,u.height=1;const S=u.getContext("2d");let I=0;function T(v,L){if(I++,I>30){(0,t.warn)("Load test font never loaded."),L();return}if(S.font="30px "+v,S.fillText(".",0,20),S.getImageData(0,0,1,1).data[3]>0){L();return}setTimeout(T.bind(null,v,L))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let r=this._loadTestFont;r=D(r,976,y.length,y);const c=16,A=1482184792;let p=E(r,c);for(P=0,q=y.length-3;P<q;P+=4)p=p-A+E(y,P)|0;P<y.length&&(p=p-A+E(y+"XXX",P)|0),r=D(r,c,4,(0,t.string32)(p));const M=`url(data:font/opentype;base64,${btoa(r)});`,k=`@font-face {font-family:"${y}";src:${M}}`;this.insertRule(k);const X=[];for(const v of d)X.push(v.loadedName);X.push(y);const N=this._document.createElement("div");N.style.visibility="hidden",N.style.width=N.style.height="10px",N.style.position="absolute",N.style.top=N.style.left="0px";for(const v of X){const L=this._document.createElement("span");L.textContent="Hi",L.style.fontFamily=v,N.appendChild(L)}this._document.body.appendChild(N),T(y,()=>{this._document.body.removeChild(N),f.complete()})}};class R{constructor(m,{isEvalSupported:d=!0,disableFontFace:f=!1,ignoreErrors:E=!1,onUnsupportedFeature:D,fontRegistry:P=null}){this.compiledGlyphs=Object.create(null);for(const q in m)this[q]=m[q];this.isEvalSupported=d!==!1,this.disableFontFace=f===!0,this.ignoreErrors=E===!0,this._onUnsupportedFeature=D,this.fontRegistry=P}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let m;if(!this.cssFontInfo)m=new FontFace(this.loadedName,this.data,{});else{const d={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(d.style=`oblique ${this.cssFontInfo.italicAngle}deg`),m=new FontFace(this.cssFontInfo.fontFamily,this.data,d)}return this.fontRegistry&&this.fontRegistry.registerFont(this),m}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const m=(0,t.bytesToString)(this.data),d=`url(data:${this.mimetype};base64,${btoa(m)});`;let f;if(!this.cssFontInfo)f=`@font-face {font-family:"${this.loadedName}";src:${d}}`;else{let E=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(E+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),f=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${E}src:${d}}`}return this.fontRegistry&&this.fontRegistry.registerFont(this,d),f}getPathGenerator(m,d){if(this.compiledGlyphs[d]!==void 0)return this.compiledGlyphs[d];let f;try{f=m.get(this.loadedName+"_path_"+d)}catch(E){if(!this.ignoreErrors)throw E;return this._onUnsupportedFeature({featureId:t.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,t.warn)(`getPathGenerator - ignoring character: "${E}".`),this.compiledGlyphs[d]=function(D,P){}}if(this.isEvalSupported&&t.IsEvalSupportedCached.value){const E=[];for(const D of f){const P=D.args!==void 0?D.args.join(","):"";E.push("c.",D.cmd,"(",P,`);
`)}return this.compiledGlyphs[d]=new Function("c","size",E.join(""))}return this.compiledGlyphs[d]=function(E,D){for(const P of f)P.cmd==="scale"&&(P.args=[D,-D]),E[P.cmd].apply(E,P.args)}}}n.FontFaceObject=R},(V,n,_)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.NodeStandardFontDataFactory=n.NodeCMapReaderFactory=n.NodeCanvasFactory=void 0;var t=_(5),g=_(4),C=_(2);let R=class{constructor(){(0,C.unreachable)("Not implemented: NodeCanvasFactory")}};n.NodeCanvasFactory=R;let O=class{constructor(){(0,C.unreachable)("Not implemented: NodeCMapReaderFactory")}};n.NodeCMapReaderFactory=O;let m=class{constructor(){(0,C.unreachable)("Not implemented: NodeStandardFontDataFactory")}};if(n.NodeStandardFontDataFactory=m,g.isNodeJS){const d=function(f){return new Promise((E,D)=>{require$$5.readFile(f,(q,u)=>{if(q||!u){D(new Error(q));return}E(new Uint8Array(u))})})};n.NodeCanvasFactory=R=class extends t.BaseCanvasFactory{_createCanvas(f,E){return require$$5.createCanvas(f,E)}},n.NodeCMapReaderFactory=O=class extends t.BaseCMapReaderFactory{_fetchData(f,E){return d(f).then(D=>({cMapData:D,compressionType:E}))}},n.NodeStandardFontDataFactory=m=class extends t.BaseStandardFontDataFactory{_fetchData(f){return d(f)}}}},(V,n,_)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.AnnotationStorage=void 0;var t=_(2);class g{constructor(){this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null}getValue(R,O){const m=this._storage.get(R);return m!==void 0?m:O}setValue(R,O){const m=this._storage.get(R);let d=!1;if(m!==void 0)for(const[f,E]of Object.entries(O))m[f]!==E&&(d=!0,m[f]=E);else this._storage.set(R,O),d=!0;d&&this._setModified()}getAll(){return this._storage.size>0?(0,t.objectFromMap)(this._storage):null}get size(){return this._storage.size}_setModified(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get serializable(){return this._storage.size>0?this._storage:null}}n.AnnotationStorage=g},(V,n,_)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CanvasGraphics=void 0;var t=_(2),g=_(11);const C=16,R=100,O=4096,m=1e3,d=16,f=1.000001;function E(S){if(!S.mozCurrentTransform){S._originalSave=S.save,S._originalRestore=S.restore,S._originalRotate=S.rotate,S._originalScale=S.scale,S._originalTranslate=S.translate,S._originalTransform=S.transform,S._originalSetTransform=S.setTransform,S._originalResetTransform=S.resetTransform,S._transformMatrix=S._transformMatrix||[1,0,0,1,0,0],S._transformStack=[];try{const I=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(S),"lineWidth");S._setLineWidth=I.set,S._getLineWidth=I.get,Object.defineProperty(S,"lineWidth",{set:function(y){this._setLineWidth(y*f)},get:function(){return this._getLineWidth()}})}catch{}Object.defineProperty(S,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(S,"mozCurrentTransformInverse",{get:function(){const[T,y,r,s,c,A]=this._transformMatrix,p=T*s-y*r,M=y*r-T*s;return[s/p,y/M,r/M,T/p,(s*c-r*A)/M,(y*c-T*A)/p]}}),S.save=function(){const T=this._transformMatrix;this._transformStack.push(T),this._transformMatrix=T.slice(0,6),this._originalSave()},S.restore=function(){const T=this._transformStack.pop();T&&(this._transformMatrix=T,this._originalRestore())},S.translate=function(T,y){const r=this._transformMatrix;r[4]=r[0]*T+r[2]*y+r[4],r[5]=r[1]*T+r[3]*y+r[5],this._originalTranslate(T,y)},S.scale=function(T,y){const r=this._transformMatrix;r[0]*=T,r[1]*=T,r[2]*=y,r[3]*=y,this._originalScale(T,y)},S.transform=function(T,y,r,s,c,A){const p=this._transformMatrix;this._transformMatrix=[p[0]*T+p[2]*y,p[1]*T+p[3]*y,p[0]*r+p[2]*s,p[1]*r+p[3]*s,p[0]*c+p[2]*A+p[4],p[1]*c+p[3]*A+p[5]],S._originalTransform(T,y,r,s,c,A)},S.setTransform=function(T,y,r,s,c,A){this._transformMatrix=[T,y,r,s,c,A],S._originalSetTransform(T,y,r,s,c,A)},S.resetTransform=function(){this._transformMatrix=[1,0,0,1,0,0],S._originalResetTransform()},S.rotate=function(T){const y=Math.cos(T),r=Math.sin(T),s=this._transformMatrix;this._transformMatrix=[s[0]*y+s[2]*r,s[1]*y+s[3]*r,s[0]*-r+s[2]*y,s[1]*-r+s[3]*y,s[4],s[5]],this._originalRotate(T)}}}class D{constructor(I){this.canvasFactory=I,this.cache=Object.create(null)}getCanvas(I,T,y,r){let s;return this.cache[I]!==void 0?(s=this.cache[I],this.canvasFactory.reset(s,T,y),s.context.setTransform(1,0,0,1,0,0)):(s=this.canvasFactory.create(T,y),this.cache[I]=s),r&&E(s.context),s}clear(){for(const I in this.cache){const T=this.cache[I];this.canvasFactory.destroy(T),delete this.cache[I]}}}function P(S){const T=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),y=S.width,r=S.height,s=y+1;let c,A,p,M;const k=new Uint8Array(s*(r+1)),X=y+7&-8,N=S.data,v=new Uint8Array(X*r);let L=0;for(c=0,A=N.length;c<A;c++){const e=N[c];let i=128;for(;i>0;)v[L++]=e&i?0:255,i>>=1}let j=0;for(L=0,v[L]!==0&&(k[0]=1,++j),p=1;p<y;p++)v[L]!==v[L+1]&&(k[p]=v[L]?2:1,++j),L++;for(v[L]!==0&&(k[p]=2,++j),c=1;c<r;c++){L=c*X,M=c*s,v[L-X]!==v[L]&&(k[M]=v[L]?1:8,++j);let e=(v[L]?4:0)+(v[L-X]?8:0);for(p=1;p<y;p++)e=(e>>2)+(v[L+1]?4:0)+(v[L-X+1]?8:0),T[e]&&(k[M+p]=T[e],++j),L++;if(v[L-X]!==v[L]&&(k[M+p]=v[L]?2:4,++j),j>1e3)return null}for(L=X*(r-1),M=c*s,v[L]!==0&&(k[M]=8,++j),p=1;p<y;p++)v[L]!==v[L+1]&&(k[M+p]=v[L]?4:8,++j),L++;if(v[L]!==0&&(k[M+p]=4,++j),j>1e3)return null;const $=new Int32Array([0,s,-1,0,-s,0,0,0,1]),F=[];for(c=0;j&&c<=r;c++){let e=c*s;const i=e+y;for(;e<i&&!k[e];)e++;if(e===i)continue;const a=[e%s,c],h=e;let l=k[e];do{const b=$[l];do e+=b;while(!k[e]);const w=k[e];w!==5&&w!==10?(l=w,k[e]=0):(l=w&51*l>>4,k[e]&=l>>2|l<<2),a.push(e%s,e/s|0),k[e]||--j}while(h!==e);F.push(a),--c}return function(e){e.save(),e.scale(1/y,-1/r),e.translate(0,-r),e.beginPath();for(let i=0,a=F.length;i<a;i++){const h=F[i];e.moveTo(h[0],h[1]);for(let l=2,b=h.length;l<b;l+=2)e.lineTo(h[l],h[l+1])}e.fill(),e.beginPath(),e.restore()}}class q{constructor(){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=t.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=t.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=t.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.resumeSMaskCtx=null,this.transferMaps=null}clone(){return Object.create(this)}setCurrentPoint(I,T){this.x=I,this.y=T}}const u=function(){function y(F,o,e=null){if(typeof ImageData<"u"&&o instanceof ImageData){F.putImageData(o,0,0);return}const i=o.height,a=o.width,h=i%d,l=(i-h)/d,b=h===0?l:l+1,w=F.createImageData(a,d);let U=0,G;const B=o.data,Y=w.data;let J,Q,te,oe,ie,de,ae,ue;if(e)switch(e.length){case 1:ie=e[0],de=e[0],ae=e[0],ue=e[0];break;case 4:ie=e[0],de=e[1],ae=e[2],ue=e[3];break}if(o.kind===t.ImageKind.GRAYSCALE_1BPP){const ye=B.byteLength,ne=new Uint32Array(Y.buffer,0,Y.byteLength>>2),be=ne.length,me=a+7>>3;let Se=4294967295,Ae=t.IsLittleEndianCached.value?4278190080:255;for(ue&&ue[0]===255&&ue[255]===0&&([Se,Ae]=[Ae,Se]),J=0;J<b;J++){for(te=J<l?d:h,G=0,Q=0;Q<te;Q++){const we=ye-U;let xe=0;const Re=we>me?a:we*8-7,Ee=Re&-8;let ke=0,ge=0;for(;xe<Ee;xe+=8)ge=B[U++],ne[G++]=ge&128?Se:Ae,ne[G++]=ge&64?Se:Ae,ne[G++]=ge&32?Se:Ae,ne[G++]=ge&16?Se:Ae,ne[G++]=ge&8?Se:Ae,ne[G++]=ge&4?Se:Ae,ne[G++]=ge&2?Se:Ae,ne[G++]=ge&1?Se:Ae;for(;xe<Re;xe++)ke===0&&(ge=B[U++],ke=128),ne[G++]=ge&ke?Se:Ae,ke>>=1}for(;G<be;)ne[G++]=0;F.putImageData(w,0,J*d)}}else if(o.kind===t.ImageKind.RGBA_32BPP){const ye=!!(ie||de||ae);for(Q=0,oe=a*d*4,J=0;J<l;J++){if(Y.set(B.subarray(U,U+oe)),U+=oe,ye)for(let ne=0;ne<oe;ne+=4)ie&&(Y[ne+0]=ie[Y[ne+0]]),de&&(Y[ne+1]=de[Y[ne+1]]),ae&&(Y[ne+2]=ae[Y[ne+2]]);F.putImageData(w,0,Q),Q+=d}if(J<b){if(oe=a*h*4,Y.set(B.subarray(U,U+oe)),ye)for(let ne=0;ne<oe;ne+=4)ie&&(Y[ne+0]=ie[Y[ne+0]]),de&&(Y[ne+1]=de[Y[ne+1]]),ae&&(Y[ne+2]=ae[Y[ne+2]]);F.putImageData(w,0,Q)}}else if(o.kind===t.ImageKind.RGB_24BPP){const ye=!!(ie||de||ae);for(te=d,oe=a*te,J=0;J<b;J++){for(J>=l&&(te=h,oe=a*te),G=0,Q=oe;Q--;)Y[G++]=B[U++],Y[G++]=B[U++],Y[G++]=B[U++],Y[G++]=255;if(ye)for(let ne=0;ne<G;ne+=4)ie&&(Y[ne+0]=ie[Y[ne+0]]),de&&(Y[ne+1]=de[Y[ne+1]]),ae&&(Y[ne+2]=ae[Y[ne+2]]);F.putImageData(w,0,J*d)}}else throw new Error(`bad image kind: ${o.kind}`)}function r(F,o){const e=o.height,i=o.width,a=e%d,h=(e-a)/d,l=a===0?h:h+1,b=F.createImageData(i,d);let w=0;const U=o.data,G=b.data;for(let B=0;B<l;B++){const Y=B<h?d:a;let J=3;for(let Q=0;Q<Y;Q++){let te,oe=0;for(let ie=0;ie<i;ie++)oe||(te=U[w++],oe=128),G[J]=te&oe?0:255,J+=4,oe>>=1}F.putImageData(b,0,B*d)}}function s(F,o){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let i=0,a=e.length;i<a;i++){const h=e[i];F[h]!==void 0&&(o[h]=F[h])}F.setLineDash!==void 0&&(o.setLineDash(F.getLineDash()),o.lineDashOffset=F.lineDashOffset)}function c(F){F.strokeStyle="#000000",F.fillStyle="#000000",F.fillRule="nonzero",F.globalAlpha=1,F.lineWidth=1,F.lineCap="butt",F.lineJoin="miter",F.miterLimit=10,F.globalCompositeOperation="source-over",F.font="10px sans-serif",F.setLineDash!==void 0&&(F.setLineDash([]),F.lineDashOffset=0)}function A(F,o,e,i){const a=F.length;for(let h=3;h<a;h+=4){const l=F[h];if(l===0)F[h-3]=o,F[h-2]=e,F[h-1]=i;else if(l<255){const b=255-l;F[h-3]=F[h-3]*l+o*b>>8,F[h-2]=F[h-2]*l+e*b>>8,F[h-1]=F[h-1]*l+i*b>>8}}}function p(F,o,e){const i=F.length,a=1/255;for(let h=3;h<i;h+=4){const l=e?e[F[h]]:F[h];o[h]=o[h]*l*a|0}}function M(F,o,e){const i=F.length;for(let a=3;a<i;a+=4){const h=F[a-3]*77+F[a-2]*152+F[a-1]*28;o[a]=e?o[a]*e[h>>8]>>8:o[a]*h>>16}}function k(F,o,e,i,a,h,l){const b=!!h,w=b?h[0]:0,U=b?h[1]:0,G=b?h[2]:0;let B;a==="Luminosity"?B=M:B=p;const J=Math.min(i,Math.ceil(1048576/e));for(let Q=0;Q<i;Q+=J){const te=Math.min(J,i-Q),oe=F.getImageData(0,Q,e,te),ie=o.getImageData(0,Q,e,te);b&&A(oe.data,w,U,G),B(oe.data,ie.data,l),F.putImageData(ie,0,Q)}}function X(F,o,e){const i=o.canvas,a=o.context;F.setTransform(o.scaleX,0,0,o.scaleY,o.offsetX,o.offsetY),k(a,e,i.width,i.height,o.subtype,o.backdrop,o.transferMap),F.drawImage(i,0,0)}const N=["butt","round","square"],v=["miter","round","bevel"],L={},j={};class ${constructor(o,e,i,a,h,l){this.ctx=o,this.current=new q,this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=a,this.imageLayer=h,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=l,this.cachedCanvases=new D(this.canvasFactory),this.cachedPatterns=new Map,o&&E(o),this._cachedGetSinglePixelWidth=null}beginDrawing({transform:o,viewport:e,transparency:i=!1,background:a=null}){const h=this.ctx.canvas.width,l=this.ctx.canvas.height;if(this.ctx.save(),this.ctx.fillStyle=a||"rgb(255, 255, 255)",this.ctx.fillRect(0,0,h,l),this.ctx.restore(),i){const b=this.cachedCanvases.getCanvas("transparent",h,l,!0);this.compositeCtx=this.ctx,this.transparentCanvas=b.canvas,this.ctx=b.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),c(this.ctx),o&&this.ctx.transform.apply(this.ctx,o),this.ctx.transform.apply(this.ctx,e.transform),this.baseTransform=this.ctx.mozCurrentTransform.slice(),this._combinedScaleFactor=Math.hypot(this.baseTransform[0],this.baseTransform[2]),this.imageLayer&&this.imageLayer.beginLayout()}executeOperatorList(o,e,i,a){const h=o.argsArray,l=o.fnArray;let b=e||0;const w=h.length;if(w===b)return b;const U=w-b>10&&typeof i=="function",G=U?Date.now()+15:0;let B=0;const Y=this.commonObjs,J=this.objs;let Q;for(;;){if(a!==void 0&&b===a.nextBreakPoint)return a.breakIt(b,i),b;if(Q=l[b],Q!==t.OPS.dependency)this[Q].apply(this,h[b]);else for(const te of h[b]){const oe=te.startsWith("g_")?Y:J;if(!oe.has(te))return oe.get(te,i),b}if(b++,b===w)return b;if(U&&++B>10){if(Date.now()>G)return i(),b;B=0}}}endDrawing(){for(;this.stateStack.length||this.current.activeSMask!==null;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.cachedPatterns.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(o,e){const i=o.width,a=o.height;let h=Math.max(Math.hypot(e[0],e[1]),1),l=Math.max(Math.hypot(e[2],e[3]),1),b=i,w=a,U="prescale1",G,B;for(;h>2&&b>1||l>2&&w>1;){let Y=b,J=w;h>2&&b>1&&(Y=Math.ceil(b/2),h/=b/Y),l>2&&w>1&&(J=Math.ceil(w/2),l/=w/J),G=this.cachedCanvases.getCanvas(U,Y,J),B=G.context,B.clearRect(0,0,Y,J),B.drawImage(o,0,0,b,w,0,0,Y,J),o=G.canvas,b=Y,w=J,U=U==="prescale1"?"prescale2":"prescale1"}return{img:o,paintWidth:b,paintHeight:w}}_createMaskCanvas(o){const e=this.ctx,i=o.width,a=o.height,h=this.current.fillColor,l=this.current.patternFill,b=this.cachedCanvases.getCanvas("maskCanvas",i,a),w=b.context;r(w,o);const U=e.mozCurrentTransform;let G=t.Util.transform(U,[1/i,0,0,-1/a,0,0]);G=t.Util.transform(G,[1,0,0,1,0,-a]);const B=t.Util.applyTransform([0,0],G),Y=t.Util.applyTransform([i,a],G),J=t.Util.normalizeRect([B[0],B[1],Y[0],Y[1]]),Q=Math.ceil(J[2]-J[0]),te=Math.ceil(J[3]-J[1]),oe=this.cachedCanvases.getCanvas("fillCanvas",Q,te,!0),ie=oe.context,de=Math.min(B[0],Y[0]),ae=Math.min(B[1],Y[1]);ie.translate(-de,-ae),ie.transform.apply(ie,G);const ue=this._scaleImage(b.canvas,ie.mozCurrentTransformInverse);ie.drawImage(ue.img,0,0,ue.img.width,ue.img.height,0,0,i,a),ie.globalCompositeOperation="source-in";const ye=t.Util.transform(ie.mozCurrentTransformInverse,[1,0,0,1,-de,-ae]);return ie.fillStyle=l?h.getPattern(e,this,ye,!1):h,ie.fillRect(0,0,i,a),{canvas:oe.canvas,offsetX:Math.round(de),offsetY:Math.round(ae)}}setLineWidth(o){this.current.lineWidth=o,this.ctx.lineWidth=o}setLineCap(o){this.ctx.lineCap=N[o]}setLineJoin(o){this.ctx.lineJoin=v[o]}setMiterLimit(o){this.ctx.miterLimit=o}setDash(o,e){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(o),i.lineDashOffset=e)}setRenderingIntent(o){}setFlatness(o){}setGState(o){for(let e=0,i=o.length;e<i;e++){const a=o[e],h=a[0],l=a[1];switch(h){case"LW":this.setLineWidth(l);break;case"LC":this.setLineCap(l);break;case"LJ":this.setLineJoin(l);break;case"ML":this.setMiterLimit(l);break;case"D":this.setDash(l[0],l[1]);break;case"RI":this.setRenderingIntent(l);break;case"FL":this.setFlatness(l);break;case"Font":this.setFont(l[0],l[1]);break;case"CA":this.current.strokeAlpha=a[1];break;case"ca":this.current.fillAlpha=a[1],this.ctx.globalAlpha=a[1];break;case"BM":this.ctx.globalCompositeOperation=l;break;case"SMask":this.current.activeSMask&&(this.stateStack.length>0&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask?this.suspendSMaskGroup():this.endSMaskGroup()),this.current.activeSMask=l?this.tempSMask:null,this.current.activeSMask&&this.beginSMaskGroup(),this.tempSMask=null;break;case"TR":this.current.transferMaps=l}}}beginSMaskGroup(){const o=this.current.activeSMask,e=o.canvas.width,i=o.canvas.height,a="smaskGroupAt"+this.groupLevel,h=this.cachedCanvases.getCanvas(a,e,i,!0),l=this.ctx,b=l.mozCurrentTransform;this.ctx.save();const w=h.context;w.scale(1/o.scaleX,1/o.scaleY),w.translate(-o.offsetX,-o.offsetY),w.transform.apply(w,b),o.startTransformInverse=w.mozCurrentTransformInverse,s(l,w),this.ctx=w,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(l),this.groupLevel++}suspendSMaskGroup(){const o=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),X(this.ctx,this.current.activeSMask,o),this.ctx.restore(),this.ctx.save(),s(o,this.ctx),this.current.resumeSMaskCtx=o;const e=t.Util.transform(this.current.activeSMask.startTransformInverse,o.mozCurrentTransform);this.ctx.transform.apply(this.ctx,e),o.save(),o.setTransform(1,0,0,1,0,0),o.clearRect(0,0,o.canvas.width,o.canvas.height),o.restore()}resumeSMaskGroup(){const o=this.current.resumeSMaskCtx,e=this.ctx;this.ctx=o,this.groupStack.push(e),this.groupLevel++}endSMaskGroup(){const o=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),X(this.ctx,this.current.activeSMask,o),this.ctx.restore(),s(o,this.ctx);const e=t.Util.transform(this.current.activeSMask.startTransformInverse,o.mozCurrentTransform);this.ctx.transform.apply(this.ctx,e)}save(){this.ctx.save();const o=this.current;this.stateStack.push(o),this.current=o.clone(),this.current.resumeSMaskCtx=null}restore(){this.current.resumeSMaskCtx&&this.resumeSMaskGroup(),this.current.activeSMask!==null&&(this.stateStack.length===0||this.stateStack[this.stateStack.length-1].activeSMask!==this.current.activeSMask)&&this.endSMaskGroup(),this.stateStack.length!==0?(this.current=this.stateStack.pop(),this.ctx.restore(),this.pendingClip=null,this._cachedGetSinglePixelWidth=null):this.current.activeSMask=null}transform(o,e,i,a,h,l){this.ctx.transform(o,e,i,a,h,l),this._cachedGetSinglePixelWidth=null}constructPath(o,e){const i=this.ctx,a=this.current;let h=a.x,l=a.y;for(let b=0,w=0,U=o.length;b<U;b++)switch(o[b]|0){case t.OPS.rectangle:h=e[w++],l=e[w++];const G=e[w++],B=e[w++],Y=h+G,J=l+B;i.moveTo(h,l),G===0||B===0?i.lineTo(Y,J):(i.lineTo(Y,l),i.lineTo(Y,J),i.lineTo(h,J)),i.closePath();break;case t.OPS.moveTo:h=e[w++],l=e[w++],i.moveTo(h,l);break;case t.OPS.lineTo:h=e[w++],l=e[w++],i.lineTo(h,l);break;case t.OPS.curveTo:h=e[w+4],l=e[w+5],i.bezierCurveTo(e[w],e[w+1],e[w+2],e[w+3],h,l),w+=6;break;case t.OPS.curveTo2:i.bezierCurveTo(h,l,e[w],e[w+1],e[w+2],e[w+3]),h=e[w+2],l=e[w+3],w+=4;break;case t.OPS.curveTo3:h=e[w+2],l=e[w+3],i.bezierCurveTo(e[w],e[w+1],h,l,h,l),w+=4;break;case t.OPS.closePath:i.closePath();break}a.setCurrentPoint(h,l)}closePath(){this.ctx.closePath()}stroke(o){o=typeof o<"u"?o:!0;const e=this.ctx,i=this.current.strokeColor;if(e.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof i=="object"&&(i!=null&&i.getPattern)){const a=this.getSinglePixelWidth();e.save(),e.strokeStyle=i.getPattern(e,this,e.mozCurrentTransformInverse),e.lineWidth=Math.max(a,this.current.lineWidth),e.stroke(),e.restore()}else{const a=this.getSinglePixelWidth();a<0&&-a>=this.current.lineWidth?(e.save(),e.resetTransform(),e.lineWidth=Math.round(this._combinedScaleFactor),e.stroke(),e.restore()):(e.lineWidth=Math.max(a,this.current.lineWidth),e.stroke())}o&&this.consumePath(),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(o){o=typeof o<"u"?o:!0;const e=this.ctx,i=this.current.fillColor,a=this.current.patternFill;let h=!1;a&&(e.save(),e.fillStyle=i.getPattern(e,this,e.mozCurrentTransformInverse),h=!0),this.contentVisible&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),h&&e.restore(),o&&this.consumePath()}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=L}eoClip(){this.pendingClip=j}beginText(){this.current.textMatrix=t.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const o=this.pendingTextPaths,e=this.ctx;if(o===void 0){e.beginPath();return}e.save(),e.beginPath();for(let i=0;i<o.length;i++){const a=o[i];e.setTransform.apply(e,a.transform),e.translate(a.x,a.y),a.addToPath(e,a.fontSize)}e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(o){this.current.charSpacing=o}setWordSpacing(o){this.current.wordSpacing=o}setHScale(o){this.current.textHScale=o/100}setLeading(o){this.current.leading=-o}setFont(o,e){const i=this.commonObjs.get(o),a=this.current;if(!i)throw new Error(`Can't find font for ${o}`);if(a.fontMatrix=i.fontMatrix||t.FONT_IDENTITY_MATRIX,(a.fontMatrix[0]===0||a.fontMatrix[3]===0)&&(0,t.warn)("Invalid font matrix for font "+o),e<0?(e=-e,a.fontDirection=-1):a.fontDirection=1,this.current.font=i,this.current.fontSize=e,i.isType3Font)return;const h=i.loadedName||"sans-serif";let l="normal";i.black?l="900":i.bold&&(l="bold");const b=i.italic?"italic":"normal",w=`"${h}", ${i.fallbackName}`;let U=e;e<C?U=C:e>R&&(U=R),this.current.fontSizeScale=e/U,this.ctx.font=`${b} ${l} ${U}px ${w}`}setTextRenderingMode(o){this.current.textRenderingMode=o}setTextRise(o){this.current.textRise=o}moveText(o,e){this.current.x=this.current.lineX+=o,this.current.y=this.current.lineY+=e}setLeadingMoveText(o,e){this.setLeading(-e),this.moveText(o,e)}setTextMatrix(o,e,i,a,h,l){this.current.textMatrix=[o,e,i,a,h,l],this.current.textMatrixScale=Math.hypot(o,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(o,e,i,a,h){const l=this.ctx,b=this.current,w=b.font,U=b.textRenderingMode,G=b.fontSize/b.fontSizeScale,B=U&t.TextRenderingMode.FILL_STROKE_MASK,Y=!!(U&t.TextRenderingMode.ADD_TO_PATH_FLAG),J=b.patternFill&&!w.missingFile;let Q;(w.disableFontFace||Y||J)&&(Q=w.getPathGenerator(this.commonObjs,o)),w.disableFontFace||J?(l.save(),l.translate(e,i),l.beginPath(),Q(l,G),a&&l.setTransform.apply(l,a),(B===t.TextRenderingMode.FILL||B===t.TextRenderingMode.FILL_STROKE)&&l.fill(),(B===t.TextRenderingMode.STROKE||B===t.TextRenderingMode.FILL_STROKE)&&(h&&(l.resetTransform(),l.lineWidth=Math.round(this._combinedScaleFactor)),l.stroke()),l.restore()):((B===t.TextRenderingMode.FILL||B===t.TextRenderingMode.FILL_STROKE)&&l.fillText(o,e,i),(B===t.TextRenderingMode.STROKE||B===t.TextRenderingMode.FILL_STROKE)&&(h?(l.save(),l.moveTo(e,i),l.resetTransform(),l.lineWidth=Math.round(this._combinedScaleFactor),l.strokeText(o,0,0),l.restore()):l.strokeText(o,e,i))),Y&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:l.mozCurrentTransform,x:e,y:i,fontSize:G,addToPath:Q})}get isFontSubpixelAAEnabled(){const{context:o}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);o.scale(1.5,1),o.fillText("I",0,10);const e=o.getImageData(0,0,10,10).data;let i=!1;for(let a=3;a<e.length;a+=4)if(e[a]>0&&e[a]<255){i=!0;break}return(0,t.shadow)(this,"isFontSubpixelAAEnabled",i)}showText(o){const e=this.current,i=e.font;if(i.isType3Font)return this.showType3Text(o);const a=e.fontSize;if(a===0)return;const h=this.ctx,l=e.fontSizeScale,b=e.charSpacing,w=e.wordSpacing,U=e.fontDirection,G=e.textHScale*U,B=o.length,Y=i.vertical,J=Y?1:-1,Q=i.defaultVMetrics,te=a*e.fontMatrix[0],oe=e.textRenderingMode===t.TextRenderingMode.FILL&&!i.disableFontFace&&!e.patternFill;h.save();let ie;if(e.patternFill){h.save();const be=e.fillColor.getPattern(h,this,h.mozCurrentTransformInverse);ie=h.mozCurrentTransform,h.restore(),h.fillStyle=be}h.transform.apply(h,e.textMatrix),h.translate(e.x,e.y+e.textRise),U>0?h.scale(G,-1):h.scale(G,1);let de=e.lineWidth,ae=!1;const ue=e.textMatrixScale;if(ue===0||de===0){const be=e.textRenderingMode&t.TextRenderingMode.FILL_STROKE_MASK;(be===t.TextRenderingMode.STROKE||be===t.TextRenderingMode.FILL_STROKE)&&(this._cachedGetSinglePixelWidth=null,de=this.getSinglePixelWidth(),ae=de<0)}else de/=ue;l!==1&&(h.scale(l,l),de/=l),h.lineWidth=de;let ye=0,ne;for(ne=0;ne<B;++ne){const be=o[ne];if((0,t.isNum)(be)){ye+=J*be*a/1e3;continue}let me=!1;const Se=(be.isSpace?w:0)+b,Ae=be.fontChar,we=be.accent;let xe,Re,Ee=be.width;if(Y){const ge=be.vmetric||Q,Oe=-(be.vmetric?ge[1]:Ee*.5)*te,je=ge[2]*te;Ee=ge?-ge[0]:Ee,xe=Oe/l,Re=(ye+je)/l}else xe=ye/l,Re=0;if(i.remeasure&&Ee>0){const ge=h.measureText(Ae).width*1e3/a*l;if(Ee<ge&&this.isFontSubpixelAAEnabled){const Oe=Ee/ge;me=!0,h.save(),h.scale(Oe,1),xe/=Oe}else Ee!==ge&&(xe+=(Ee-ge)/2e3*a/l)}if(this.contentVisible&&(be.isInFont||i.missingFile)){if(oe&&!we)h.fillText(Ae,xe,Re);else if(this.paintChar(Ae,xe,Re,ie,ae),we){const ge=xe+a*we.offset.x/l,Oe=Re-a*we.offset.y/l;this.paintChar(we.fontChar,ge,Oe,ie,ae)}}let ke;Y?ke=Ee*te-Se*U:ke=Ee*te+Se*U,ye+=ke,me&&h.restore()}Y?e.y-=ye:e.x+=ye*G,h.restore()}showType3Text(o){const e=this.ctx,i=this.current,a=i.font,h=i.fontSize,l=i.fontDirection,b=a.vertical?1:-1,w=i.charSpacing,U=i.wordSpacing,G=i.textHScale*l,B=i.fontMatrix||t.FONT_IDENTITY_MATRIX,Y=o.length,J=i.textRenderingMode===t.TextRenderingMode.INVISIBLE;let Q,te,oe,ie;if(!(J||h===0)){for(this._cachedGetSinglePixelWidth=null,e.save(),e.transform.apply(e,i.textMatrix),e.translate(i.x,i.y),e.scale(G,l),Q=0;Q<Y;++Q){if(te=o[Q],(0,t.isNum)(te)){ie=b*te*h/1e3,this.ctx.translate(ie,0),i.x+=ie*G;continue}const de=(te.isSpace?U:0)+w,ae=a.charProcOperatorList[te.operatorListId];if(!ae){(0,t.warn)(`Type3 character "${te.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=te,this.save(),e.scale(h,h),e.transform.apply(e,B),this.executeOperatorList(ae),this.restore()),oe=t.Util.applyTransform([te.width,0],B)[0]*h+de,e.translate(oe,0),i.x+=oe*G}e.restore(),this.processingType3=null}}setCharWidth(o,e){}setCharWidthAndBounds(o,e,i,a,h,l){this.ctx.rect(i,a,h-i,l-a),this.clip(),this.endPath()}getColorN_Pattern(o){let e;if(o[0]==="TilingPattern"){const i=o[1],a=this.baseTransform||this.ctx.mozCurrentTransform.slice(),h={createCanvasGraphics:l=>new $(l,this.commonObjs,this.objs,this.canvasFactory)};e=new g.TilingPattern(o,i,this.ctx,h,a)}else e=this._getPattern(o[1]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(o,e,i){const a=t.Util.makeHexColor(o,e,i);this.ctx.strokeStyle=a,this.current.strokeColor=a}setFillRGBColor(o,e,i){const a=t.Util.makeHexColor(o,e,i);this.ctx.fillStyle=a,this.current.fillColor=a,this.current.patternFill=!1}_getPattern(o){if(this.cachedPatterns.has(o))return this.cachedPatterns.get(o);const e=(0,g.getShadingPattern)(this.objs.get(o));return this.cachedPatterns.set(o,e),e}shadingFill(o){if(!this.contentVisible)return;const e=this.ctx;this.save();const i=this._getPattern(o);e.fillStyle=i.getPattern(e,this,e.mozCurrentTransformInverse,!0);const a=e.mozCurrentTransformInverse;if(a){const h=e.canvas,l=h.width,b=h.height,w=t.Util.applyTransform([0,0],a),U=t.Util.applyTransform([0,b],a),G=t.Util.applyTransform([l,0],a),B=t.Util.applyTransform([l,b],a),Y=Math.min(w[0],U[0],G[0],B[0]),J=Math.min(w[1],U[1],G[1],B[1]),Q=Math.max(w[0],U[0],G[0],B[0]),te=Math.max(w[1],U[1],G[1],B[1]);this.ctx.fillRect(Y,J,Q-Y,te-J)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.restore()}beginInlineImage(){(0,t.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,t.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(o,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(o)&&o.length===6&&this.transform.apply(this,o),this.baseTransform=this.ctx.mozCurrentTransform,e)){const i=e[2]-e[0],a=e[3]-e[1];this.ctx.rect(e[0],e[1],i,a),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(o){if(!this.contentVisible)return;this.save();const e=this.ctx;o.isolated||(0,t.info)("TODO: Support non-isolated groups."),o.knockout&&(0,t.warn)("Knockout groups not supported.");const i=e.mozCurrentTransform;if(o.matrix&&e.transform.apply(e,o.matrix),!o.bbox)throw new Error("Bounding box is required.");let a=t.Util.getAxialAlignedBoundingBox(o.bbox,e.mozCurrentTransform);const h=[0,0,e.canvas.width,e.canvas.height];a=t.Util.intersect(a,h)||[0,0,0,0];const l=Math.floor(a[0]),b=Math.floor(a[1]);let w=Math.max(Math.ceil(a[2])-l,1),U=Math.max(Math.ceil(a[3])-b,1),G=1,B=1;w>O&&(G=w/O,w=O),U>O&&(B=U/O,U=O);let Y="groupAt"+this.groupLevel;o.smask&&(Y+="_smask_"+this.smaskCounter++%2);const J=this.cachedCanvases.getCanvas(Y,w,U,!0),Q=J.context;Q.scale(1/G,1/B),Q.translate(-l,-b),Q.transform.apply(Q,i),o.smask?this.smaskStack.push({canvas:J.canvas,context:Q,offsetX:l,offsetY:b,scaleX:G,scaleY:B,subtype:o.smask.subtype,backdrop:o.smask.backdrop,transferMap:o.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(l,b),e.scale(G,B)),s(e,Q),this.ctx=Q,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++,this.current.activeSMask=null}endGroup(o){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx;this.ctx=this.groupStack.pop(),this.ctx.imageSmoothingEnabled!==void 0?this.ctx.imageSmoothingEnabled=!1:this.ctx.mozImageSmoothingEnabled=!1,o.smask?this.tempSMask=this.smaskStack.pop():this.ctx.drawImage(e.canvas,0,0),this.restore()}beginAnnotations(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)}endAnnotations(){this.restore()}beginAnnotation(o,e,i,a){if(this.save(),c(this.ctx),this.current=new q,Array.isArray(e)&&e.length===4){const h=e[2]-e[0],l=e[3]-e[1];this.ctx.rect(e[0],e[1],h,l),this.clip(),this.endPath()}this.transform.apply(this,i),this.transform.apply(this,a)}endAnnotation(){this.restore()}paintImageMaskXObject(o){if(!this.contentVisible)return;const e=this.ctx,i=o.width,a=o.height,h=this.processingType3;if(h&&h.compiled===void 0&&(i<=m&&a<=m?h.compiled=P({data:o.data,width:i,height:a}):h.compiled=null),h!=null&&h.compiled){h.compiled(e);return}const l=this._createMaskCanvas(o),b=l.canvas;e.save(),e.setTransform(1,0,0,1,0,0),e.drawImage(b,l.offsetX,l.offsetY),e.restore()}paintImageMaskXObjectRepeat(o,e,i=0,a=0,h,l){if(!this.contentVisible)return;const b=this.ctx;b.save();const w=b.mozCurrentTransform;b.transform(e,i,a,h,0,0);const U=this._createMaskCanvas(o);b.setTransform(1,0,0,1,0,0);for(let G=0,B=l.length;G<B;G+=2){const Y=t.Util.transform(w,[e,i,a,h,l[G],l[G+1]]),[J,Q]=t.Util.applyTransform([0,0],Y);b.drawImage(U.canvas,J,Q)}b.restore()}paintImageMaskXObjectGroup(o){if(!this.contentVisible)return;const e=this.ctx,i=this.current.fillColor,a=this.current.patternFill;for(let h=0,l=o.length;h<l;h++){const b=o[h],w=b.width,U=b.height,G=this.cachedCanvases.getCanvas("maskCanvas",w,U),B=G.context;B.save(),r(B,b),B.globalCompositeOperation="source-in",B.fillStyle=a?i.getPattern(B,this,e.mozCurrentTransformInverse,!1):i,B.fillRect(0,0,w,U),B.restore(),e.save(),e.transform.apply(e,b.transform),e.scale(1,-1),e.drawImage(G.canvas,0,0,w,U,0,-1,1,1),e.restore()}}paintImageXObject(o){if(!this.contentVisible)return;const e=o.startsWith("g_")?this.commonObjs.get(o):this.objs.get(o);if(!e){(0,t.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(o,e,i,a){if(!this.contentVisible)return;const h=o.startsWith("g_")?this.commonObjs.get(o):this.objs.get(o);if(!h){(0,t.warn)("Dependent image isn't ready yet");return}const l=h.width,b=h.height,w=[];for(let U=0,G=a.length;U<G;U+=2)w.push({transform:[e,0,0,i,a[U],a[U+1]],x:0,y:0,w:l,h:b});this.paintInlineImageXObjectGroup(h,w)}paintInlineImageXObject(o){if(!this.contentVisible)return;const e=o.width,i=o.height,a=this.ctx;this.save(),a.scale(1/e,-1/i);let h;if(typeof HTMLElement=="function"&&o instanceof HTMLElement||!o.data)h=o;else{const b=this.cachedCanvases.getCanvas("inlineImage",e,i),w=b.context;y(w,o,this.current.transferMaps),h=b.canvas}const l=this._scaleImage(h,a.mozCurrentTransformInverse);if(a.drawImage(l.img,0,0,l.paintWidth,l.paintHeight,0,-i,e,i),this.imageLayer){const b=this.getCanvasPosition(0,-i);this.imageLayer.appendImage({imgData:o,left:b[0],top:b[1],width:e/a.mozCurrentTransformInverse[0],height:i/a.mozCurrentTransformInverse[3]})}this.restore()}paintInlineImageXObjectGroup(o,e){if(!this.contentVisible)return;const i=this.ctx,a=o.width,h=o.height,l=this.cachedCanvases.getCanvas("inlineImage",a,h),b=l.context;y(b,o,this.current.transferMaps);for(let w=0,U=e.length;w<U;w++){const G=e[w];if(i.save(),i.transform.apply(i,G.transform),i.scale(1,-1),i.drawImage(l.canvas,G.x,G.y,G.w,G.h,0,-1,1,1),this.imageLayer){const B=this.getCanvasPosition(G.x,G.y);this.imageLayer.appendImage({imgData:o,left:B[0],top:B[1],width:a,height:h})}i.restore()}}paintSolidColorImageMask(){this.contentVisible&&this.ctx.fillRect(0,0,1,1)}markPoint(o){}markPointProps(o,e){}beginMarkedContent(o){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(o,e){o==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(){const o=this.ctx;this.pendingClip&&(this.pendingClip===j?o.clip("evenodd"):o.clip(),this.pendingClip=null),o.beginPath()}getSinglePixelWidth(){if(this._cachedGetSinglePixelWidth===null){const o=this.ctx.mozCurrentTransform,e=Math.abs(o[0]*o[3]-o[2]*o[1]),i=o[0]**2+o[2]**2,a=o[1]**2+o[3]**2,h=Math.sqrt(Math.max(i,a))/e;i!==a&&this._combinedScaleFactor*h>1?this._cachedGetSinglePixelWidth=-(this._combinedScaleFactor*h):e>Number.EPSILON?this._cachedGetSinglePixelWidth=h:this._cachedGetSinglePixelWidth=1}return this._cachedGetSinglePixelWidth}getCanvasPosition(o,e){const i=this.ctx.mozCurrentTransform;return[i[0]*o+i[2]*e+i[4],i[1]*o+i[3]*e+i[5]]}isContentVisible(){for(let o=this.markedContentStack.length-1;o>=0;o--)if(!this.markedContentStack[o].visible)return!1;return!0}}for(const F in t.OPS)$.prototype[t.OPS[F]]=$.prototype[F];return $}();n.CanvasGraphics=u},(V,n,_)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.getShadingPattern=E,n.TilingPattern=void 0;var t=_(2);function g(q,u){if(!u||typeof Path2D>"u")return;const S=u[2]-u[0],I=u[3]-u[1],T=new Path2D;T.rect(u[0],u[1],S,I),q.clip(T)}class C{constructor(){this.constructor===C&&(0,t.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,t.unreachable)("Abstract method `getPattern` called.")}}class R extends C{constructor(u){super(),this._type=u[1],this._bbox=u[2],this._colorStops=u[3],this._p0=u[4],this._p1=u[5],this._r0=u[6],this._r1=u[7],this._matrix=u[8],this._patternCache=null}_createGradient(u){let S;this._type==="axial"?S=u.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(S=u.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const I of this._colorStops)S.addColorStop(I[0],I[1]);return S}getPattern(u,S,I,T=!1){let y;if(this._patternCache)y=this._patternCache;else{if(T)g(u,this._bbox),y=this._createGradient(u);else{const r=S.cachedCanvases.getCanvas("pattern",S.ctx.canvas.width,S.ctx.canvas.height,!0),s=r.context;s.clearRect(0,0,s.canvas.width,s.canvas.height),s.beginPath(),s.rect(0,0,s.canvas.width,s.canvas.height),s.setTransform.apply(s,S.baseTransform),this._matrix&&s.transform.apply(s,this._matrix),g(s,this._bbox),s.fillStyle=this._createGradient(s),s.fill(),y=u.createPattern(r.canvas,"repeat")}this._patternCache=y}if(!T){const r=new DOMMatrix(I);try{y.setTransform(r)}catch(s){(0,t.warn)(`RadialAxialShadingPattern.getPattern: "${s==null?void 0:s.message}".`)}}return y}}function O(q,u,S,I,T,y,r,s){const c=u.coords,A=u.colors,p=q.data,M=q.width*4;let k;c[S+1]>c[I+1]&&(k=S,S=I,I=k,k=y,y=r,r=k),c[I+1]>c[T+1]&&(k=I,I=T,T=k,k=r,r=s,s=k),c[S+1]>c[I+1]&&(k=S,S=I,I=k,k=y,y=r,r=k);const X=(c[S]+u.offsetX)*u.scaleX,N=(c[S+1]+u.offsetY)*u.scaleY,v=(c[I]+u.offsetX)*u.scaleX,L=(c[I+1]+u.offsetY)*u.scaleY,j=(c[T]+u.offsetX)*u.scaleX,$=(c[T+1]+u.offsetY)*u.scaleY;if(N>=$)return;const F=A[y],o=A[y+1],e=A[y+2],i=A[r],a=A[r+1],h=A[r+2],l=A[s],b=A[s+1],w=A[s+2],U=Math.round(N),G=Math.round($);let B,Y,J,Q,te,oe,ie,de;for(let ae=U;ae<=G;ae++){if(ae<L){let me;ae<N?me=0:me=(N-ae)/(N-L),B=X-(X-v)*me,Y=F-(F-i)*me,J=o-(o-a)*me,Q=e-(e-h)*me}else{let me;ae>$?me=1:L===$?me=0:me=(L-ae)/(L-$),B=v-(v-j)*me,Y=i-(i-l)*me,J=a-(a-b)*me,Q=h-(h-w)*me}let ue;ae<N?ue=0:ae>$?ue=1:ue=(N-ae)/(N-$),te=X-(X-j)*ue,oe=F-(F-l)*ue,ie=o-(o-b)*ue,de=e-(e-w)*ue;const ye=Math.round(Math.min(B,te)),ne=Math.round(Math.max(B,te));let be=M*ae+ye*4;for(let me=ye;me<=ne;me++)ue=(B-me)/(B-te),ue<0?ue=0:ue>1&&(ue=1),p[be++]=Y-(Y-oe)*ue|0,p[be++]=J-(J-ie)*ue|0,p[be++]=Q-(Q-de)*ue|0,p[be++]=255}}function m(q,u,S){const I=u.coords,T=u.colors;let y,r;switch(u.type){case"lattice":const s=u.verticesPerRow,c=Math.floor(I.length/s)-1,A=s-1;for(y=0;y<c;y++){let p=y*s;for(let M=0;M<A;M++,p++)O(q,S,I[p],I[p+1],I[p+s],T[p],T[p+1],T[p+s]),O(q,S,I[p+s+1],I[p+1],I[p+s],T[p+s+1],T[p+1],T[p+s])}break;case"triangles":for(y=0,r=I.length;y<r;y+=3)O(q,S,I[y],I[y+1],I[y+2],T[y],T[y+1],T[y+2]);break;default:throw new Error("illegal figure")}}class d extends C{constructor(u){super(),this._coords=u[2],this._colors=u[3],this._figures=u[4],this._bounds=u[5],this._matrix=u[6],this._bbox=u[7],this._background=u[8]}_createMeshCanvas(u,S,I){const s=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),A=Math.ceil(this._bounds[2])-s,p=Math.ceil(this._bounds[3])-c,M=Math.min(Math.ceil(Math.abs(A*u[0]*1.1)),3e3),k=Math.min(Math.ceil(Math.abs(p*u[1]*1.1)),3e3),X=A/M,N=p/k,v={coords:this._coords,colors:this._colors,offsetX:-s,offsetY:-c,scaleX:1/X,scaleY:1/N},L=M+2*2,j=k+2*2,$=I.getCanvas("mesh",L,j,!1),F=$.context,o=F.createImageData(M,k);if(S){const i=o.data;for(let a=0,h=i.length;a<h;a+=4)i[a]=S[0],i[a+1]=S[1],i[a+2]=S[2],i[a+3]=255}for(const i of this._figures)m(o,i,v);return F.putImageData(o,2,2),{canvas:$.canvas,offsetX:s-2*X,offsetY:c-2*N,scaleX:X,scaleY:N}}getPattern(u,S,I,T=!1){g(u,this._bbox);let y;if(T)y=t.Util.singularValueDecompose2dScale(u.mozCurrentTransform);else if(y=t.Util.singularValueDecompose2dScale(S.baseTransform),this._matrix){const s=t.Util.singularValueDecompose2dScale(this._matrix);y=[y[0]*s[0],y[1]*s[1]]}const r=this._createMeshCanvas(y,T?null:this._background,S.cachedCanvases);return T||(u.setTransform.apply(u,S.baseTransform),this._matrix&&u.transform.apply(u,this._matrix)),u.translate(r.offsetX,r.offsetY),u.scale(r.scaleX,r.scaleY),u.createPattern(r.canvas,"no-repeat")}}class f extends C{getPattern(){return"hotpink"}}function E(q){switch(q[0]){case"RadialAxial":return new R(q);case"Mesh":return new d(q);case"Dummy":return new f}throw new Error(`Unknown IR type: ${q[0]}`)}const D={COLORED:1,UNCOLORED:2};class P{static get MAX_PATTERN_SIZE(){return(0,t.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(u,S,I,T,y){this.operatorList=u[2],this.matrix=u[3]||[1,0,0,1,0,0],this.bbox=u[4],this.xstep=u[5],this.ystep=u[6],this.paintType=u[7],this.tilingType=u[8],this.color=S,this.ctx=I,this.canvasGraphicsFactory=T,this.baseTransform=y}createPatternCanvas(u){const S=this.operatorList,I=this.bbox,T=this.xstep,y=this.ystep,r=this.paintType,s=this.tilingType,c=this.color,A=this.canvasGraphicsFactory;(0,t.info)("TilingType: "+s);const p=I[0],M=I[1],k=I[2],X=I[3],N=t.Util.singularValueDecompose2dScale(this.matrix),v=t.Util.singularValueDecompose2dScale(this.baseTransform),L=[N[0]*v[0],N[1]*v[1]],j=this.getSizeAndScale(T,this.ctx.canvas.width,L[0]),$=this.getSizeAndScale(y,this.ctx.canvas.height,L[1]),F=u.cachedCanvases.getCanvas("pattern",j.size,$.size,!0),o=F.context,e=A.createCanvasGraphics(o);e.groupLevel=u.groupLevel,this.setFillAndStrokeStyleToContext(e,r,c);let i=p,a=M,h=k,l=X;return p<0&&(i=0,h+=Math.abs(p)),M<0&&(a=0,l+=Math.abs(M)),o.translate(-(j.scale*i),-($.scale*a)),e.transform(j.scale,0,0,$.scale,0,0),this.clipBbox(e,i,a,h,l),e.baseTransform=e.ctx.mozCurrentTransform.slice(),e.executeOperatorList(S),e.endDrawing(),{canvas:F.canvas,scaleX:j.scale,scaleY:$.scale,offsetX:i,offsetY:a}}getSizeAndScale(u,S,I){u=Math.abs(u);const T=Math.max(P.MAX_PATTERN_SIZE,S);let y=Math.ceil(u*I);return y>=T?y=T:I=y/u,{scale:I,size:y}}clipBbox(u,S,I,T,y){const r=T-S,s=y-I;u.ctx.rect(S,I,r,s),u.clip(),u.endPath()}setFillAndStrokeStyleToContext(u,S,I){const T=u.ctx,y=u.current;switch(S){case D.COLORED:const r=this.ctx;T.fillStyle=r.fillStyle,T.strokeStyle=r.strokeStyle,y.fillColor=r.fillStyle,y.strokeColor=r.strokeStyle;break;case D.UNCOLORED:const s=t.Util.makeHexColor(I[0],I[1],I[2]);T.fillStyle=s,T.strokeStyle=s,y.fillColor=s,y.strokeColor=s;break;default:throw new t.FormatError(`Unsupported paint type: ${S}`)}}getPattern(u,S,I,T=!1){let y=I;T||(y=t.Util.transform(y,S.baseTransform),this.matrix&&(y=t.Util.transform(y,this.matrix)));const r=this.createPatternCanvas(S);let s=new DOMMatrix(y);s=s.translate(r.offsetX,r.offsetY),s=s.scale(1/r.scaleX,1/r.scaleY);const c=u.createPattern(r.canvas,"repeat");try{c.setTransform(s)}catch(A){(0,t.warn)(`TilingPattern.getPattern: "${A==null?void 0:A.message}".`)}return c}}n.TilingPattern=P},(V,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.GlobalWorkerOptions=void 0;const _=Object.create(null);n.GlobalWorkerOptions=_,_.workerPort=_.workerPort===void 0?null:_.workerPort,_.workerSrc=_.workerSrc===void 0?"":_.workerSrc},(V,n,_)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.MessageHandler=void 0;var t=_(2);const g={DATA:1,ERROR:2},C={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function R(m){if(typeof m!="object"||m===null)return m;switch(m.name){case"AbortException":return new t.AbortException(m.message);case"MissingPDFException":return new t.MissingPDFException(m.message);case"UnexpectedResponseException":return new t.UnexpectedResponseException(m.message,m.status);case"UnknownErrorException":return new t.UnknownErrorException(m.message,m.details);default:return new t.UnknownErrorException(m.message,m.toString())}}class O{constructor(d,f,E){this.sourceName=d,this.targetName=f,this.comObj=E,this.callbackId=1,this.streamId=1,this.postMessageTransfers=!0,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=D=>{const P=D.data;if(P.targetName!==this.sourceName)return;if(P.stream){this._processStreamMessage(P);return}if(P.callback){const u=P.callbackId,S=this.callbackCapabilities[u];if(!S)throw new Error(`Cannot resolve callback ${u}`);if(delete this.callbackCapabilities[u],P.callback===g.DATA)S.resolve(P.data);else if(P.callback===g.ERROR)S.reject(R(P.reason));else throw new Error("Unexpected callback case");return}const q=this.actionHandler[P.action];if(!q)throw new Error(`Unknown action from worker: ${P.action}`);if(P.callbackId){const u=this.sourceName,S=P.sourceName;new Promise(function(I){I(q(P.data))}).then(function(I){E.postMessage({sourceName:u,targetName:S,callback:g.DATA,callbackId:P.callbackId,data:I})},function(I){E.postMessage({sourceName:u,targetName:S,callback:g.ERROR,callbackId:P.callbackId,reason:R(I)})});return}if(P.streamId){this._createStreamSink(P);return}q(P.data)},E.addEventListener("message",this._onComObjOnMessage)}on(d,f){const E=this.actionHandler;if(E[d])throw new Error(`There is already an actionName called "${d}"`);E[d]=f}send(d,f,E){this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:d,data:f},E)}sendWithPromise(d,f,E){const D=this.callbackId++,P=(0,t.createPromiseCapability)();this.callbackCapabilities[D]=P;try{this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:d,callbackId:D,data:f},E)}catch(q){P.reject(q)}return P.promise}sendWithStream(d,f,E,D){const P=this.streamId++,q=this.sourceName,u=this.targetName,S=this.comObj;return new ReadableStream({start:I=>{const T=(0,t.createPromiseCapability)();return this.streamControllers[P]={controller:I,startCall:T,pullCall:null,cancelCall:null,isClosed:!1},this._postMessage({sourceName:q,targetName:u,action:d,streamId:P,data:f,desiredSize:I.desiredSize},D),T.promise},pull:I=>{const T=(0,t.createPromiseCapability)();return this.streamControllers[P].pullCall=T,S.postMessage({sourceName:q,targetName:u,stream:C.PULL,streamId:P,desiredSize:I.desiredSize}),T.promise},cancel:I=>{(0,t.assert)(I instanceof Error,"cancel must have a valid reason");const T=(0,t.createPromiseCapability)();return this.streamControllers[P].cancelCall=T,this.streamControllers[P].isClosed=!0,S.postMessage({sourceName:q,targetName:u,stream:C.CANCEL,streamId:P,reason:R(I)}),T.promise}},E)}_createStreamSink(d){const f=this,E=this.actionHandler[d.action],D=d.streamId,P=this.sourceName,q=d.sourceName,u=this.comObj,S={enqueue(I,T=1,y){if(this.isCancelled)return;const r=this.desiredSize;this.desiredSize-=T,r>0&&this.desiredSize<=0&&(this.sinkCapability=(0,t.createPromiseCapability)(),this.ready=this.sinkCapability.promise),f._postMessage({sourceName:P,targetName:q,stream:C.ENQUEUE,streamId:D,chunk:I},y)},close(){this.isCancelled||(this.isCancelled=!0,u.postMessage({sourceName:P,targetName:q,stream:C.CLOSE,streamId:D}),delete f.streamSinks[D])},error(I){(0,t.assert)(I instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,u.postMessage({sourceName:P,targetName:q,stream:C.ERROR,streamId:D,reason:R(I)}))},sinkCapability:(0,t.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:d.desiredSize,ready:null};S.sinkCapability.resolve(),S.ready=S.sinkCapability.promise,this.streamSinks[D]=S,new Promise(function(I){I(E(d.data,S))}).then(function(){u.postMessage({sourceName:P,targetName:q,stream:C.START_COMPLETE,streamId:D,success:!0})},function(I){u.postMessage({sourceName:P,targetName:q,stream:C.START_COMPLETE,streamId:D,reason:R(I)})})}_processStreamMessage(d){const f=d.streamId,E=this.sourceName,D=d.sourceName,P=this.comObj;switch(d.stream){case C.START_COMPLETE:d.success?this.streamControllers[f].startCall.resolve():this.streamControllers[f].startCall.reject(R(d.reason));break;case C.PULL_COMPLETE:d.success?this.streamControllers[f].pullCall.resolve():this.streamControllers[f].pullCall.reject(R(d.reason));break;case C.PULL:if(!this.streamSinks[f]){P.postMessage({sourceName:E,targetName:D,stream:C.PULL_COMPLETE,streamId:f,success:!0});break}this.streamSinks[f].desiredSize<=0&&d.desiredSize>0&&this.streamSinks[f].sinkCapability.resolve(),this.streamSinks[f].desiredSize=d.desiredSize;const{onPull:q}=this.streamSinks[d.streamId];new Promise(function(S){S(q&&q())}).then(function(){P.postMessage({sourceName:E,targetName:D,stream:C.PULL_COMPLETE,streamId:f,success:!0})},function(S){P.postMessage({sourceName:E,targetName:D,stream:C.PULL_COMPLETE,streamId:f,reason:R(S)})});break;case C.ENQUEUE:if((0,t.assert)(this.streamControllers[f],"enqueue should have stream controller"),this.streamControllers[f].isClosed)break;this.streamControllers[f].controller.enqueue(d.chunk);break;case C.CLOSE:if((0,t.assert)(this.streamControllers[f],"close should have stream controller"),this.streamControllers[f].isClosed)break;this.streamControllers[f].isClosed=!0,this.streamControllers[f].controller.close(),this._deleteStreamController(f);break;case C.ERROR:(0,t.assert)(this.streamControllers[f],"error should have stream controller"),this.streamControllers[f].controller.error(R(d.reason)),this._deleteStreamController(f);break;case C.CANCEL_COMPLETE:d.success?this.streamControllers[f].cancelCall.resolve():this.streamControllers[f].cancelCall.reject(R(d.reason)),this._deleteStreamController(f);break;case C.CANCEL:if(!this.streamSinks[f])break;const{onCancel:u}=this.streamSinks[d.streamId];new Promise(function(S){S(u&&u(R(d.reason)))}).then(function(){P.postMessage({sourceName:E,targetName:D,stream:C.CANCEL_COMPLETE,streamId:f,success:!0})},function(S){P.postMessage({sourceName:E,targetName:D,stream:C.CANCEL_COMPLETE,streamId:f,reason:R(S)})}),this.streamSinks[f].sinkCapability.reject(R(d.reason)),this.streamSinks[f].isCancelled=!0,delete this.streamSinks[f];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(d){await Promise.allSettled([this.streamControllers[d].startCall,this.streamControllers[d].pullCall,this.streamControllers[d].cancelCall].map(function(f){return f&&f.promise})),delete this.streamControllers[d]}_postMessage(d,f){f&&this.postMessageTransfers?this.comObj.postMessage(d,f):this.comObj.postMessage(d)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}n.MessageHandler=O},(V,n,_)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Metadata=void 0;var t=_(2);class g{constructor({parsedData:R,rawData:O}){this._metadataMap=R,this._data=O}getRaw(){return this._data}get(R){return this._metadataMap.get(R)??null}getAll(){return(0,t.objectFromMap)(this._metadataMap)}has(R){return this._metadataMap.has(R)}}n.Metadata=g},(V,n,_)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.OptionalContentConfig=void 0;var t=_(2);class g{constructor(O,m){this.visible=!0,this.name=O,this.intent=m}}class C{constructor(O){if(this.name=null,this.creator=null,this._order=null,this._groups=new Map,O!==null){this.name=O.name,this.creator=O.creator,this._order=O.order;for(const m of O.groups)this._groups.set(m.id,new g(m.name,m.intent));if(O.baseState==="OFF")for(const m of this._groups)m.visible=!1;for(const m of O.on)this._groups.get(m).visible=!0;for(const m of O.off)this._groups.get(m).visible=!1}}_evaluateVisibilityExpression(O){const m=O.length;if(m<2)return!0;const d=O[0];for(let f=1;f<m;f++){const E=O[f];let D;if(Array.isArray(E))D=this._evaluateVisibilityExpression(E);else if(this._groups.has(E))D=this._groups.get(E).visible;else return(0,t.warn)(`Optional content group not found: ${E}`),!0;switch(d){case"And":if(!D)return!1;break;case"Or":if(D)return!0;break;case"Not":return!D;default:return!0}}return d==="And"}isVisible(O){if(O.type==="OCG")return this._groups.has(O.id)?this._groups.get(O.id).visible:((0,t.warn)(`Optional content group not found: ${O.id}`),!0);if(O.type==="OCMD"){if(O.expression)return this._evaluateVisibilityExpression(O.expression);if(!O.policy||O.policy==="AnyOn"){for(const m of O.ids){if(!this._groups.has(m))return(0,t.warn)(`Optional content group not found: ${m}`),!0;if(this._groups.get(m).visible)return!0}return!1}else if(O.policy==="AllOn"){for(const m of O.ids){if(!this._groups.has(m))return(0,t.warn)(`Optional content group not found: ${m}`),!0;if(!this._groups.get(m).visible)return!1}return!0}else if(O.policy==="AnyOff"){for(const m of O.ids){if(!this._groups.has(m))return(0,t.warn)(`Optional content group not found: ${m}`),!0;if(!this._groups.get(m).visible)return!0}return!1}else if(O.policy==="AllOff"){for(const m of O.ids){if(!this._groups.has(m))return(0,t.warn)(`Optional content group not found: ${m}`),!0;if(this._groups.get(m).visible)return!1}return!0}return(0,t.warn)(`Unknown optional content policy ${O.policy}.`),!0}return(0,t.warn)(`Unknown group type ${O.type}.`),!0}setVisibility(O,m=!0){if(!this._groups.has(O)){(0,t.warn)(`Optional content group not found: ${O}`);return}this._groups.get(O).visible=!!m}getOrder(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}getGroups(){return this._groups.size>0?(0,t.objectFromMap)(this._groups):null}getGroup(O){return this._groups.get(O)||null}}n.OptionalContentConfig=C},(V,n,_)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.PDFDataTransportStream=void 0;var t=_(2),g=_(1);class C{constructor(d,f){(0,t.assert)(f,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=d.progressiveDone||!1,this._contentDispositionFilename=d.contentDispositionFilename||null;const E=d.initialData;if((E==null?void 0:E.length)>0){const D=new Uint8Array(E).buffer;this._queuedChunks.push(D)}this._pdfDataRangeTransport=f,this._isStreamingSupported=!d.disableStream,this._isRangeSupported=!d.disableRange,this._contentLength=d.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((D,P)=>{this._onReceiveData({begin:D,chunk:P})}),this._pdfDataRangeTransport.addProgressListener((D,P)=>{this._onProgress({loaded:D,total:P})}),this._pdfDataRangeTransport.addProgressiveReadListener(D=>{this._onReceiveData({chunk:D})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(d){const f=new Uint8Array(d.chunk).buffer;if(d.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(f):this._queuedChunks.push(f);else{const E=this._rangeReaders.some(function(D){return D._begin!==d.begin?!1:(D._enqueue(f),!0)});(0,t.assert)(E,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var d;return((d=this._fullRequestReader)==null?void 0:d._loaded)??0}_onProgress(d){if(d.total===void 0){const f=this._rangeReaders[0];f!=null&&f.onProgress&&f.onProgress({loaded:d.loaded})}else{const f=this._fullRequestReader;f!=null&&f.onProgress&&f.onProgress({loaded:d.loaded,total:d.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(d){const f=this._rangeReaders.indexOf(d);f>=0&&this._rangeReaders.splice(f,1)}getFullReader(){(0,t.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const d=this._queuedChunks;return this._queuedChunks=null,new R(this,d,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(d,f){if(f<=this._progressiveDataLength)return null;const E=new O(this,d,f);return this._pdfDataRangeTransport.requestDataRange(d,f),this._rangeReaders.push(E),E}cancelAllRequests(d){this._fullRequestReader&&this._fullRequestReader.cancel(d);for(const f of this._rangeReaders.slice(0))f.cancel(d);this._pdfDataRangeTransport.abort()}}n.PDFDataTransportStream=C;class R{constructor(d,f,E=!1,D=null){this._stream=d,this._done=E||!1,this._filename=(0,g.isPdfFile)(D)?D:null,this._queuedChunks=f||[],this._loaded=0;for(const P of this._queuedChunks)this._loaded+=P.byteLength;this._requests=[],this._headersReady=Promise.resolve(),d._fullRequestReader=this,this.onProgress=null}_enqueue(d){this._done||(this._requests.length>0?this._requests.shift().resolve({value:d,done:!1}):this._queuedChunks.push(d),this._loaded+=d.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const d=(0,t.createPromiseCapability)();return this._requests.push(d),d.promise}cancel(d){this._done=!0;for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class O{constructor(d,f,E){this._stream=d,this._begin=f,this._end=E,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(d){if(!this._done){if(this._requests.length===0)this._queuedChunk=d;else{this._requests.shift().resolve({value:d,done:!1});for(const E of this._requests)E.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const f=this._queuedChunk;return this._queuedChunk=null,{value:f,done:!1}}if(this._done)return{value:void 0,done:!0};const d=(0,t.createPromiseCapability)();return this._requests.push(d),d.promise}cancel(d){this._done=!0;for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(V,n,_)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.AnnotationLayer=void 0;var t=_(1),g=_(2),C=_(9),R=_(18);class O{static create(e){switch(e.data.annotationType){case g.AnnotationType.LINK:return new d(e);case g.AnnotationType.TEXT:return new f(e);case g.AnnotationType.WIDGET:switch(e.data.fieldType){case"Tx":return new D(e);case"Btn":return e.data.radioButton?new q(e):e.data.checkBox?new P(e):new u(e);case"Ch":return new S(e)}return new E(e);case g.AnnotationType.POPUP:return new I(e);case g.AnnotationType.FREETEXT:return new y(e);case g.AnnotationType.LINE:return new r(e);case g.AnnotationType.SQUARE:return new s(e);case g.AnnotationType.CIRCLE:return new c(e);case g.AnnotationType.POLYLINE:return new A(e);case g.AnnotationType.CARET:return new M(e);case g.AnnotationType.INK:return new k(e);case g.AnnotationType.POLYGON:return new p(e);case g.AnnotationType.HIGHLIGHT:return new X(e);case g.AnnotationType.UNDERLINE:return new N(e);case g.AnnotationType.SQUIGGLY:return new v(e);case g.AnnotationType.STRIKEOUT:return new L(e);case g.AnnotationType.STAMP:return new j(e);case g.AnnotationType.FILEATTACHMENT:return new $(e);default:return new m(e)}}}class m{constructor(e,{isRenderable:i=!1,ignoreBorder:a=!1,createQuadrilaterals:h=!1}={}){this.isRenderable=i,this.data=e.data,this.layer=e.layer,this.page=e.page,this.viewport=e.viewport,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderInteractiveForms=e.renderInteractiveForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._mouseState=e.mouseState,i&&(this.container=this._createContainer(a)),h&&(this.quadrilaterals=this._createQuadrilaterals(a))}_createContainer(e=!1){const i=this.data,a=this.page,h=this.viewport,l=document.createElement("section");let b=i.rect[2]-i.rect[0],w=i.rect[3]-i.rect[1];l.setAttribute("data-annotation-id",i.id);const U=g.Util.normalizeRect([i.rect[0],a.view[3]-i.rect[1]+a.view[1],i.rect[2],a.view[3]-i.rect[3]+a.view[1]]);if(l.style.transform=`matrix(${h.transform.join(",")})`,l.style.transformOrigin=`${-U[0]}px ${-U[1]}px`,!e&&i.borderStyle.width>0){l.style.borderWidth=`${i.borderStyle.width}px`,i.borderStyle.style!==g.AnnotationBorderStyleType.UNDERLINE&&(b-=2*i.borderStyle.width,w-=2*i.borderStyle.width);const G=i.borderStyle.horizontalCornerRadius,B=i.borderStyle.verticalCornerRadius;if(G>0||B>0){const Y=`${G}px / ${B}px`;l.style.borderRadius=Y}switch(i.borderStyle.style){case g.AnnotationBorderStyleType.SOLID:l.style.borderStyle="solid";break;case g.AnnotationBorderStyleType.DASHED:l.style.borderStyle="dashed";break;case g.AnnotationBorderStyleType.BEVELED:(0,g.warn)("Unimplemented border style: beveled");break;case g.AnnotationBorderStyleType.INSET:(0,g.warn)("Unimplemented border style: inset");break;case g.AnnotationBorderStyleType.UNDERLINE:l.style.borderBottomStyle="solid";break}i.color?l.style.borderColor=g.Util.makeHexColor(i.color[0]|0,i.color[1]|0,i.color[2]|0):l.style.borderWidth=0}return l.style.left=`${U[0]}px`,l.style.top=`${U[1]}px`,l.style.width=`${b}px`,l.style.height=`${w}px`,l}_createQuadrilaterals(e=!1){if(!this.data.quadPoints)return null;const i=[],a=this.data.rect;for(const h of this.data.quadPoints)this.data.rect=[h[2].x,h[2].y,h[1].x,h[1].y],i.push(this._createContainer(e));return this.data.rect=a,i}_createPopup(e,i){let a=this.container;this.quadrilaterals&&(e=e||this.quadrilaterals,a=this.quadrilaterals[0]),e||(e=document.createElement("div"),e.style.height=a.style.height,e.style.width=a.style.width,a.appendChild(e));const l=new T({container:a,trigger:e,color:i.color,title:i.title,modificationDate:i.modificationDate,contents:i.contents,hideWrapper:!0}).render();l.style.left=a.style.width,a.appendChild(l)}_renderQuadrilaterals(e){for(const i of this.quadrilaterals)i.className=e;return this.quadrilaterals}render(){(0,g.unreachable)("Abstract method `AnnotationElement.render` called")}}class d extends m{constructor(e){const i=!!(e.data.url||e.data.dest||e.data.action||e.data.isTooltipOnly||e.data.actions&&(e.data.actions.Action||e.data.actions["Mouse Up"]||e.data.actions["Mouse Down"]));super(e,{isRenderable:i,createQuadrilaterals:!0})}render(){const{data:e,linkService:i}=this,a=document.createElement("a");return e.url?(0,t.addLinkAttributes)(a,{url:e.url,target:e.newWindow?t.LinkTarget.BLANK:i.externalLinkTarget,rel:i.externalLinkRel,enabled:i.externalLinkEnabled}):e.action?this._bindNamedAction(a,e.action):e.dest?this._bindLink(a,e.dest):e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions?this._bindJSAction(a,e):this._bindLink(a,""),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((h,l)=>{const b=l===0?a:a.cloneNode();return h.appendChild(b),h}):(this.container.className="linkAnnotation",this.container.appendChild(a),this.container)}_bindLink(e,i){e.href=this.linkService.getDestinationHash(i),e.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&(e.className="internalLink")}_bindNamedAction(e,i){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(i),!1),e.className="internalLink"}_bindJSAction(e,i){e.href=this.linkService.getAnchorUrl("");const a=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const h of Object.keys(i.actions)){const l=a.get(h);l&&(e[l]=()=>{var b;return(b=this.linkService.eventBus)==null||b.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:h}}),!1})}e.className="internalLink"}}class f extends m{constructor(e){const i=!!(e.data.hasPopup||e.data.title||e.data.contents);super(e,{isRenderable:i})}render(){this.container.className="textAnnotation";const e=document.createElement("img");return e.style.height=this.container.style.height,e.style.width=this.container.style.width,e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.alt="[{{type}} Annotation]",e.dataset.l10nId="text_annotation_type",e.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(e,this.data),this.container.appendChild(e),this.container}}class E extends m{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(e){return navigator.platform.includes("Win")&&e.ctrlKey||navigator.platform.includes("Mac")&&e.metaKey}_setEventListener(e,i,a,h){i.includes("mouse")?e.addEventListener(i,l=>{var b;(b=this.linkService.eventBus)==null||b.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:h(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):e.addEventListener(i,l=>{var b;(b=this.linkService.eventBus)==null||b.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:l.target.checked}})})}_setEventListeners(e,i,a){var h;for(const[l,b]of i)(b==="Action"||(h=this.data.actions)!=null&&h[b])&&this._setEventListener(e,l,b,a)}_dispatchEventFromSandbox(e,i){const a=(l,b,w)=>{const U=w.detail[l];w.target.style[b]=R.ColorConverters[`${U[0]}_HTML`](U.slice(1))},h={display:l=>{const b=l.detail.display%2===1;l.target.style.visibility=b?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:b,print:l.detail.display===0||l.detail.display===3})},print:l=>{this.annotationStorage.setValue(this.data.id,{print:l.detail.print})},hidden:l=>{l.target.style.visibility=l.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:l.detail.hidden})},focus:l=>{setTimeout(()=>l.target.focus({preventScroll:!1}),0)},userName:l=>{l.target.title=l.detail.userName},readonly:l=>{l.detail.readonly?l.target.setAttribute("readonly",""):l.target.removeAttribute("readonly")},required:l=>{l.detail.required?l.target.setAttribute("required",""):l.target.removeAttribute("required")},bgColor:l=>{a("bgColor","backgroundColor",l)},fillColor:l=>{a("fillColor","backgroundColor",l)},fgColor:l=>{a("fgColor","color",l)},textColor:l=>{a("textColor","color",l)},borderColor:l=>{a("borderColor","borderColor",l)},strokeColor:l=>{a("strokeColor","borderColor",l)}};for(const l of Object.keys(i.detail)){const b=e[l]||h[l];b&&b(i)}}}class D extends E{constructor(e){const i=e.renderInteractiveForms||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:i})}setPropertyOnSiblings(e,i,a,h){const l=this.annotationStorage;for(const b of document.getElementsByName(e.name))if(b!==e){b[i]=a;const w=Object.create(null);w[h]=a,l.setValue(b.getAttribute("id"),w)}}render(){var h;const e=this.annotationStorage,i=this.data.id;this.container.className="textWidgetAnnotation";let a=null;if(this.renderInteractiveForms){const l=e.getValue(i,{value:this.data.fieldValue,valueAsString:this.data.fieldValue}),b=l.valueAsString||l.value||"",w={userValue:null,formattedValue:null,beforeInputSelectionRange:null,beforeInputValue:null};this.data.multiLine?(a=document.createElement("textarea"),a.textContent=b):(a=document.createElement("input"),a.type="text",a.setAttribute("value",b)),w.userValue=b,a.setAttribute("id",i),a.addEventListener("input",G=>{e.setValue(i,{value:G.target.value}),this.setPropertyOnSiblings(a,"value",G.target.value,"value")});let U=G=>{w.formattedValue&&(G.target.value=w.formattedValue),G.target.scrollLeft=0,w.beforeInputSelectionRange=null};if(this.enableScripting&&this.hasJSActions){a.addEventListener("focus",B=>{w.userValue&&(B.target.value=w.userValue)}),a.addEventListener("updatefromsandbox",B=>{const Y={value(J){w.userValue=J.detail.value||"",e.setValue(i,{value:w.userValue.toString()}),w.formattedValue||(J.target.value=w.userValue)},valueAsString(J){w.formattedValue=J.detail.valueAsString||"",J.target!==document.activeElement&&(J.target.value=w.formattedValue),e.setValue(i,{formattedValue:w.formattedValue})},selRange(J){const[Q,te]=J.detail.selRange;Q>=0&&te<J.target.value.length&&J.target.setSelectionRange(Q,te)}};this._dispatchEventFromSandbox(Y,B)}),a.addEventListener("keydown",B=>{var J;w.beforeInputValue=B.target.value;let Y=-1;B.key==="Escape"?Y=0:B.key==="Enter"?Y=2:B.key==="Tab"&&(Y=3),Y!==-1&&(w.userValue=B.target.value,(J=this.linkService.eventBus)==null||J.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:B.target.value,willCommit:!0,commitKey:Y,selStart:B.target.selectionStart,selEnd:B.target.selectionEnd}}))});const G=U;U=null,a.addEventListener("blur",B=>{var Y;this._mouseState.isDown&&(w.userValue=B.target.value,(Y=this.linkService.eventBus)==null||Y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:B.target.value,willCommit:!0,commitKey:1,selStart:B.target.selectionStart,selEnd:B.target.selectionEnd}})),G(B)}),a.addEventListener("mousedown",B=>{w.beforeInputValue=B.target.value,w.beforeInputSelectionRange=null}),a.addEventListener("keyup",B=>{B.target.selectionStart===B.target.selectionEnd&&(w.beforeInputSelectionRange=null)}),a.addEventListener("select",B=>{w.beforeInputSelectionRange=[B.target.selectionStart,B.target.selectionEnd]}),(h=this.data.actions)!=null&&h.Keystroke&&a.addEventListener("input",B=>{var Q;let Y=-1,J=-1;w.beforeInputSelectionRange&&([Y,J]=w.beforeInputSelectionRange),(Q=this.linkService.eventBus)==null||Q.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:w.beforeInputValue,change:B.data,willCommit:!1,selStart:Y,selEnd:J}})}),this._setEventListeners(a,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],B=>B.target.value)}if(U&&a.addEventListener("blur",U),a.disabled=this.data.readOnly,a.name=this.data.fieldName,this.data.maxLen!==null&&(a.maxLength=this.data.maxLen),this.data.comb){const B=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;a.classList.add("comb"),a.style.letterSpacing=`calc(${B}px - 1ch)`}}else a=document.createElement("div"),a.textContent=this.data.fieldValue,a.style.verticalAlign="middle",a.style.display="table-cell";return this._setTextStyle(a),this.container.appendChild(a),this.container}_setTextStyle(e){const i=["left","center","right"],{fontSize:a,fontColor:h}=this.data.defaultAppearanceData,l=e.style;a&&(l.fontSize=`${a}px`),l.color=g.Util.makeHexColor(h[0],h[1],h[2]),this.data.textAlignment!==null&&(l.textAlign=i[this.data.textAlignment])}}class P extends E{constructor(e){super(e,{isRenderable:e.renderInteractiveForms})}render(){const e=this.annotationStorage,i=this.data,a=i.id;let h=e.getValue(a,{value:i.fieldValue&&(i.exportValue&&i.exportValue===i.fieldValue||!i.exportValue&&i.fieldValue!=="Off")}).value;typeof h=="string"&&(h=h!=="Off",e.setValue(a,{value:h})),this.container.className="buttonWidgetAnnotation checkBox";const l=document.createElement("input");return l.disabled=i.readOnly,l.type="checkbox",l.name=this.data.fieldName,h&&l.setAttribute("checked",!0),l.setAttribute("id",a),l.addEventListener("change",function(b){const w=b.target.name;for(const U of document.getElementsByName(w))U!==b.target&&(U.checked=!1,e.setValue(U.parentNode.getAttribute("data-annotation-id"),{value:!1}));e.setValue(a,{value:b.target.checked})}),this.enableScripting&&this.hasJSActions&&(l.addEventListener("updatefromsandbox",b=>{const w={value(U){U.target.checked=U.detail.value!=="Off",e.setValue(a,{value:U.target.checked})}};this._dispatchEventFromSandbox(w,b)}),this._setEventListeners(l,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],b=>b.target.checked)),this.container.appendChild(l),this.container}}class q extends E{constructor(e){super(e,{isRenderable:e.renderInteractiveForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const e=this.annotationStorage,i=this.data,a=i.id;let h=e.getValue(a,{value:i.fieldValue===i.buttonValue}).value;typeof h=="string"&&(h=h!==i.buttonValue,e.setValue(a,{value:h}));const l=document.createElement("input");if(l.disabled=i.readOnly,l.type="radio",l.name=i.fieldName,h&&l.setAttribute("checked",!0),l.setAttribute("id",a),l.addEventListener("change",function(b){const{target:w}=b;for(const U of document.getElementsByName(w.name))U!==w&&e.setValue(U.getAttribute("id"),{value:!1});e.setValue(a,{value:w.checked})}),this.enableScripting&&this.hasJSActions){const b=i.buttonValue;l.addEventListener("updatefromsandbox",w=>{const U={value(G){const B=b===G.detail.value;for(const Y of document.getElementsByName(G.target.name)){const J=Y.getAttribute("id");Y.checked=J===a&&B,e.setValue(J,{value:Y.checked})}}};this._dispatchEventFromSandbox(U,w)}),this._setEventListeners(l,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],w=>w.target.checked)}return this.container.appendChild(l),this.container}}class u extends d{render(){const e=super.render();return e.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(e.title=this.data.alternativeText),e}}class S extends E{constructor(e){super(e,{isRenderable:e.renderInteractiveForms})}render(){this.container.className="choiceWidgetAnnotation";const e=this.annotationStorage,i=this.data.id;e.getValue(i,{value:this.data.fieldValue.length>0?this.data.fieldValue[0]:void 0});const a=document.createElement("select");a.disabled=this.data.readOnly,a.name=this.data.fieldName,a.setAttribute("id",i),this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0));for(const b of this.data.options){const w=document.createElement("option");w.textContent=b.displayValue,w.value=b.exportValue,this.data.fieldValue.includes(b.exportValue)&&w.setAttribute("selected",!0),a.appendChild(w)}const h=(b,w)=>{const U=w?"value":"textContent",G=b.target.options;return b.target.multiple?Array.prototype.filter.call(G,B=>B.selected).map(B=>B[U]):G.selectedIndex===-1?null:G[G.selectedIndex][U]},l=b=>{const w=b.target.options;return Array.prototype.map.call(w,U=>({displayValue:U.textContent,exportValue:U.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",b=>{const w={value(U){const G=a.options,B=U.detail.value,Y=new Set(Array.isArray(B)?B:[B]);Array.prototype.forEach.call(G,J=>{J.selected=Y.has(J.value)}),e.setValue(i,{value:h(U,!0)})},multipleSelection(U){a.multiple=!0},remove(U){const G=a.options,B=U.detail.remove;G[B].selected=!1,a.remove(B),G.length>0&&Array.prototype.findIndex.call(G,J=>J.selected)===-1&&(G[0].selected=!0),e.setValue(i,{value:h(U,!0),items:l(U)})},clear(U){for(;a.length!==0;)a.remove(0);e.setValue(i,{value:null,items:[]})},insert(U){const{index:G,displayValue:B,exportValue:Y}=U.detail.insert,J=document.createElement("option");J.textContent=B,J.value=Y,a.insertBefore(J,a.children[G]),e.setValue(i,{value:h(U,!0),items:l(U)})},items(U){const{items:G}=U.detail;for(;a.length!==0;)a.remove(0);for(const B of G){const{displayValue:Y,exportValue:J}=B,Q=document.createElement("option");Q.textContent=Y,Q.value=J,a.appendChild(Q)}a.options.length>0&&(a.options[0].selected=!0),e.setValue(i,{value:h(U,!0),items:l(U)})},indices(U){const G=new Set(U.detail.indices),B=U.target.options;Array.prototype.forEach.call(B,(Y,J)=>{Y.selected=G.has(J)}),e.setValue(i,{value:h(U,!0)})},editable(U){U.target.disabled=!U.detail.editable}};this._dispatchEventFromSandbox(w,b)}),a.addEventListener("input",b=>{var G;const w=h(b,!0),U=h(b,!1);e.setValue(i,{value:w}),(G=this.linkService.eventBus)==null||G.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:U,changeEx:w,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],b=>b.target.checked)):a.addEventListener("input",function(b){e.setValue(i,{value:h(b)})}),this.container.appendChild(a),this.container}}class I extends m{constructor(e){const i=!!(e.data.title||e.data.contents);super(e,{isRenderable:i})}render(){const e=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",e.includes(this.data.parentType))return this.container;const i=`[data-annotation-id="${this.data.parentId}"]`,a=this.layer.querySelectorAll(i);if(a.length===0)return this.container;const h=new T({container:this.container,trigger:Array.from(a),color:this.data.color,title:this.data.title,modificationDate:this.data.modificationDate,contents:this.data.contents}),l=this.page,b=g.Util.normalizeRect([this.data.parentRect[0],l.view[3]-this.data.parentRect[1]+l.view[1],this.data.parentRect[2],l.view[3]-this.data.parentRect[3]+l.view[1]]),w=b[0]+this.data.parentRect[2]-this.data.parentRect[0],U=b[1];return this.container.style.transformOrigin=`${-w}px ${-U}px`,this.container.style.left=`${w}px`,this.container.style.top=`${U}px`,this.container.appendChild(h.render()),this.container}}class T{constructor(e){this.container=e.container,this.trigger=e.trigger,this.color=e.color,this.title=e.title,this.modificationDate=e.modificationDate,this.contents=e.contents,this.hideWrapper=e.hideWrapper||!1,this.pinned=!1}render(){const i=document.createElement("div");i.className="popupWrapper",this.hideElement=this.hideWrapper?i:this.container,this.hideElement.hidden=!0;const a=document.createElement("div");a.className="popup";const h=this.color;if(h){const U=.7*(255-h[0])+h[0],G=.7*(255-h[1])+h[1],B=.7*(255-h[2])+h[2];a.style.backgroundColor=g.Util.makeHexColor(U|0,G|0,B|0)}const l=document.createElement("h1");l.textContent=this.title,a.appendChild(l);const b=t.PDFDateString.toDateObject(this.modificationDate);if(b){const U=document.createElement("span");U.textContent="{{date}}, {{time}}",U.dataset.l10nId="annotation_date_string",U.dataset.l10nArgs=JSON.stringify({date:b.toLocaleDateString(),time:b.toLocaleTimeString()}),a.appendChild(U)}const w=this._formatContents(this.contents);a.appendChild(w),Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const U of this.trigger)U.addEventListener("click",this._toggle.bind(this)),U.addEventListener("mouseover",this._show.bind(this,!1)),U.addEventListener("mouseout",this._hide.bind(this,!1));return a.addEventListener("click",this._hide.bind(this,!0)),i.appendChild(a),i}_formatContents(e){const i=document.createElement("p"),a=e.split(/(?:\r\n?|\n)/);for(let h=0,l=a.length;h<l;++h){const b=a[h];i.appendChild(document.createTextNode(b)),h<l-1&&i.appendChild(document.createElement("br"))}return i}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(e=!1){e&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex+=1)}_hide(e=!0){e&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex-=1)}}class y extends m{constructor(e){const i=!!(e.data.hasPopup||e.data.title||e.data.contents);super(e,{isRenderable:i,ignoreBorder:!0})}render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class r extends m{constructor(e){const i=!!(e.data.hasPopup||e.data.title||e.data.contents);super(e,{isRenderable:i,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const e=this.data,i=e.rect[2]-e.rect[0],a=e.rect[3]-e.rect[1],h=this.svgFactory.create(i,a),l=this.svgFactory.createElement("svg:line");return l.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),l.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),l.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),l.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),l.setAttribute("stroke-width",e.borderStyle.width||1),l.setAttribute("stroke","transparent"),h.appendChild(l),this.container.append(h),this._createPopup(l,e),this.container}}class s extends m{constructor(e){const i=!!(e.data.hasPopup||e.data.title||e.data.contents);super(e,{isRenderable:i,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const e=this.data,i=e.rect[2]-e.rect[0],a=e.rect[3]-e.rect[1],h=this.svgFactory.create(i,a),l=e.borderStyle.width,b=this.svgFactory.createElement("svg:rect");return b.setAttribute("x",l/2),b.setAttribute("y",l/2),b.setAttribute("width",i-l),b.setAttribute("height",a-l),b.setAttribute("stroke-width",l||1),b.setAttribute("stroke","transparent"),b.setAttribute("fill","none"),h.appendChild(b),this.container.append(h),this._createPopup(b,e),this.container}}class c extends m{constructor(e){const i=!!(e.data.hasPopup||e.data.title||e.data.contents);super(e,{isRenderable:i,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const e=this.data,i=e.rect[2]-e.rect[0],a=e.rect[3]-e.rect[1],h=this.svgFactory.create(i,a),l=e.borderStyle.width,b=this.svgFactory.createElement("svg:ellipse");return b.setAttribute("cx",i/2),b.setAttribute("cy",a/2),b.setAttribute("rx",i/2-l/2),b.setAttribute("ry",a/2-l/2),b.setAttribute("stroke-width",l||1),b.setAttribute("stroke","transparent"),b.setAttribute("fill","none"),h.appendChild(b),this.container.append(h),this._createPopup(b,e),this.container}}class A extends m{constructor(e){const i=!!(e.data.hasPopup||e.data.title||e.data.contents);super(e,{isRenderable:i,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const e=this.data,i=e.rect[2]-e.rect[0],a=e.rect[3]-e.rect[1],h=this.svgFactory.create(i,a);let l=[];for(const w of e.vertices){const U=w.x-e.rect[0],G=e.rect[3]-w.y;l.push(U+","+G)}l=l.join(" ");const b=this.svgFactory.createElement(this.svgElementName);return b.setAttribute("points",l),b.setAttribute("stroke-width",e.borderStyle.width||1),b.setAttribute("stroke","transparent"),b.setAttribute("fill","none"),h.appendChild(b),this.container.append(h),this._createPopup(b,e),this.container}}class p extends A{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class M extends m{constructor(e){const i=!!(e.data.hasPopup||e.data.title||e.data.contents);super(e,{isRenderable:i,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class k extends m{constructor(e){const i=!!(e.data.hasPopup||e.data.title||e.data.contents);super(e,{isRenderable:i,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const e=this.data,i=e.rect[2]-e.rect[0],a=e.rect[3]-e.rect[1],h=this.svgFactory.create(i,a);for(const l of e.inkLists){let b=[];for(const U of l){const G=U.x-e.rect[0],B=e.rect[3]-U.y;b.push(`${G},${B}`)}b=b.join(" ");const w=this.svgFactory.createElement(this.svgElementName);w.setAttribute("points",b),w.setAttribute("stroke-width",e.borderStyle.width||1),w.setAttribute("stroke","transparent"),w.setAttribute("fill","none"),this._createPopup(w,e),h.appendChild(w)}return this.container.append(h),this.container}}class X extends m{constructor(e){const i=!!(e.data.hasPopup||e.data.title||e.data.contents);super(e,{isRenderable:i,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class N extends m{constructor(e){const i=!!(e.data.hasPopup||e.data.title||e.data.contents);super(e,{isRenderable:i,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class v extends m{constructor(e){const i=!!(e.data.hasPopup||e.data.title||e.data.contents);super(e,{isRenderable:i,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class L extends m{constructor(e){const i=!!(e.data.hasPopup||e.data.title||e.data.contents);super(e,{isRenderable:i,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class j extends m{constructor(e){const i=!!(e.data.hasPopup||e.data.title||e.data.contents);super(e,{isRenderable:i,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class $ extends m{constructor(e){var h;super(e,{isRenderable:!0});const{filename:i,content:a}=this.data.file;this.filename=(0,t.getFilenameFromUrl)(i),this.content=a,(h=this.linkService.eventBus)==null||h.dispatch("fileattachmentannotation",{source:this,id:(0,g.stringToPDFString)(i),filename:i,content:a})}render(){this.container.className="fileAttachmentAnnotation";const e=document.createElement("div");return e.style.height=this.container.style.height,e.style.width=this.container.style.width,e.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(this.data.title||this.data.contents)&&this._createPopup(e,this.data),this.container.appendChild(e),this.container}_download(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.container,this.content,this.filename)}}class F{static render(e){const i=[],a=[];for(const h of e.annotations)if(h){if(h.annotationType===g.AnnotationType.POPUP){a.push(h);continue}i.push(h)}a.length&&i.push(...a);for(const h of i){const l=O.create({data:h,layer:e.div,page:e.page,viewport:e.viewport,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderInteractiveForms:e.renderInteractiveForms!==!1,svgFactory:new t.DOMSVGFactory,annotationStorage:e.annotationStorage||new C.AnnotationStorage,enableScripting:e.enableScripting,hasJSActions:e.hasJSActions,mouseState:e.mouseState||{isDown:!1}});if(l.isRenderable){const b=l.render();if(h.hidden&&(b.style.visibility="hidden"),Array.isArray(b))for(const w of b)e.div.appendChild(w);else l instanceof I?e.div.prepend(b):e.div.appendChild(b)}}}static update(e){const i=`matrix(${e.viewport.transform.join(",")})`;for(const a of e.annotations){const h=e.div.querySelectorAll(`[data-annotation-id="${a.id}"]`);if(h)for(const l of h)l.style.transform=i}e.div.hidden=!1}}n.AnnotationLayer=F},(V,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ColorConverters=void 0;function _(g){return Math.floor(Math.max(0,Math.min(1,g))*255).toString(16).padStart(2,"0")}class t{static CMYK_G([C,R,O,m]){return["G",1-Math.min(1,.3*C+.59*O+.11*R+m)]}static G_CMYK([C]){return["CMYK",0,0,0,1-C]}static G_RGB([C]){return["RGB",C,C,C]}static G_HTML([C]){const R=_(C);return`#${R}${R}${R}`}static RGB_G([C,R,O]){return["G",.3*C+.59*R+.11*O]}static RGB_HTML([C,R,O]){const m=_(C),d=_(R),f=_(O);return`#${m}${d}${f}`}static T_HTML(){return"#00000000"}static CMYK_RGB([C,R,O,m]){return["RGB",1-Math.min(1,C+m),1-Math.min(1,O+m),1-Math.min(1,R+m)]}static CMYK_HTML(C){return this.RGB_HTML(this.CMYK_RGB(C))}static RGB_CMYK([C,R,O]){const m=1-C,d=1-R,f=1-O,E=Math.min(m,d,f);return["CMYK",m,d,f,E]}}n.ColorConverters=t},(V,n,_)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.renderTextLayer=I;var t=_(2);const g=1e5,C=30,R=.8,O=new Map,m=/^\s+$/g;function d(T,y){const r=O.get(T);if(r)return r;y.save(),y.font=`${C}px ${T}`;const s=y.measureText("");let c=s.fontBoundingBoxAscent,A=Math.abs(s.fontBoundingBoxDescent);if(c){y.restore();const M=c/(c+A);return O.set(T,M),M}y.strokeStyle="red",y.clearRect(0,0,C,C),y.strokeText("g",0,0);let p=y.getImageData(0,0,C,C).data;A=0;for(let M=p.length-1-3;M>=0;M-=4)if(p[M]>0){A=Math.ceil(M/4/C);break}y.clearRect(0,0,C,C),y.strokeText("A",0,C),p=y.getImageData(0,0,C,C).data,c=0;for(let M=0,k=p.length;M<k;M+=4)if(p[M]>0){c=C-Math.floor(M/4/C);break}if(y.restore(),c){const M=c/(c+A);return O.set(T,M),M}return O.set(T,R),R}function f(T,y,r,s){const c=document.createElement("span"),A={angle:0,canvasWidth:0,hasText:y.str!=="",hasEOL:y.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1};T._textDivs.push(c);const p=t.Util.transform(T._viewport.transform,y.transform);let M=Math.atan2(p[1],p[0]);const k=r[y.fontName];k.vertical&&(M+=Math.PI/2);const X=Math.hypot(p[2],p[3]),N=X*d(k.fontFamily,s);let v,L;M===0?(v=p[4],L=p[5]-N):(v=p[4]+N*Math.sin(M),L=p[5]-N*Math.cos(M)),c.style.left=`${v}px`,c.style.top=`${L}px`,c.style.fontSize=`${X}px`,c.style.fontFamily=k.fontFamily,c.setAttribute("role","presentation"),c.textContent=y.str,c.dir=y.dir,T._fontInspectorEnabled&&(c.dataset.fontName=y.fontName),M!==0&&(A.angle=M*(180/Math.PI));let j=!1;if(y.str.length>1||T._enhanceTextSelection&&m.test(y.str))j=!0;else if(y.transform[0]!==y.transform[3]){const $=Math.abs(y.transform[0]),F=Math.abs(y.transform[3]);$!==F&&Math.max($,F)/Math.min($,F)>1.5&&(j=!0)}if(j&&(k.vertical?A.canvasWidth=y.height*T._viewport.scale:A.canvasWidth=y.width*T._viewport.scale),T._textDivProperties.set(c,A),T._textContentStream&&T._layoutText(c),T._enhanceTextSelection&&A.hasText){let $=1,F=0;M!==0&&($=Math.cos(M),F=Math.sin(M));const o=(k.vertical?y.height:y.width)*T._viewport.scale,e=X;let i,a;M!==0?(i=[$,F,-F,$,v,L],a=t.Util.getAxialAlignedBoundingBox([0,0,o,e],i)):a=[v,L,v+o,L+e],T._bounds.push({left:a[0],top:a[1],right:a[2],bottom:a[3],div:c,size:[o,e],m:i})}}function E(T){if(T._canceled)return;const y=T._textDivs,r=T._capability,s=y.length;if(s>g){T._renderingDone=!0,r.resolve();return}if(!T._textContentStream)for(let c=0;c<s;c++)T._layoutText(y[c]);T._renderingDone=!0,r.resolve()}function D(T,y,r){let s=0;for(let c=0;c<r;c++){const A=T[y++];A>0&&(s=s?Math.min(A,s):A)}return s}function P(T){const y=T._bounds,r=T._viewport,s=q(r.width,r.height,y);for(let c=0;c<s.length;c++){const A=y[c].div,p=T._textDivProperties.get(A);if(p.angle===0){p.paddingLeft=y[c].left-s[c].left,p.paddingTop=y[c].top-s[c].top,p.paddingRight=s[c].right-y[c].right,p.paddingBottom=s[c].bottom-y[c].bottom,T._textDivProperties.set(A,p);continue}const M=s[c],k=y[c],X=k.m,N=X[0],v=X[1],L=[[0,0],[0,k.size[1]],[k.size[0],0],k.size],j=new Float64Array(64);for(let F=0,o=L.length;F<o;F++){const e=t.Util.applyTransform(L[F],X);j[F+0]=N&&(M.left-e[0])/N,j[F+4]=v&&(M.top-e[1])/v,j[F+8]=N&&(M.right-e[0])/N,j[F+12]=v&&(M.bottom-e[1])/v,j[F+16]=v&&(M.left-e[0])/-v,j[F+20]=N&&(M.top-e[1])/N,j[F+24]=v&&(M.right-e[0])/-v,j[F+28]=N&&(M.bottom-e[1])/N,j[F+32]=N&&(M.left-e[0])/-N,j[F+36]=v&&(M.top-e[1])/-v,j[F+40]=N&&(M.right-e[0])/-N,j[F+44]=v&&(M.bottom-e[1])/-v,j[F+48]=v&&(M.left-e[0])/v,j[F+52]=N&&(M.top-e[1])/-N,j[F+56]=v&&(M.right-e[0])/v,j[F+60]=N&&(M.bottom-e[1])/-N}const $=1+Math.min(Math.abs(N),Math.abs(v));p.paddingLeft=D(j,32,16)/$,p.paddingTop=D(j,48,16)/$,p.paddingRight=D(j,0,16)/$,p.paddingBottom=D(j,16,16)/$,T._textDivProperties.set(A,p)}}function q(T,y,r){const s=r.map(function(A,p){return{x1:A.left,y1:A.top,x2:A.right,y2:A.bottom,index:p,x1New:void 0,x2New:void 0}});u(T,s);const c=new Array(r.length);for(const A of s){const p=A.index;c[p]={left:A.x1New,top:0,right:A.x2New,bottom:0}}r.map(function(A,p){const M=c[p],k=s[p];k.x1=A.top,k.y1=T-M.right,k.x2=A.bottom,k.y2=T-M.left,k.index=p,k.x1New=void 0,k.x2New=void 0}),u(y,s);for(const A of s){const p=A.index;c[p].top=A.x1New,c[p].bottom=A.x2New}return c}function u(T,y){y.sort(function(c,A){return c.x1-A.x1||c.index-A.index});const s=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const c of y){let A=0;for(;A<s.length&&s[A].end<=c.y1;)A++;let p=s.length-1;for(;p>=0&&s[p].start>=c.y2;)p--;let M,k,X,N,v=-1/0;for(X=A;X<=p;X++){M=s[X],k=M.boundary;let $;k.x2>c.x1?$=k.index>c.index?k.x1New:c.x1:k.x2New===void 0?$=(k.x2+c.x1)/2:$=k.x2New,$>v&&(v=$)}for(c.x1New=v,X=A;X<=p;X++)M=s[X],k=M.boundary,k.x2New===void 0?k.x2>c.x1?k.index>c.index&&(k.x2New=k.x2):k.x2New=v:k.x2New>v&&(k.x2New=Math.max(v,k.x2));const L=[];let j=null;for(X=A;X<=p;X++){M=s[X],k=M.boundary;const $=k.x2>c.x2?k:c;j===$?L[L.length-1].end=M.end:(L.push({start:M.start,end:M.end,boundary:$}),j=$)}for(s[A].start<c.y1&&(L[0].start=c.y1,L.unshift({start:s[A].start,end:c.y1,boundary:s[A].boundary})),c.y2<s[p].end&&(L[L.length-1].end=c.y2,L.push({start:c.y2,end:s[p].end,boundary:s[p].boundary})),X=A;X<=p;X++){if(M=s[X],k=M.boundary,k.x2New!==void 0)continue;let $=!1;for(N=A-1;!$&&N>=0&&s[N].start>=k.y1;N--)$=s[N].boundary===k;for(N=p+1;!$&&N<s.length&&s[N].end<=k.y2;N++)$=s[N].boundary===k;for(N=0;!$&&N<L.length;N++)$=L[N].boundary===k;$||(k.x2New=v)}Array.prototype.splice.apply(s,[A,p-A+1].concat(L))}for(const c of s){const A=c.boundary;A.x2New===void 0&&(A.x2New=Math.max(T,A.x2))}}class S{constructor({textContent:y,textContentStream:r,container:s,viewport:c,textDivs:A,textContentItemsStr:p,enhanceTextSelection:M}){var k;this._textContent=y,this._textContentStream=r,this._container=s,this._document=s.ownerDocument,this._viewport=c,this._textDivs=A||[],this._textContentItemsStr=p||[],this._enhanceTextSelection=!!M,this._fontInspectorEnabled=!!((k=globalThis.FontInspector)!=null&&k.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,t.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally(()=>{this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new t.AbortException("TextLayer task cancelled.")),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(y,r){for(let s=0,c=y.length;s<c;s++){if(y[s].str===void 0){if(y[s].type==="beginMarkedContentProps"||y[s].type==="beginMarkedContent"){const A=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),y[s].id!==null&&this._container.setAttribute("id",`${y[s].id}`),A.appendChild(this._container)}else y[s].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(y[s].str),f(this,y[s],r,this._layoutTextCtx)}}_layoutText(y){const r=this._textDivProperties.get(y);let s="";if(r.canvasWidth!==0&&r.hasText){const{fontSize:c,fontFamily:A}=y.style;(c!==this._layoutTextLastFontSize||A!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${c} ${A}`,this._layoutTextLastFontSize=c,this._layoutTextLastFontFamily=A);const{width:p}=this._layoutTextCtx.measureText(y.textContent);p>0&&(r.scale=r.canvasWidth/p,s=`scaleX(${r.scale})`)}if(r.angle!==0&&(s=`rotate(${r.angle}deg) ${s}`),s.length>0&&(this._enhanceTextSelection&&(r.originalTransform=s),y.style.transform=s),r.hasText&&this._container.appendChild(y),r.hasEOL){const c=document.createElement("br");c.setAttribute("role","presentation"),this._container.appendChild(c)}}_render(y=0){const r=(0,t.createPromiseCapability)();let s=Object.create(null);const c=this._document.createElement("canvas");if(c.height=c.width=C,c.mozOpaque=!0,this._layoutTextCtx=c.getContext("2d",{alpha:!1}),this._textContent){const A=this._textContent.items,p=this._textContent.styles;this._processItems(A,p),r.resolve()}else if(this._textContentStream){const A=()=>{this._reader.read().then(({value:p,done:M})=>{if(M){r.resolve();return}Object.assign(s,p.styles),this._processItems(p.items,s),A()},r.reject)};this._reader=this._textContentStream.getReader(),A()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');r.promise.then(()=>{s=null,y?this._renderTimer=setTimeout(()=>{E(this),this._renderTimer=null},y):E(this)},this._capability.reject)}expandTextDivs(y=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(P(this),this._bounds=null);const r=[],s=[];for(let c=0,A=this._textDivs.length;c<A;c++){const p=this._textDivs[c],M=this._textDivProperties.get(p);M.hasText&&(y?(r.length=0,s.length=0,M.originalTransform&&r.push(M.originalTransform),M.paddingTop>0?(s.push(`${M.paddingTop}px`),r.push(`translateY(${-M.paddingTop}px)`)):s.push(0),M.paddingRight>0?s.push(`${M.paddingRight/M.scale}px`):s.push(0),M.paddingBottom>0?s.push(`${M.paddingBottom}px`):s.push(0),M.paddingLeft>0?(s.push(`${M.paddingLeft/M.scale}px`),r.push(`translateX(${-M.paddingLeft/M.scale}px)`)):s.push(0),p.style.padding=s.join(" "),r.length&&(p.style.transform=r.join(" "))):(p.style.padding=null,p.style.transform=M.originalTransform))}}}function I(T){const y=new S({textContent:T.textContent,textContentStream:T.textContentStream,container:T.container,viewport:T.viewport,textDivs:T.textDivs,textContentItemsStr:T.textContentItemsStr,enhanceTextSelection:T.enhanceTextSelection});return y._render(T.timeout),y}},(V,n,_)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.SVGGraphics=void 0;var t=_(2),g=_(1),C=_(4);let R=class{constructor(){(0,t.unreachable)("Not implemented: SVGGraphics")}};n.SVGGraphics=R;{let q=function(r){let s=[];const c=[];for(const A of r){if(A.fn==="save"){s.push({fnId:92,fn:"group",items:[]}),c.push(s),s=s[s.length-1].items;continue}A.fn==="restore"?s=c.pop():s.push(A)}return s},u=function(r){if(Number.isInteger(r))return r.toString();const s=r.toFixed(10);let c=s.length-1;if(s[c]!=="0")return s;do c--;while(s[c]==="0");return s.substring(0,s[c]==="."?c:c+1)},S=function(r){if(r[4]===0&&r[5]===0){if(r[1]===0&&r[2]===0)return r[0]===1&&r[3]===1?"":`scale(${u(r[0])} ${u(r[3])})`;if(r[0]===r[3]&&r[1]===-r[2]){const s=Math.acos(r[0])*180/Math.PI;return`rotate(${u(s)})`}}else if(r[0]===1&&r[1]===0&&r[2]===0&&r[3]===1)return`translate(${u(r[4])} ${u(r[5])})`;return`matrix(${u(r[0])} ${u(r[1])} ${u(r[2])} ${u(r[3])} ${u(r[4])} ${u(r[5])})`};const O={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},m="http://www.w3.org/XML/1998/namespace",d="http://www.w3.org/1999/xlink",f=["butt","round","square"],E=["miter","round","bevel"],D=function(){const r=new Uint8Array([137,80,78,71,13,10,26,10]),s=12,c=new Int32Array(256);for(let v=0;v<256;v++){let L=v;for(let j=0;j<8;j++)L&1?L=3988292384^L>>1&2147483647:L=L>>1&2147483647;c[v]=L}function A(v,L,j){let $=-1;for(let F=L;F<j;F++){const o=($^v[F])&255,e=c[o];$=$>>>8^e}return $^-1}function p(v,L,j,$){let F=$;const o=L.length;j[F]=o>>24&255,j[F+1]=o>>16&255,j[F+2]=o>>8&255,j[F+3]=o&255,F+=4,j[F]=v.charCodeAt(0)&255,j[F+1]=v.charCodeAt(1)&255,j[F+2]=v.charCodeAt(2)&255,j[F+3]=v.charCodeAt(3)&255,F+=4,j.set(L,F),F+=L.length;const e=A(j,$+4,F);j[F]=e>>24&255,j[F+1]=e>>16&255,j[F+2]=e>>8&255,j[F+3]=e&255}function M(v,L,j){let $=1,F=0;for(let o=L;o<j;++o)$=($+(v[o]&255))%65521,F=(F+$)%65521;return F<<16|$}function k(v){if(!C.isNodeJS)return X(v);try{let L;parseInt(process.versions.node)>=8?L=v:L=Buffer.from(v);const j=require$$5.deflateSync(L,{level:9});return j instanceof Uint8Array?j:new Uint8Array(j)}catch(L){(0,t.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+L)}return X(v)}function X(v){let L=v.length;const j=65535,$=Math.ceil(L/j),F=new Uint8Array(2+L+$*5+4);let o=0;F[o++]=120,F[o++]=156;let e=0;for(;L>j;)F[o++]=0,F[o++]=255,F[o++]=255,F[o++]=0,F[o++]=0,F.set(v.subarray(e,e+j),o),o+=j,e+=j,L-=j;F[o++]=1,F[o++]=L&255,F[o++]=L>>8&255,F[o++]=~L&65535&255,F[o++]=(~L&65535)>>8&255,F.set(v.subarray(e),o),o+=v.length-e;const i=M(v,0,v.length);return F[o++]=i>>24&255,F[o++]=i>>16&255,F[o++]=i>>8&255,F[o++]=i&255,F}function N(v,L,j,$){const F=v.width,o=v.height;let e,i,a;const h=v.data;switch(L){case t.ImageKind.GRAYSCALE_1BPP:i=0,e=1,a=F+7>>3;break;case t.ImageKind.RGB_24BPP:i=2,e=8,a=F*3;break;case t.ImageKind.RGBA_32BPP:i=6,e=8,a=F*4;break;default:throw new Error("invalid format")}const l=new Uint8Array((1+a)*o);let b=0,w=0;for(let Q=0;Q<o;++Q)l[b++]=0,l.set(h.subarray(w,w+a),b),w+=a,b+=a;if(L===t.ImageKind.GRAYSCALE_1BPP&&$){b=0;for(let Q=0;Q<o;Q++){b++;for(let te=0;te<a;te++)l[b++]^=255}}const U=new Uint8Array([F>>24&255,F>>16&255,F>>8&255,F&255,o>>24&255,o>>16&255,o>>8&255,o&255,e,i,0,0,0]),G=k(l),B=r.length+s*3+U.length+G.length,Y=new Uint8Array(B);let J=0;return Y.set(r,J),J+=r.length,p("IHDR",U,Y,J),J+=s+U.length,p("IDATA",G,Y,J),J+=s+G.length,p("IEND",new Uint8Array(0),Y,J),(0,t.createObjectURL)(Y,"image/png",j)}return function(L,j,$){const F=L.kind===void 0?t.ImageKind.GRAYSCALE_1BPP:L.kind;return N(L,F,j,$)}}();class P{constructor(){this.fontSizeScale=1,this.fontWeight=O.fontWeight,this.fontSize=0,this.textMatrix=t.IDENTITY_MATRIX,this.fontMatrix=t.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=t.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=O.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(s,c){this.x=s,this.y=c}}let I=0,T=0,y=0;n.SVGGraphics=R=class{constructor(r,s,c=!1){this.svgFactory=new g.DOMSVGFactory,this.current=new P,this.transformMatrix=t.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=r,this.objs=s,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!c,this._operatorIdMapping=[];for(const A in t.OPS)this._operatorIdMapping[t.OPS[A]]=A}save(){this.transformStack.push(this.transformMatrix);const r=this.current;this.extraStack.push(r),this.current=r.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(r){this.save(),this.executeOpTree(r),this.restore()}loadDependencies(r){const s=r.fnArray,c=r.argsArray;for(let A=0,p=s.length;A<p;A++)if(s[A]===t.OPS.dependency)for(const M of c[A]){const k=M.startsWith("g_")?this.commonObjs:this.objs,X=new Promise(N=>{k.get(M,N)});this.current.dependencies.push(X)}return Promise.all(this.current.dependencies)}transform(r,s,c,A,p,M){const k=[r,s,c,A,p,M];this.transformMatrix=t.Util.transform(this.transformMatrix,k),this.tgrp=null}getSVG(r,s){this.viewport=s;const c=this._initialize(s);return this.loadDependencies(r).then(()=>(this.transformMatrix=t.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(r)),c))}convertOpList(r){const s=this._operatorIdMapping,c=r.argsArray,A=r.fnArray,p=[];for(let M=0,k=A.length;M<k;M++){const X=A[M];p.push({fnId:X,fn:s[X],args:c[M]})}return q(p)}executeOpTree(r){for(const s of r){const c=s.fn,A=s.fnId,p=s.args;switch(A|0){case t.OPS.beginText:this.beginText();break;case t.OPS.dependency:break;case t.OPS.setLeading:this.setLeading(p);break;case t.OPS.setLeadingMoveText:this.setLeadingMoveText(p[0],p[1]);break;case t.OPS.setFont:this.setFont(p);break;case t.OPS.showText:this.showText(p[0]);break;case t.OPS.showSpacedText:this.showText(p[0]);break;case t.OPS.endText:this.endText();break;case t.OPS.moveText:this.moveText(p[0],p[1]);break;case t.OPS.setCharSpacing:this.setCharSpacing(p[0]);break;case t.OPS.setWordSpacing:this.setWordSpacing(p[0]);break;case t.OPS.setHScale:this.setHScale(p[0]);break;case t.OPS.setTextMatrix:this.setTextMatrix(p[0],p[1],p[2],p[3],p[4],p[5]);break;case t.OPS.setTextRise:this.setTextRise(p[0]);break;case t.OPS.setTextRenderingMode:this.setTextRenderingMode(p[0]);break;case t.OPS.setLineWidth:this.setLineWidth(p[0]);break;case t.OPS.setLineJoin:this.setLineJoin(p[0]);break;case t.OPS.setLineCap:this.setLineCap(p[0]);break;case t.OPS.setMiterLimit:this.setMiterLimit(p[0]);break;case t.OPS.setFillRGBColor:this.setFillRGBColor(p[0],p[1],p[2]);break;case t.OPS.setStrokeRGBColor:this.setStrokeRGBColor(p[0],p[1],p[2]);break;case t.OPS.setStrokeColorN:this.setStrokeColorN(p);break;case t.OPS.setFillColorN:this.setFillColorN(p);break;case t.OPS.shadingFill:this.shadingFill(p[0]);break;case t.OPS.setDash:this.setDash(p[0],p[1]);break;case t.OPS.setRenderingIntent:this.setRenderingIntent(p[0]);break;case t.OPS.setFlatness:this.setFlatness(p[0]);break;case t.OPS.setGState:this.setGState(p[0]);break;case t.OPS.fill:this.fill();break;case t.OPS.eoFill:this.eoFill();break;case t.OPS.stroke:this.stroke();break;case t.OPS.fillStroke:this.fillStroke();break;case t.OPS.eoFillStroke:this.eoFillStroke();break;case t.OPS.clip:this.clip("nonzero");break;case t.OPS.eoClip:this.clip("evenodd");break;case t.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case t.OPS.paintImageXObject:this.paintImageXObject(p[0]);break;case t.OPS.paintInlineImageXObject:this.paintInlineImageXObject(p[0]);break;case t.OPS.paintImageMaskXObject:this.paintImageMaskXObject(p[0]);break;case t.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(p[0],p[1]);break;case t.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case t.OPS.closePath:this.closePath();break;case t.OPS.closeStroke:this.closeStroke();break;case t.OPS.closeFillStroke:this.closeFillStroke();break;case t.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case t.OPS.nextLine:this.nextLine();break;case t.OPS.transform:this.transform(p[0],p[1],p[2],p[3],p[4],p[5]);break;case t.OPS.constructPath:this.constructPath(p[0],p[1]);break;case t.OPS.endPath:this.endPath();break;case 92:this.group(s.items);break;default:(0,t.warn)(`Unimplemented operator ${c}`);break}}}setWordSpacing(r){this.current.wordSpacing=r}setCharSpacing(r){this.current.charSpacing=r}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(r,s,c,A,p,M){const k=this.current;k.textMatrix=k.lineMatrix=[r,s,c,A,p,M],k.textMatrixScale=Math.hypot(r,s),k.x=k.lineX=0,k.y=k.lineY=0,k.xcoords=[],k.ycoords=[],k.tspan=this.svgFactory.createElement("svg:tspan"),k.tspan.setAttributeNS(null,"font-family",k.fontFamily),k.tspan.setAttributeNS(null,"font-size",`${u(k.fontSize)}px`),k.tspan.setAttributeNS(null,"y",u(-k.y)),k.txtElement=this.svgFactory.createElement("svg:text"),k.txtElement.appendChild(k.tspan)}beginText(){const r=this.current;r.x=r.lineX=0,r.y=r.lineY=0,r.textMatrix=t.IDENTITY_MATRIX,r.lineMatrix=t.IDENTITY_MATRIX,r.textMatrixScale=1,r.tspan=this.svgFactory.createElement("svg:tspan"),r.txtElement=this.svgFactory.createElement("svg:text"),r.txtgrp=this.svgFactory.createElement("svg:g"),r.xcoords=[],r.ycoords=[]}moveText(r,s){const c=this.current;c.x=c.lineX+=r,c.y=c.lineY+=s,c.xcoords=[],c.ycoords=[],c.tspan=this.svgFactory.createElement("svg:tspan"),c.tspan.setAttributeNS(null,"font-family",c.fontFamily),c.tspan.setAttributeNS(null,"font-size",`${u(c.fontSize)}px`),c.tspan.setAttributeNS(null,"y",u(-c.y))}showText(r){const s=this.current,c=s.font,A=s.fontSize;if(A===0)return;const p=s.fontSizeScale,M=s.charSpacing,k=s.wordSpacing,X=s.fontDirection,N=s.textHScale*X,v=c.vertical,L=v?1:-1,j=c.defaultVMetrics,$=A*s.fontMatrix[0];let F=0;for(const i of r){if(i===null){F+=X*k;continue}else if((0,t.isNum)(i)){F+=L*i*A/1e3;continue}const a=(i.isSpace?k:0)+M,h=i.fontChar;let l,b,w=i.width;if(v){let G;const B=i.vmetric||j;G=i.vmetric?B[1]:w*.5,G=-G*$;const Y=B[2]*$;w=B?-B[0]:w,l=G/p,b=(F+Y)/p}else l=F/p,b=0;(i.isInFont||c.missingFile)&&(s.xcoords.push(s.x+l),v&&s.ycoords.push(-s.y+b),s.tspan.textContent+=h);let U;v?U=w*$-a*X:U=w*$+a*X,F+=U}s.tspan.setAttributeNS(null,"x",s.xcoords.map(u).join(" ")),v?s.tspan.setAttributeNS(null,"y",s.ycoords.map(u).join(" ")):s.tspan.setAttributeNS(null,"y",u(-s.y)),v?s.y-=F:s.x+=F*N,s.tspan.setAttributeNS(null,"font-family",s.fontFamily),s.tspan.setAttributeNS(null,"font-size",`${u(s.fontSize)}px`),s.fontStyle!==O.fontStyle&&s.tspan.setAttributeNS(null,"font-style",s.fontStyle),s.fontWeight!==O.fontWeight&&s.tspan.setAttributeNS(null,"font-weight",s.fontWeight);const o=s.textRenderingMode&t.TextRenderingMode.FILL_STROKE_MASK;if(o===t.TextRenderingMode.FILL||o===t.TextRenderingMode.FILL_STROKE?(s.fillColor!==O.fillColor&&s.tspan.setAttributeNS(null,"fill",s.fillColor),s.fillAlpha<1&&s.tspan.setAttributeNS(null,"fill-opacity",s.fillAlpha)):s.textRenderingMode===t.TextRenderingMode.ADD_TO_PATH?s.tspan.setAttributeNS(null,"fill","transparent"):s.tspan.setAttributeNS(null,"fill","none"),o===t.TextRenderingMode.STROKE||o===t.TextRenderingMode.FILL_STROKE){const i=1/(s.textMatrixScale||1);this._setStrokeAttributes(s.tspan,i)}let e=s.textMatrix;s.textRise!==0&&(e=e.slice(),e[5]+=s.textRise),s.txtElement.setAttributeNS(null,"transform",`${S(e)} scale(${u(N)}, -1)`),s.txtElement.setAttributeNS(m,"xml:space","preserve"),s.txtElement.appendChild(s.tspan),s.txtgrp.appendChild(s.txtElement),this._ensureTransformGroup().appendChild(s.txtElement)}setLeadingMoveText(r,s){this.setLeading(-s),this.moveText(r,s)}addFontStyle(r){if(!r.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));const s=(0,t.createObjectURL)(r.data,r.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${r.loadedName}"; src: url(${s}); }
`}setFont(r){const s=this.current,c=this.commonObjs.get(r[0]);let A=r[1];s.font=c,this.embedFonts&&!c.missingFile&&!this.embeddedFonts[c.loadedName]&&(this.addFontStyle(c),this.embeddedFonts[c.loadedName]=c),s.fontMatrix=c.fontMatrix||t.FONT_IDENTITY_MATRIX;let p="normal";c.black?p="900":c.bold&&(p="bold");const M=c.italic?"italic":"normal";A<0?(A=-A,s.fontDirection=-1):s.fontDirection=1,s.fontSize=A,s.fontFamily=c.loadedName,s.fontWeight=p,s.fontStyle=M,s.tspan=this.svgFactory.createElement("svg:tspan"),s.tspan.setAttributeNS(null,"y",u(-s.y)),s.xcoords=[],s.ycoords=[]}endText(){var s;const r=this.current;r.textRenderingMode&t.TextRenderingMode.ADD_TO_PATH_FLAG&&((s=r.txtElement)!=null&&s.hasChildNodes())&&(r.element=r.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(r){r>0&&(this.current.lineWidth=r)}setLineCap(r){this.current.lineCap=f[r]}setLineJoin(r){this.current.lineJoin=E[r]}setMiterLimit(r){this.current.miterLimit=r}setStrokeAlpha(r){this.current.strokeAlpha=r}setStrokeRGBColor(r,s,c){this.current.strokeColor=t.Util.makeHexColor(r,s,c)}setFillAlpha(r){this.current.fillAlpha=r}setFillRGBColor(r,s,c){this.current.fillColor=t.Util.makeHexColor(r,s,c),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(r){this.current.strokeColor=this._makeColorN_Pattern(r)}setFillColorN(r){this.current.fillColor=this._makeColorN_Pattern(r)}shadingFill(r){const s=this.viewport.width,c=this.viewport.height,A=t.Util.inverseTransform(this.transformMatrix),p=t.Util.applyTransform([0,0],A),M=t.Util.applyTransform([0,c],A),k=t.Util.applyTransform([s,0],A),X=t.Util.applyTransform([s,c],A),N=Math.min(p[0],M[0],k[0],X[0]),v=Math.min(p[1],M[1],k[1],X[1]),L=Math.max(p[0],M[0],k[0],X[0]),j=Math.max(p[1],M[1],k[1],X[1]),$=this.svgFactory.createElement("svg:rect");$.setAttributeNS(null,"x",N),$.setAttributeNS(null,"y",v),$.setAttributeNS(null,"width",L-N),$.setAttributeNS(null,"height",j-v),$.setAttributeNS(null,"fill",this._makeShadingPattern(r)),this.current.fillAlpha<1&&$.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild($)}_makeColorN_Pattern(r){return r[0]==="TilingPattern"?this._makeTilingPattern(r):this._makeShadingPattern(r)}_makeTilingPattern(r){const s=r[1],c=r[2],A=r[3]||t.IDENTITY_MATRIX,[p,M,k,X]=r[4],N=r[5],v=r[6],L=r[7],j=`shading${y++}`,[$,F,o,e]=t.Util.normalizeRect([...t.Util.applyTransform([p,M],A),...t.Util.applyTransform([k,X],A)]),[i,a]=t.Util.singularValueDecompose2dScale(A),h=N*i,l=v*a,b=this.svgFactory.createElement("svg:pattern");b.setAttributeNS(null,"id",j),b.setAttributeNS(null,"patternUnits","userSpaceOnUse"),b.setAttributeNS(null,"width",h),b.setAttributeNS(null,"height",l),b.setAttributeNS(null,"x",`${$}`),b.setAttributeNS(null,"y",`${F}`);const w=this.svg,U=this.transformMatrix,G=this.current.fillColor,B=this.current.strokeColor,Y=this.svgFactory.create(o-$,e-F);if(this.svg=Y,this.transformMatrix=A,L===2){const J=t.Util.makeHexColor(...s);this.current.fillColor=J,this.current.strokeColor=J}return this.executeOpTree(this.convertOpList(c)),this.svg=w,this.transformMatrix=U,this.current.fillColor=G,this.current.strokeColor=B,b.appendChild(Y.childNodes[0]),this.defs.appendChild(b),`url(#${j})`}_makeShadingPattern(r){switch(r[0]){case"RadialAxial":const s=`shading${y++}`,c=r[3];let A;switch(r[1]){case"axial":const p=r[4],M=r[5];A=this.svgFactory.createElement("svg:linearGradient"),A.setAttributeNS(null,"id",s),A.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),A.setAttributeNS(null,"x1",p[0]),A.setAttributeNS(null,"y1",p[1]),A.setAttributeNS(null,"x2",M[0]),A.setAttributeNS(null,"y2",M[1]);break;case"radial":const k=r[4],X=r[5],N=r[6],v=r[7];A=this.svgFactory.createElement("svg:radialGradient"),A.setAttributeNS(null,"id",s),A.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),A.setAttributeNS(null,"cx",X[0]),A.setAttributeNS(null,"cy",X[1]),A.setAttributeNS(null,"r",v),A.setAttributeNS(null,"fx",k[0]),A.setAttributeNS(null,"fy",k[1]),A.setAttributeNS(null,"fr",N);break;default:throw new Error(`Unknown RadialAxial type: ${r[1]}`)}for(const p of c){const M=this.svgFactory.createElement("svg:stop");M.setAttributeNS(null,"offset",p[0]),M.setAttributeNS(null,"stop-color",p[1]),A.appendChild(M)}return this.defs.appendChild(A),`url(#${s})`;case"Mesh":return(0,t.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${r[0]}`)}}setDash(r,s){this.current.dashArray=r,this.current.dashPhase=s}constructPath(r,s){const c=this.current;let A=c.x,p=c.y,M=[],k=0;for(const X of r)switch(X|0){case t.OPS.rectangle:A=s[k++],p=s[k++];const N=s[k++],v=s[k++],L=A+N,j=p+v;M.push("M",u(A),u(p),"L",u(L),u(p),"L",u(L),u(j),"L",u(A),u(j),"Z");break;case t.OPS.moveTo:A=s[k++],p=s[k++],M.push("M",u(A),u(p));break;case t.OPS.lineTo:A=s[k++],p=s[k++],M.push("L",u(A),u(p));break;case t.OPS.curveTo:A=s[k+4],p=s[k+5],M.push("C",u(s[k]),u(s[k+1]),u(s[k+2]),u(s[k+3]),u(A),u(p)),k+=6;break;case t.OPS.curveTo2:M.push("C",u(A),u(p),u(s[k]),u(s[k+1]),u(s[k+2]),u(s[k+3])),A=s[k+2],p=s[k+3],k+=4;break;case t.OPS.curveTo3:A=s[k+2],p=s[k+3],M.push("C",u(s[k]),u(s[k+1]),u(A),u(p),u(A),u(p)),k+=4;break;case t.OPS.closePath:M.push("Z");break}M=M.join(" "),c.path&&r.length>0&&r[0]!==t.OPS.rectangle&&r[0]!==t.OPS.moveTo?M=c.path.getAttributeNS(null,"d")+M:(c.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(c.path)),c.path.setAttributeNS(null,"d",M),c.path.setAttributeNS(null,"fill","none"),c.element=c.path,c.setCurrentPoint(A,p)}endPath(){const r=this.current;if(r.path=null,!this.pendingClip)return;if(!r.element){this.pendingClip=null;return}const s=`clippath${I++}`,c=this.svgFactory.createElement("svg:clipPath");c.setAttributeNS(null,"id",s),c.setAttributeNS(null,"transform",S(this.transformMatrix));const A=r.element.cloneNode(!0);if(this.pendingClip==="evenodd"?A.setAttributeNS(null,"clip-rule","evenodd"):A.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,c.appendChild(A),this.defs.appendChild(c),r.activeClipUrl){r.clipGroup=null;for(const p of this.extraStack)p.clipGroup=null;c.setAttributeNS(null,"clip-path",r.activeClipUrl)}r.activeClipUrl=`url(#${s})`,this.tgrp=null}clip(r){this.pendingClip=r}closePath(){const r=this.current;if(r.path){const s=`${r.path.getAttributeNS(null,"d")}Z`;r.path.setAttributeNS(null,"d",s)}}setLeading(r){this.current.leading=-r}setTextRise(r){this.current.textRise=r}setTextRenderingMode(r){this.current.textRenderingMode=r}setHScale(r){this.current.textHScale=r/100}setRenderingIntent(r){}setFlatness(r){}setGState(r){for(const[s,c]of r)switch(s){case"LW":this.setLineWidth(c);break;case"LC":this.setLineCap(c);break;case"LJ":this.setLineJoin(c);break;case"ML":this.setMiterLimit(c);break;case"D":this.setDash(c[0],c[1]);break;case"RI":this.setRenderingIntent(c);break;case"FL":this.setFlatness(c);break;case"Font":this.setFont(c);break;case"CA":this.setStrokeAlpha(c);break;case"ca":this.setFillAlpha(c);break;default:(0,t.warn)(`Unimplemented graphic state operator ${s}`);break}}fill(){const r=this.current;r.element&&(r.element.setAttributeNS(null,"fill",r.fillColor),r.element.setAttributeNS(null,"fill-opacity",r.fillAlpha),this.endPath())}stroke(){const r=this.current;r.element&&(this._setStrokeAttributes(r.element),r.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(r,s=1){const c=this.current;let A=c.dashArray;s!==1&&A.length>0&&(A=A.map(function(p){return s*p})),r.setAttributeNS(null,"stroke",c.strokeColor),r.setAttributeNS(null,"stroke-opacity",c.strokeAlpha),r.setAttributeNS(null,"stroke-miterlimit",u(c.miterLimit)),r.setAttributeNS(null,"stroke-linecap",c.lineCap),r.setAttributeNS(null,"stroke-linejoin",c.lineJoin),r.setAttributeNS(null,"stroke-width",u(s*c.lineWidth)+"px"),r.setAttributeNS(null,"stroke-dasharray",A.map(u).join(" ")),r.setAttributeNS(null,"stroke-dashoffset",u(s*c.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const r=this.svgFactory.createElement("svg:rect");r.setAttributeNS(null,"x","0"),r.setAttributeNS(null,"y","0"),r.setAttributeNS(null,"width","1px"),r.setAttributeNS(null,"height","1px"),r.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(r)}paintImageXObject(r){const s=r.startsWith("g_")?this.commonObjs.get(r):this.objs.get(r);if(!s){(0,t.warn)(`Dependent image with object ID ${r} is not ready yet`);return}this.paintInlineImageXObject(s)}paintInlineImageXObject(r,s){const c=r.width,A=r.height,p=D(r,this.forceDataSchema,!!s),M=this.svgFactory.createElement("svg:rect");M.setAttributeNS(null,"x","0"),M.setAttributeNS(null,"y","0"),M.setAttributeNS(null,"width",u(c)),M.setAttributeNS(null,"height",u(A)),this.current.element=M,this.clip("nonzero");const k=this.svgFactory.createElement("svg:image");k.setAttributeNS(d,"xlink:href",p),k.setAttributeNS(null,"x","0"),k.setAttributeNS(null,"y",u(-A)),k.setAttributeNS(null,"width",u(c)+"px"),k.setAttributeNS(null,"height",u(A)+"px"),k.setAttributeNS(null,"transform",`scale(${u(1/c)} ${u(-1/A)})`),s?s.appendChild(k):this._ensureTransformGroup().appendChild(k)}paintImageMaskXObject(r){const s=this.current,c=r.width,A=r.height,p=s.fillColor;s.maskId=`mask${T++}`;const M=this.svgFactory.createElement("svg:mask");M.setAttributeNS(null,"id",s.maskId);const k=this.svgFactory.createElement("svg:rect");k.setAttributeNS(null,"x","0"),k.setAttributeNS(null,"y","0"),k.setAttributeNS(null,"width",u(c)),k.setAttributeNS(null,"height",u(A)),k.setAttributeNS(null,"fill",p),k.setAttributeNS(null,"mask",`url(#${s.maskId})`),this.defs.appendChild(M),this._ensureTransformGroup().appendChild(k),this.paintInlineImageXObject(r,M)}paintFormXObjectBegin(r,s){if(Array.isArray(r)&&r.length===6&&this.transform(r[0],r[1],r[2],r[3],r[4],r[5]),s){const c=s[2]-s[0],A=s[3]-s[1],p=this.svgFactory.createElement("svg:rect");p.setAttributeNS(null,"x",s[0]),p.setAttributeNS(null,"y",s[1]),p.setAttributeNS(null,"width",u(c)),p.setAttributeNS(null,"height",u(A)),this.current.element=p,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(r){const s=this.svgFactory.create(r.width,r.height),c=this.svgFactory.createElement("svg:defs");s.appendChild(c),this.defs=c;const A=this.svgFactory.createElement("svg:g");return A.setAttributeNS(null,"transform",S(r.transform)),s.appendChild(A),this.svg=A,s}_ensureClipGroup(){if(!this.current.clipGroup){const r=this.svgFactory.createElement("svg:g");r.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(r),this.current.clipGroup=r}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",S(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}}},(V,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.XfaLayer=void 0;class _{static setupStorage(g,C,R,O,m){const d=O.getValue(C,{value:null});switch(R.name){case"textarea":if(d.value!==null&&(g.textContent=d.value),m==="print")break;g.addEventListener("input",f=>{O.setValue(C,{value:f.target.value})});break;case"input":if(R.attributes.type==="radio"||R.attributes.type==="checkbox"){if(d.value===R.attributes.xfaOn&&g.setAttribute("checked",!0),m==="print")break;g.addEventListener("change",f=>{O.setValue(C,{value:f.target.getAttribute("xfaOn")})})}else{if(d.value!==null&&g.setAttribute("value",d.value),m==="print")break;g.addEventListener("input",f=>{O.setValue(C,{value:f.target.value})})}break;case"select":if(d.value!==null)for(const f of R.children)f.attributes.value===d.value&&(f.attributes.selected=!0);g.addEventListener("input",f=>{const E=f.target.options,D=E.selectedIndex===-1?"":E[E.selectedIndex].value;O.setValue(C,{value:D})});break}}static setAttributes(g,C,R,O){const{attributes:m}=C;m.type==="radio"&&(m.name=`${m.name}-${O}`);for(const[d,f]of Object.entries(m))f==null||d==="dataId"||(d!=="style"?d==="textContent"?g.textContent=f:d==="class"?g.setAttribute(d,f.join(" ")):g.setAttribute(d,f):Object.assign(g.style,f));R&&m.dataId&&this.setupStorage(g,m.dataId,C,R)}static render(g){var D;const C=g.annotationStorage,R=g.xfa,O=g.intent||"display",m=document.createElement(R.name);R.attributes&&this.setAttributes(m,R);const d=[[R,-1,m]],f=g.div;f.appendChild(m);const E=`matrix(${g.viewport.transform.join(",")})`;for(f.style.transform=E,f.setAttribute("class","xfaLayer xfaFont");d.length>0;){const[P,q,u]=d[d.length-1];if(q+1===P.children.length){d.pop();continue}const S=P.children[++d[d.length-1][1]];if(S===null)continue;const{name:I}=S;if(I==="#text"){u.appendChild(document.createTextNode(S.value));continue}let T;(D=S==null?void 0:S.attributes)!=null&&D.xmlns?T=document.createElementNS(S.attributes.xmlns,I):T=document.createElement(I),u.appendChild(T),S.attributes&&this.setAttributes(T,S,C,O),S.children&&S.children.length>0?d.push([S,-1,T]):S.value&&T.appendChild(document.createTextNode(S.value))}for(const P of f.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))P.setAttribute("readOnly",!0)}static update(g){const C=`matrix(${g.viewport.transform.join(",")})`;g.div.style.transform=C,g.div.hidden=!1}}n.XfaLayer=_},(V,n,_)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.PDFNodeStream=void 0;var t=_(2),g=_(23);const C=require$$5,R=require$$5,O=require$$5,m=require$$5,d=/^file:\/\/\/[a-zA-Z]:\//;function f(y){const r=m.parse(y);return r.protocol==="file:"||r.host?r:/^[a-z]:[/\\]/i.test(y)?m.parse(`file:///${y}`):(r.host||(r.protocol="file:"),r)}class E{constructor(r){this.source=r,this.url=f(r.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&r.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var r;return((r=this._fullRequestReader)==null?void 0:r._loaded)??0}getFullReader(){return(0,t.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new I(this):new u(this),this._fullRequestReader}getRangeReader(r,s){if(s<=this._progressiveDataLength)return null;const c=this.isFsUrl?new T(this,r,s):new S(this,r,s);return this._rangeRequestReaders.push(c),c}cancelAllRequests(r){this._fullRequestReader&&this._fullRequestReader.cancel(r);for(const s of this._rangeRequestReaders.slice(0))s.cancel(r)}}n.PDFNodeStream=E;class D{constructor(r){this._url=r.url,this._done=!1,this._storedError=null,this.onProgress=null;const s=r.source;this._contentLength=s.length,this._loaded=0,this._filename=null,this._disableRange=s.disableRange||!1,this._rangeChunkSize=s.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!s.disableStream,this._isRangeSupported=!s.disableRange,this._readableStream=null,this._readCapability=(0,t.createPromiseCapability)(),this._headersCapability=(0,t.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const r=this._readableStream.read();return r===null?(this._readCapability=(0,t.createPromiseCapability)(),this.read()):(this._loaded+=r.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(r).buffer,done:!1})}cancel(r){if(!this._readableStream){this._error(r);return}this._readableStream.destroy(r)}_error(r){this._storedError=r,this._readCapability.resolve()}_setReadableStream(r){this._readableStream=r,r.on("readable",()=>{this._readCapability.resolve()}),r.on("end",()=>{r.destroy(),this._done=!0,this._readCapability.resolve()}),r.on("error",s=>{this._error(s)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new t.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class P{constructor(r){this._url=r.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,t.createPromiseCapability)();const s=r.source;this._isStreamingSupported=!s.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const r=this._readableStream.read();return r===null?(this._readCapability=(0,t.createPromiseCapability)(),this.read()):(this._loaded+=r.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(r).buffer,done:!1})}cancel(r){if(!this._readableStream){this._error(r);return}this._readableStream.destroy(r)}_error(r){this._storedError=r,this._readCapability.resolve()}_setReadableStream(r){this._readableStream=r,r.on("readable",()=>{this._readCapability.resolve()}),r.on("end",()=>{r.destroy(),this._done=!0,this._readCapability.resolve()}),r.on("error",s=>{this._error(s)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function q(y,r){return{protocol:y.protocol,auth:y.auth,host:y.hostname,port:y.port,path:y.path,method:"GET",headers:r}}class u extends D{constructor(r){super(r);const s=c=>{if(c.statusCode===404){const k=new t.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=k,this._headersCapability.reject(k);return}this._headersCapability.resolve(),this._setReadableStream(c);const A=k=>this._readableStream.headers[k.toLowerCase()],{allowRangeRequests:p,suggestedLength:M}=(0,g.validateRangeRequestCapabilities)({getResponseHeader:A,isHttp:r.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=p,this._contentLength=M||this._contentLength,this._filename=(0,g.extractFilenameFromHeader)(A)};this._request=null,this._url.protocol==="http:"?this._request=R.request(q(this._url,r.httpHeaders),s):this._request=O.request(q(this._url,r.httpHeaders),s),this._request.on("error",c=>{this._storedError=c,this._headersCapability.reject(c)}),this._request.end()}}class S extends P{constructor(r,s,c){super(r),this._httpHeaders={};for(const p in r.httpHeaders){const M=r.httpHeaders[p];typeof M>"u"||(this._httpHeaders[p]=M)}this._httpHeaders.Range=`bytes=${s}-${c-1}`;const A=p=>{if(p.statusCode===404){const M=new t.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=M;return}this._setReadableStream(p)};this._request=null,this._url.protocol==="http:"?this._request=R.request(q(this._url,this._httpHeaders),A):this._request=O.request(q(this._url,this._httpHeaders),A),this._request.on("error",p=>{this._storedError=p}),this._request.end()}}class I extends D{constructor(r){super(r);let s=decodeURIComponent(this._url.path);d.test(this._url.href)&&(s=s.replace(/^\//,"")),C.lstat(s,(c,A)=>{if(c){c.code==="ENOENT"&&(c=new t.MissingPDFException(`Missing PDF "${s}".`)),this._storedError=c,this._headersCapability.reject(c);return}this._contentLength=A.size,this._setReadableStream(C.createReadStream(s)),this._headersCapability.resolve()})}}class T extends P{constructor(r,s,c){super(r);let A=decodeURIComponent(this._url.path);d.test(this._url.href)&&(A=A.replace(/^\//,"")),this._setReadableStream(C.createReadStream(A,{start:s,end:c-1}))}}},(V,n,_)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.createResponseStatusError=m,n.extractFilenameFromHeader=O,n.validateRangeRequestCapabilities=R,n.validateResponseStatus=d;var t=_(2),g=_(24),C=_(1);function R({getResponseHeader:f,isHttp:E,rangeChunkSize:D,disableRange:P}){(0,t.assert)(D>0,"Range chunk size must be larger than zero");const q={allowRangeRequests:!1,suggestedLength:void 0},u=parseInt(f("Content-Length"),10);return!Number.isInteger(u)||(q.suggestedLength=u,u<=2*D)||P||!E||f("Accept-Ranges")!=="bytes"||(f("Content-Encoding")||"identity")!=="identity"||(q.allowRangeRequests=!0),q}function O(f){const E=f("Content-Disposition");if(E){let D=(0,g.getFilenameFromContentDispositionHeader)(E);if(D.includes("%"))try{D=decodeURIComponent(D)}catch{}if((0,C.isPdfFile)(D))return D}return null}function m(f,E){return f===404||f===0&&E.startsWith("file:")?new t.MissingPDFException('Missing PDF "'+E+'".'):new t.UnexpectedResponseException(`Unexpected server response (${f}) while retrieving PDF "${E}".`,f)}function d(f){return f===200||f===206}},(V,n,_)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.getFilenameFromContentDispositionHeader=g;var t=_(2);function g(C){let R=!0,O=m("filename\\*","i").exec(C);if(O){O=O[1];let u=D(O);return u=unescape(u),u=P(u),u=q(u),f(u)}if(O=E(C),O){const u=q(O);return f(u)}if(O=m("filename","i").exec(C),O){O=O[1];let u=D(O);return u=q(u),f(u)}function m(u,S){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',S)}function d(u,S){if(u){if(!/^[\x00-\xFF]+$/.test(S))return S;try{const I=new TextDecoder(u,{fatal:!0}),T=(0,t.stringToBytes)(S);S=I.decode(T),R=!1}catch{if(/^utf-?8$/i.test(u))try{S=decodeURIComponent(escape(S)),R=!1}catch{}}}return S}function f(u){return R&&/[\x80-\xff]/.test(u)&&(u=d("utf-8",u),R&&(u=d("iso-8859-1",u))),u}function E(u){const S=[];let I;const T=m("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(I=T.exec(u))!==null;){let[,r,s,c]=I;if(r=parseInt(r,10),r in S){if(r===0)break;continue}S[r]=[s,c]}const y=[];for(let r=0;r<S.length&&r in S;++r){let[s,c]=S[r];c=D(c),s&&(c=unescape(c),r===0&&(c=P(c))),y.push(c)}return y.join("")}function D(u){if(u.startsWith('"')){const S=u.slice(1).split('\\"');for(let I=0;I<S.length;++I){const T=S[I].indexOf('"');T!==-1&&(S[I]=S[I].slice(0,T),S.length=I+1),S[I]=S[I].replace(/\\(.)/g,"$1")}u=S.join('"')}return u}function P(u){const S=u.indexOf("'");if(S===-1)return u;const I=u.slice(0,S),y=u.slice(S+1).replace(/^[^']*'/,"");return d(I,y)}function q(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(S,I,T,y){if(T==="q"||T==="Q")return y=y.replace(/_/g," "),y=y.replace(/=([0-9a-fA-F]{2})/g,function(r,s){return String.fromCharCode(parseInt(s,16))}),d(I,y);try{y=atob(y)}catch{}return d(I,y)})}return""}},(V,n,_)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.PDFNetworkStream=void 0;var t=_(2),g=_(23);const C=200,R=206;function O(D){const P=D.response;return typeof P!="string"?P:(0,t.stringToBytes)(P).buffer}class m{constructor(P,q){this.url=P,q=q||{},this.isHttp=/^https?:/i.test(P),this.httpHeaders=this.isHttp&&q.httpHeaders||{},this.withCredentials=q.withCredentials||!1,this.getXhr=q.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(P,q,u){const S={begin:P,end:q};for(const I in u)S[I]=u[I];return this.request(S)}requestFull(P){return this.request(P)}request(P){const q=this.getXhr(),u=this.currXhrId++,S=this.pendingRequests[u]={xhr:q};q.open("GET",this.url),q.withCredentials=this.withCredentials;for(const I in this.httpHeaders){const T=this.httpHeaders[I];typeof T>"u"||q.setRequestHeader(I,T)}return this.isHttp&&"begin"in P&&"end"in P?(q.setRequestHeader("Range",`bytes=${P.begin}-${P.end-1}`),S.expectedStatus=R):S.expectedStatus=C,q.responseType="arraybuffer",P.onError&&(q.onerror=function(I){P.onError(q.status)}),q.onreadystatechange=this.onStateChange.bind(this,u),q.onprogress=this.onProgress.bind(this,u),S.onHeadersReceived=P.onHeadersReceived,S.onDone=P.onDone,S.onError=P.onError,S.onProgress=P.onProgress,q.send(null),u}onProgress(P,q){const u=this.pendingRequests[P];u&&u.onProgress&&u.onProgress(q)}onStateChange(P,q){const u=this.pendingRequests[P];if(!u)return;const S=u.xhr;if(S.readyState>=2&&u.onHeadersReceived&&(u.onHeadersReceived(),delete u.onHeadersReceived),S.readyState!==4||!(P in this.pendingRequests))return;if(delete this.pendingRequests[P],S.status===0&&this.isHttp){u.onError&&u.onError(S.status);return}const I=S.status||C;if(!(I===C&&u.expectedStatus===R)&&I!==u.expectedStatus){u.onError&&u.onError(S.status);return}const y=O(S);if(I===R){const r=S.getResponseHeader("Content-Range"),s=/bytes (\d+)-(\d+)\/(\d+)/.exec(r);u.onDone({begin:parseInt(s[1],10),chunk:y})}else y?u.onDone({begin:0,chunk:y}):u.onError&&u.onError(S.status)}getRequestXhr(P){return this.pendingRequests[P].xhr}isPendingRequest(P){return P in this.pendingRequests}abortRequest(P){const q=this.pendingRequests[P].xhr;delete this.pendingRequests[P],q.abort()}}class d{constructor(P){this._source=P,this._manager=new m(P.url,{httpHeaders:P.httpHeaders,withCredentials:P.withCredentials}),this._rangeChunkSize=P.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(P){const q=this._rangeRequestReaders.indexOf(P);q>=0&&this._rangeRequestReaders.splice(q,1)}getFullReader(){return(0,t.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new f(this._manager,this._source),this._fullRequestReader}getRangeReader(P,q){const u=new E(this._manager,P,q);return u.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(u),u}cancelAllRequests(P){this._fullRequestReader&&this._fullRequestReader.cancel(P);for(const q of this._rangeRequestReaders.slice(0))q.cancel(P)}}n.PDFNetworkStream=d;class f{constructor(P,q){this._manager=P;const u={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=q.url,this._fullRequestId=P.requestFull(u),this._headersReceivedCapability=(0,t.createPromiseCapability)(),this._disableRange=q.disableRange||!1,this._contentLength=q.length,this._rangeChunkSize=q.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const P=this._fullRequestId,q=this._manager.getRequestXhr(P),u=T=>q.getResponseHeader(T),{allowRangeRequests:S,suggestedLength:I}=(0,g.validateRangeRequestCapabilities)({getResponseHeader:u,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});S&&(this._isRangeSupported=!0),this._contentLength=I||this._contentLength,this._filename=(0,g.extractFilenameFromHeader)(u),this._isRangeSupported&&this._manager.abortRequest(P),this._headersReceivedCapability.resolve()}_onDone(P){if(P&&(this._requests.length>0?this._requests.shift().resolve({value:P.chunk,done:!1}):this._cachedChunks.push(P.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const q of this._requests)q.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(P){const q=this._url,u=(0,g.createResponseStatusError)(P,q);this._storedError=u,this._headersReceivedCapability.reject(u);for(const S of this._requests)S.reject(u);this._requests.length=0,this._cachedChunks.length=0}_onProgress(P){this.onProgress&&this.onProgress({loaded:P.loaded,total:P.lengthComputable?P.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const P=(0,t.createPromiseCapability)();return this._requests.push(P),P.promise}cancel(P){this._done=!0,this._headersReceivedCapability.reject(P);for(const q of this._requests)q.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class E{constructor(P,q,u){this._manager=P;const S={onDone:this._onDone.bind(this),onProgress:this._onProgress.bind(this)};this._requestId=P.requestRange(q,u,S),this._requests=[],this._queuedChunk=null,this._done=!1,this.onProgress=null,this.onClosed=null}_close(){this.onClosed&&this.onClosed(this)}_onDone(P){const q=P.chunk;this._requests.length>0?this._requests.shift().resolve({value:q,done:!1}):this._queuedChunk=q,this._done=!0;for(const u of this._requests)u.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onProgress(P){!this.isStreamingSupported&&this.onProgress&&this.onProgress({loaded:P.loaded})}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk!==null){const q=this._queuedChunk;return this._queuedChunk=null,{value:q,done:!1}}if(this._done)return{value:void 0,done:!0};const P=(0,t.createPromiseCapability)();return this._requests.push(P),P.promise}cancel(P){this._done=!0;for(const q of this._requests)q.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(V,n,_)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.PDFFetchStream=void 0;var t=_(2),g=_(23);function C(f,E,D){return{method:"GET",headers:f,signal:D==null?void 0:D.signal,mode:"cors",credentials:E?"include":"same-origin",redirect:"follow"}}function R(f){const E=new Headers;for(const D in f){const P=f[D];typeof P>"u"||E.append(D,P)}return E}class O{constructor(E){this.source=E,this.isHttp=/^https?:/i.test(E.url),this.httpHeaders=this.isHttp&&E.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var E;return((E=this._fullRequestReader)==null?void 0:E._loaded)??0}getFullReader(){return(0,t.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new m(this),this._fullRequestReader}getRangeReader(E,D){if(D<=this._progressiveDataLength)return null;const P=new d(this,E,D);return this._rangeRequestReaders.push(P),P}cancelAllRequests(E){this._fullRequestReader&&this._fullRequestReader.cancel(E);for(const D of this._rangeRequestReaders.slice(0))D.cancel(E)}}n.PDFFetchStream=O;class m{constructor(E){this._stream=E,this._reader=null,this._loaded=0,this._filename=null;const D=E.source;this._withCredentials=D.withCredentials||!1,this._contentLength=D.length,this._headersCapability=(0,t.createPromiseCapability)(),this._disableRange=D.disableRange||!1,this._rangeChunkSize=D.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),typeof AbortController<"u"&&(this._abortController=new AbortController),this._isStreamingSupported=!D.disableStream,this._isRangeSupported=!D.disableRange,this._headers=R(this._stream.httpHeaders);const P=D.url;fetch(P,C(this._headers,this._withCredentials,this._abortController)).then(q=>{if(!(0,g.validateResponseStatus)(q.status))throw(0,g.createResponseStatusError)(q.status,P);this._reader=q.body.getReader(),this._headersCapability.resolve();const u=T=>q.headers.get(T),{allowRangeRequests:S,suggestedLength:I}=(0,g.validateRangeRequestCapabilities)({getResponseHeader:u,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=S,this._contentLength=I||this._contentLength,this._filename=(0,g.extractFilenameFromHeader)(u),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new t.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:E,done:D}=await this._reader.read();return D?{value:E,done:D}:(this._loaded+=E.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(E).buffer,done:!1})}cancel(E){this._reader&&this._reader.cancel(E),this._abortController&&this._abortController.abort()}}class d{constructor(E,D,P){this._stream=E,this._reader=null,this._loaded=0;const q=E.source;this._withCredentials=q.withCredentials||!1,this._readCapability=(0,t.createPromiseCapability)(),this._isStreamingSupported=!q.disableStream,typeof AbortController<"u"&&(this._abortController=new AbortController),this._headers=R(this._stream.httpHeaders),this._headers.append("Range",`bytes=${D}-${P-1}`);const u=q.url;fetch(u,C(this._headers,this._withCredentials,this._abortController)).then(S=>{if(!(0,g.validateResponseStatus)(S.status))throw(0,g.createResponseStatusError)(S.status,u);this._readCapability.resolve(),this._reader=S.body.getReader()}).catch(S=>{if((S==null?void 0:S.name)!=="AbortError")throw S}),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:E,done:D}=await this._reader.read();return D?{value:E,done:D}:(this._loaded+=E.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(E).buffer,done:!1})}cancel(E){this._reader&&this._reader.cancel(E),this._abortController&&this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(V){var n=__webpack_module_cache__[V];if(n!==void 0)return n.exports;var _=__webpack_module_cache__[V]={exports:{}};return __webpack_modules__[V](_,_.exports,__w_pdfjs_require__),_.exports}var __webpack_exports__={};return(()=>{var V=__webpack_exports__;Object.defineProperty(V,"__esModule",{value:!0}),Object.defineProperty(V,"addLinkAttributes",{enumerable:!0,get:function(){return n.addLinkAttributes}}),Object.defineProperty(V,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}}),Object.defineProperty(V,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return n.getPdfFilenameFromUrl}}),Object.defineProperty(V,"getXfaPageViewport",{enumerable:!0,get:function(){return n.getXfaPageViewport}}),Object.defineProperty(V,"isPdfFile",{enumerable:!0,get:function(){return n.isPdfFile}}),Object.defineProperty(V,"LinkTarget",{enumerable:!0,get:function(){return n.LinkTarget}}),Object.defineProperty(V,"loadScript",{enumerable:!0,get:function(){return n.loadScript}}),Object.defineProperty(V,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}}),Object.defineProperty(V,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}}),Object.defineProperty(V,"build",{enumerable:!0,get:function(){return _.build}}),Object.defineProperty(V,"getDocument",{enumerable:!0,get:function(){return _.getDocument}}),Object.defineProperty(V,"LoopbackPort",{enumerable:!0,get:function(){return _.LoopbackPort}}),Object.defineProperty(V,"PDFDataRangeTransport",{enumerable:!0,get:function(){return _.PDFDataRangeTransport}}),Object.defineProperty(V,"PDFWorker",{enumerable:!0,get:function(){return _.PDFWorker}}),Object.defineProperty(V,"version",{enumerable:!0,get:function(){return _.version}}),Object.defineProperty(V,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(V,"createObjectURL",{enumerable:!0,get:function(){return t.createObjectURL}}),Object.defineProperty(V,"createPromiseCapability",{enumerable:!0,get:function(){return t.createPromiseCapability}}),Object.defineProperty(V,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(V,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(V,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(V,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(V,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(V,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(V,"removeNullCharacters",{enumerable:!0,get:function(){return t.removeNullCharacters}}),Object.defineProperty(V,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(V,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(V,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return t.UNSUPPORTED_FEATURES}}),Object.defineProperty(V,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(V,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(V,"AnnotationLayer",{enumerable:!0,get:function(){return g.AnnotationLayer}}),Object.defineProperty(V,"GlobalWorkerOptions",{enumerable:!0,get:function(){return C.GlobalWorkerOptions}}),Object.defineProperty(V,"renderTextLayer",{enumerable:!0,get:function(){return O.renderTextLayer}}),Object.defineProperty(V,"SVGGraphics",{enumerable:!0,get:function(){return m.SVGGraphics}}),Object.defineProperty(V,"XfaLayer",{enumerable:!0,get:function(){return d.XfaLayer}});var n=__w_pdfjs_require__(1),_=__w_pdfjs_require__(6),t=__w_pdfjs_require__(2),g=__w_pdfjs_require__(17),C=__w_pdfjs_require__(12),R=__w_pdfjs_require__(4),O=__w_pdfjs_require__(19),m=__w_pdfjs_require__(20),d=__w_pdfjs_require__(21);if(R.isNodeJS){const{PDFNodeStream:f}=__w_pdfjs_require__(22);(0,_.setPDFNetworkStreamFactory)(E=>new f(E))}else{const{PDFNetworkStream:f}=__w_pdfjs_require__(25),{PDFFetchStream:E}=__w_pdfjs_require__(26);(0,_.setPDFNetworkStreamFactory)(D=>(0,n.isValidFetchUrl)(D.url)?new E(D):new f(D))}})(),__webpack_exports__})()})}(pdf$1)),pdf$1.exports}var pdfExports=requirePdf();const FILE_TYPES={IMAGE:"image",VIDEO:"video",PDF:"pdf",UNKNOWN:"unknown"},SUPPORTED_EXTENSIONS={IMAGE:["jpg","jpeg","png","gif","webp"],VIDEO:["mp4","webm","ogg"],PDF:["pdf"]},PDF_JS_LIB_SRC="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.worker.min.js",getFileType=async(V,n,_=null)=>{if(V)return V;try{let t;if(typeof n=="object"&&n instanceof File)t=n.type.split("/")[1];else{const m=new URL(n).pathname.toLowerCase();t=getFileExtension(m)}if(SUPPORTED_EXTENSIONS.IMAGE.includes(t))return FILE_TYPES.IMAGE;if(SUPPORTED_EXTENSIONS.VIDEO.includes(t))return FILE_TYPES.VIDEO;if(SUPPORTED_EXTENSIONS.PDF.includes(t))return FILE_TYPES.PDF;const g=_?_.get:fetch,C=_?await g(n):await g(n,{method:"GET"}),R=_?C.headers["content-type"]:C.headers.get("Content-Type");if(R.startsWith("image/"))return FILE_TYPES.IMAGE;if(R.startsWith("video/"))return FILE_TYPES.VIDEO;if(R==="application/pdf")return FILE_TYPES.PDF}catch(t){console.warn("Invalid URL or local file detected.",t)}return FILE_TYPES.UNKNOWN},getFileExtension=V=>{var _,t;if(!V.includes("."))return"";const n=(t=(_=V==null?void 0:V.split("."))==null?void 0:_.pop())==null?void 0:t.toLowerCase();return n||""};pdfExports.GlobalWorkerOptions.workerSrc=PDF_JS_LIB_SRC;const FilePreview=({preview:V,clarity:n,placeHolderImage:_,errorImage:t,fileType:g,axiosInstance:C=null})=>{const[R,O]=require$$0.useState(""),[m,d]=require$$0.useState(null),[f,E]=require$$0.useState(null),[D,P]=require$$0.useState(g??""),[q,u]=require$$0.useState(!0);require$$0.useEffect(()=>{if(V instanceof File){const c=URL.createObjectURL(V);return O(c),()=>URL.revokeObjectURL(c)}else O(V)},[V]),require$$0.useEffect(()=>{D===FILE_TYPES.PDF&&S(R),D===FILE_TYPES.IMAGE&&I(R)},[R,D]),require$$0.useEffect(()=>{(async()=>{const A=await getFileType(g,V,C);P(A)})()},[V,g,C]);const S=async c=>{try{let A;if(C){const F=await C.get(c,{responseType:"blob"});A=new Uint8Array(F.data)}else{const o=await(await fetch(c)).arrayBuffer();A=new Uint8Array(o)}const k=await(await pdfExports.getDocument({data:A,verbosity:pdfExports.VerbosityLevel.ERRORS}).promise).getPage(1),X=n??1e3,N=k.getViewport({scale:1}),v=X/N.width,L=k.getViewport({scale:v}),j=document.createElement("canvas"),$=j.getContext("2d");if(!$)return;j.width=L.width,j.height=L.height,await k.render({canvasContext:$,viewport:L}).promise,d(j.toDataURL("image/png"))}catch(A){console.error("Error generating PDF thumbnail:",A)}},I=async c=>{try{const A=await C.get(c,{responseType:"blob"}),p=new Blob([A.data],{type:"image/png"}),M=URL.createObjectURL(p);E(M)}catch(A){console.error("Error generating image thumbnail:",A)}};function T(){u(!1)}function y(){requestAnimationFrame(T)}function r(){requestAnimationFrame(y)}function s(){return D?D===FILE_TYPES.IMAGE?jsxRuntimeExports.jsx("img",{onLoad:r,src:f||R,alt:"Preview",className:`preview-file ${q?"hidden":""}`}):D===FILE_TYPES.VIDEO?jsxRuntimeExports.jsx("video",{onLoad:r,src:R,controls:!0,className:`preview-file ${q?"hidden":""}`}):D===FILE_TYPES.PDF?jsxRuntimeExports.jsx("img",{onLoad:r,src:m||R,alt:"PDF Preview",className:`preview-file ${q?"hidden":""}`}):D===FILE_TYPES.UNKNOWN&&t?(console.log("errorImage",t),jsxRuntimeExports.jsx("img",{src:t,alt:"errorImage",className:`preview-file ${q?"hidden":""}`,onLoad:()=>u(!1)})):jsxRuntimeExports.jsx("span",{children:"Unsupported file type"}):null}return!D&&_?jsxRuntimeExports.jsx("img",{src:_,alt:"placeHolder",className:"preview-file"}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[s(),q?jsxRuntimeExports.jsx("div",{className:"loader-container",children:jsxRuntimeExports.jsx("div",{className:"loader"})}):null]})};exports.FilePreview=FilePreview,exports.default=FilePreview,Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
